2022-04-30 06:29:27.028 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 06:30:45.018 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 06:30:45.771 +04:00 [INF] Executed DbCommand (355ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-04-30 06:30:45.833 +04:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-04-30 06:30:45.847 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 06:30:45.937 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-04-30 06:30:45.939 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 06:30:45.958 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 06:30:45.963 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 06:30:45.976 +04:00 [INF] Applying migration '20220430022927_first'.
2022-04-30 06:30:46.023 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-04-30 06:30:46.024 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-04-30 06:30:46.025 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-04-30 06:30:46.027 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-04-30 06:30:46.029 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-04-30 06:30:46.029 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-04-30 06:30:46.030 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-04-30 06:30:46.057 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-04-30 06:30:46.057 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-04-30 06:30:46.058 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430022927_first', N'6.0.3');
2022-04-30 06:57:15.174 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 06:57:15.197 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 06:57:15.199 +04:00 [INF] Hosting environment: Development
2022-04-30 06:57:15.199 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 06:57:16.007 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 06:57:16.237 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 235.4487ms
2022-04-30 06:57:16.289 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 06:57:16.292 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6663ms
2022-04-30 06:57:16.569 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 06:57:16.620 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 50.7442ms
2022-04-30 07:41:46.585 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 07:41:46.611 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 07:41:46.612 +04:00 [INF] Hosting environment: Development
2022-04-30 07:41:46.613 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 07:41:48.093 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 07:41:48.394 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 310.4554ms
2022-04-30 07:41:48.458 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 07:41:48.462 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.6895ms
2022-04-30 07:41:48.798 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 07:41:48.877 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 79.4935ms
2022-04-30 08:11:48.586 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:11:48.610 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:11:48.611 +04:00 [INF] Hosting environment: Development
2022-04-30 08:11:48.612 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:11:50.278 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:11:50.539 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 263.8414ms
2022-04-30 08:11:50.595 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:11:50.599 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.8729ms
2022-04-30 08:11:50.857 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:11:50.968 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 110.3533ms
2022-04-30 08:12:02.900 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:12:02.909 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:12:02.938 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:12:03.551 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-04-30 08:12:03.560 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 615.4371ms
2022-04-30 08:12:03.562 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:12:03.564 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 400 - application/problem+json;+charset=utf-8 664.6334ms
2022-04-30 08:12:23.068 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 211
2022-04-30 08:12:23.070 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:12:23.071 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:12:23.099 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-04-30 08:12:23.101 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 27.9704ms
2022-04-30 08:12:23.102 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:12:23.103 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 211 - 400 - application/problem+json;+charset=utf-8 35.4032ms
2022-04-30 08:13:01.214 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:13:01.242 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:13:01.243 +04:00 [INF] Hosting environment: Development
2022-04-30 08:13:01.244 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:13:02.330 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:13:02.679 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 354.7061ms
2022-04-30 08:13:02.753 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:13:02.758 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.4133ms
2022-04-30 08:13:03.157 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:13:03.288 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 131.4932ms
2022-04-30 08:13:14.065 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:13:14.075 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:13:14.103 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:13:15.208 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:13:16.392 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 08:13:16.445 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 08:13:16.458 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 08:13:16.706 +04:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:13:16.841 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6e944538-37ba-46c6-80e6-6da52c59419a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6e944538-37ba-46c6-80e6-6da52c59419a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:13:17.056 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 2946.0808ms
2022-04-30 08:13:17.058 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:13:17.429 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 500 - application/json 3363.9598ms
2022-04-30 08:13:37.136 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:14:35.051 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:14:35.075 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:14:35.076 +04:00 [INF] Hosting environment: Development
2022-04-30 08:14:35.078 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:14:36.536 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:14:36.852 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 322.3144ms
2022-04-30 08:14:36.921 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:14:36.924 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.5605ms
2022-04-30 08:14:37.272 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:14:37.410 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 138.6410ms
2022-04-30 08:14:41.818 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:14:47.637 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:14:47.685 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:16:03.767 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:16:04.506 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 08:16:04.555 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 08:16:04.568 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 08:16:04.803 +04:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:16:04.844 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:01f65d8b-6c37-47b3-80a7-a88a19532100
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:01f65d8b-6c37-47b3-80a7-a88a19532100
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:16:05.091 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 77399.9943ms
2022-04-30 08:16:05.094 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:16:05.305 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 500 - application/json 83486.5872ms
2022-04-30 08:16:17.414 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:16:24.584 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:16:24.585 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:16:29.636 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:16:29.681 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 08:16:34.655 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 08:16:43.561 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 08:17:03.181 +04:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:17:03.191 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:01f65d8b-6c37-47b3-80a7-a88a19532100
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:01f65d8b-6c37-47b3-80a7-a88a19532100
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:17:08.321 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 43734.3098ms
2022-04-30 08:17:08.323 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:18:49.622 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:18:59.102 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:18:59.434 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 08:18:59.463 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 08:18:59.466 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 08:18:59.467 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 08:18:59.487 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 08:18:59.502 +04:00 [INF] Applying migration '20220430041849_test2'.
2022-04-30 08:18:59.584 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-04-30T08:18:49.6647056+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 08:18:59.595 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-04-30T08:18:49.6647059+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 08:18:59.608 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-04-30T08:18:49.6646800+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 08:18:59.619 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-04-30T08:18:49.6646810+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 08:18:59.620 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430041849_test2', N'6.0.3');
2022-04-30 08:19:07.176 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:19:07.201 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:19:07.202 +04:00 [INF] Hosting environment: Development
2022-04-30 08:19:07.203 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:19:08.666 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:19:09.137 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 479.2538ms
2022-04-30 08:19:09.204 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:19:09.207 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.1457ms
2022-04-30 08:19:09.550 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:19:09.661 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 110.8322ms
2022-04-30 08:19:20.486 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:19:20.494 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:19:20.520 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:19:23.732 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:19:24.406 +04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 08:19:24.456 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 08:19:24.472 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 08:19:24.689 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:19:24.741 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2022-04-30 08:19:24.748 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 4222.4375ms
2022-04-30 08:19:24.750 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:19:24.755 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 200 - application/json;+charset=utf-8 4269.3868ms
2022-04-30 08:19:31.964 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:19:31.967 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:19:31.971 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:19:32.058 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:19:32.160 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:19:32.265 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 291.7337ms
2022-04-30 08:19:32.267 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:19:32.457 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 500 - application/json 492.4845ms
2022-04-30 08:20:02.967 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:20:02.973 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:20:02.976 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:20:07.981 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:20:08.034 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:20:11.803 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 8824.6002ms
2022-04-30 08:20:11.804 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:20:16.721 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 500 - application/json 13754.5310ms
2022-04-30 08:20:18.883 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:20:18.885 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:20:18.886 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:20:24.635 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:20:24.673 +04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:22:04.845 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:22:04.874 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:22:04.876 +04:00 [INF] Hosting environment: Development
2022-04-30 08:22:04.878 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:22:05.886 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:22:06.370 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 492.3426ms
2022-04-30 08:22:06.439 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:22:06.443 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.2405ms
2022-04-30 08:22:06.756 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:22:06.860 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 104.4192ms
2022-04-30 08:22:09.844 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:22:09.852 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:22:09.878 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:22:13.303 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:22:14.128 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:22:14.794 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 08:22:14.961 +04:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:22:14.999 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1cc98574-3b7b-49b3-921e-15d8e50e2a3f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1cc98574-3b7b-49b3-921e-15d8e50e2a3f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:22:15.185 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 5301.2475ms
2022-04-30 08:22:15.188 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:22:15.356 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 500 - application/json 5512.0216ms
2022-04-30 08:22:25.323 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:22:25.326 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:22:25.328 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:22:29.592 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:22:29.635 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:22:47.817 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 08:23:00.733 +04:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:23:00.738 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1cc98574-3b7b-49b3-921e-15d8e50e2a3f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1cc98574-3b7b-49b3-921e-15d8e50e2a3f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:23:02.152 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 36822.6486ms
2022-04-30 08:23:02.153 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:25:09.360 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:25:09.383 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:25:09.384 +04:00 [INF] Hosting environment: Development
2022-04-30 18:25:09.385 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:25:10.790 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:25:11.123 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 336.0019ms
2022-04-30 18:25:11.217 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:25:11.222 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.3479ms
2022-04-30 18:25:11.557 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:25:11.694 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 137.0990ms
2022-04-30 18:44:50.152 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:44:58.393 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:44:59.065 +04:00 [INF] Executed DbCommand (218ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-04-30 18:44:59.128 +04:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-04-30 18:44:59.144 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:44:59.239 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-04-30 18:44:59.240 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:44:59.260 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 18:44:59.264 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 18:44:59.278 +04:00 [INF] Applying migration '20220430022927_first'.
2022-04-30 18:44:59.319 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-04-30 18:44:59.320 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-04-30 18:44:59.321 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-04-30 18:44:59.324 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-04-30 18:44:59.325 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-04-30 18:44:59.326 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-04-30 18:44:59.326 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-04-30 18:44:59.327 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-04-30 18:44:59.327 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-04-30 18:44:59.329 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430022927_first', N'6.0.3');
2022-04-30 18:44:59.333 +04:00 [INF] Applying migration '20220430041849_test2'.
2022-04-30 18:44:59.371 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-04-30T08:18:49.6647056+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:45:00.034 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-04-30T08:18:49.6647059+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:45:00.044 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-04-30T08:18:49.6646800+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:45:00.051 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-04-30T08:18:49.6646810+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:45:00.052 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430041849_test2', N'6.0.3');
2022-04-30 18:45:00.052 +04:00 [INF] Applying migration '20220430144450_test3'.
2022-04-30 18:45:00.069 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-04-30T18:44:50.1957250+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:45:00.069 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-04-30T18:44:50.1957261+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-04-30 18:45:00.070 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-04-30T18:44:50.1957410+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:45:00.071 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-04-30T18:44:50.1957411+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-04-30 18:45:00.081 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] ON;
INSERT INTO [dbo].[User] ([Id], [Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (1, N'admin', 1, '0001-01-01T00:00:00.0000000', NULL, N'O_pirtskhalaishvili@cu.edu.ge', N'admin', N'admin', N'string', NULL, 1, N'FEtCF+aMMa8neXYJfTb4Cg==', N'551001100', 'string', NULL, NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] OFF;
2022-04-30 18:45:02.820 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430144450_test3', N'6.0.3');
2022-04-30 18:45:11.157 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:45:11.183 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:45:11.185 +04:00 [INF] Hosting environment: Development
2022-04-30 18:45:11.187 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:45:12.858 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:45:13.212 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 357.7186ms
2022-04-30 18:45:13.304 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:45:13.308 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.9351ms
2022-04-30 18:45:13.829 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:45:14.052 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 222.7855ms
2022-04-30 18:45:19.360 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:45:19.383 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:45:19.439 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:45:25.722 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:45:26.565 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:45:26.779 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 7327.3191ms
2022-04-30 18:45:26.782 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:45:26.995 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 400 - application/json 7635.3781ms
2022-04-30 18:45:53.464 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:45:53.470 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:45:53.472 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:46:01.906 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:46:03.593 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:48:08.426 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:48:17.212 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:48:17.907 +04:00 [INF] Executed DbCommand (321ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-04-30 18:48:17.971 +04:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-04-30 18:48:17.988 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:48:18.085 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-04-30 18:48:18.087 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:48:18.107 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 18:48:18.112 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 18:48:18.128 +04:00 [INF] Applying migration '20220430022927_first'.
2022-04-30 18:48:18.182 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-04-30 18:48:18.184 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-04-30 18:48:18.186 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-04-30 18:48:18.188 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-04-30 18:48:18.191 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-04-30 18:48:18.192 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-04-30 18:48:18.193 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-04-30 18:48:18.431 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-04-30 18:48:18.432 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-04-30 18:48:18.433 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430022927_first', N'6.0.3');
2022-04-30 18:48:18.438 +04:00 [INF] Applying migration '20220430041849_test2'.
2022-04-30 18:48:18.479 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-04-30T08:18:49.6647056+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:48:18.486 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-04-30T08:18:49.6647059+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:48:18.497 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-04-30T08:18:49.6646800+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:48:18.505 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-04-30T08:18:49.6646810+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:48:18.506 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430041849_test2', N'6.0.3');
2022-04-30 18:48:18.506 +04:00 [INF] Applying migration '20220430144808_test3'.
2022-04-30 18:48:18.523 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-04-30T18:48:08.4704512+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:48:18.524 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-04-30T18:48:08.4704522+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-04-30 18:48:18.525 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-04-30T18:48:08.4704717+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:48:21.750 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-04-30T18:48:08.4704718+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-04-30 18:48:21.752 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'hdPer0IORC0Ae8EIphI54UuZk8OduKuA5qPNKMyOYb8=', [Salt] = N'+ut1WSHMY5mhcZktovyrTQ=='
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:48:21.752 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430144808_test3', N'6.0.3');
2022-04-30 18:49:32.390 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:49:32.421 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:49:32.423 +04:00 [INF] Hosting environment: Development
2022-04-30 18:49:32.424 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:49:34.512 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:49:34.815 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 308.6075ms
2022-04-30 18:49:34.891 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:49:34.895 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.8757ms
2022-04-30 18:49:35.205 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:49:35.357 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 151.6005ms
2022-04-30 18:49:37.906 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:49:37.913 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:49:37.940 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:49:41.997 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:49:42.807 +04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:49:42.926 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 4979.4222ms
2022-04-30 18:49:42.928 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:49:43.113 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 400 - application/json 5207.4335ms
2022-04-30 18:49:47.035 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:49:47.038 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:49:47.039 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:49:53.411 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:49:54.923 +04:00 [INF] Executed DbCommand (74ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:51:07.816 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:51:15.502 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:51:16.185 +04:00 [INF] Executed DbCommand (282ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-04-30 18:51:16.274 +04:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-04-30 18:51:16.292 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:51:16.404 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-04-30 18:51:16.406 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:51:16.433 +04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 18:51:16.438 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 18:51:16.456 +04:00 [INF] Applying migration '20220430145108_first'.
2022-04-30 18:51:16.531 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-04-30 18:51:16.533 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-04-30 18:51:16.534 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-04-30 18:51:16.537 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-04-30 18:51:16.540 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-04-30 18:51:16.561 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-04-30T18:51:07.8563624+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:51:16.570 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-04-30T18:51:07.8563626+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:51:17.035 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-04-30T18:51:07.8563476+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:51:17.043 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-04-30T18:51:07.8563483+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:51:17.054 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] ON;
INSERT INTO [dbo].[User] ([Id], [Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (1, N'admin', 1, '0001-01-01T00:00:00.0000000', NULL, N'O_pirtskhalaishvili@cu.edu.ge', N'admin', N'admin', N'o28AksuvLP62ja4y2bY5YuEgZHuQbaOSaUw1ItmzOSs=', NULL, 1, N'7BqUpjgiKwCP1ZVAAlV/Sg==', N'551001100', 'string', NULL, NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] OFF;
2022-04-30 18:51:17.056 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-04-30 18:51:17.057 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-04-30 18:51:17.058 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-04-30 18:51:17.060 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-04-30 18:51:17.060 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430145108_first', N'6.0.3');
2022-04-30 18:51:39.621 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:51:39.645 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:51:39.648 +04:00 [INF] Hosting environment: Development
2022-04-30 18:51:39.649 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:51:41.841 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:51:42.168 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 333.4826ms
2022-04-30 18:51:42.238 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:51:42.242 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.4771ms
2022-04-30 18:51:42.650 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:51:42.774 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 123.5593ms
2022-04-30 18:51:47.392 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:51:47.401 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:51:47.427 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:51:50.032 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:51:50.841 +04:00 [INF] Executed DbCommand (58ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:51:51.154 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:51:51.316 +04:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:51:51.362 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:139ddffb-eac2-4607-8c29-7180b6f98740
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:139ddffb-eac2-4607-8c29-7180b6f98740
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 18:51:51.550 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 4114.692ms
2022-04-30 18:51:51.553 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:51:51.726 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 500 - application/json 4334.0376ms
2022-04-30 18:51:58.633 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:51:58.635 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:51:58.637 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:52:07.900 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:52:07.905 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:52:12.077 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:52:19.477 +04:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:52:19.483 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:139ddffb-eac2-4607-8c29-7180b6f98740
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:139ddffb-eac2-4607-8c29-7180b6f98740
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 18:52:21.913 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 23274.6876ms
2022-04-30 18:52:21.915 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:55:31.901 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:55:31.926 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:55:31.927 +04:00 [INF] Hosting environment: Development
2022-04-30 18:55:31.928 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:55:33.831 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:55:34.199 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 373.9357ms
2022-04-30 18:55:34.281 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:55:34.287 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 5.8741ms
2022-04-30 18:55:34.759 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:55:34.921 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.4416ms
2022-04-30 18:55:38.041 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:55:38.052 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:55:38.083 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:56:31.438 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:56:31.460 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:56:31.461 +04:00 [INF] Hosting environment: Development
2022-04-30 18:56:31.462 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:56:33.363 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:56:33.793 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:56:33.802 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 445.3380ms
2022-04-30 18:56:33.808 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 14.4088ms
2022-04-30 18:56:34.428 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:56:34.557 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 128.9162ms
2022-04-30 18:56:39.169 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:56:39.178 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:56:39.205 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:56:46.042 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:56:46.810 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:56:47.110 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:56:47.278 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:56:47.330 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 18:56:47.345 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 8134.5445ms
2022-04-30 18:56:47.348 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:56:47.353 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 8183.8333ms
2022-04-30 18:58:31.612 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0
2022-04-30 18:58:31.651 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 18:58:31.655 +04:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller API.Controllers.AuthController (API).
2022-04-30 18:58:31.776 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:58:31.800 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r0].[Id], [r0].[Created], [r0].[CreatedByIp], [r0].[Expires], [r0].[ReasonRevoked], [r0].[ReplacedByToken], [r0].[Revoked], [r0].[RevokedByIp], [r0].[Token], [r0].[UserEntityId], [r0].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE EXISTS (
        SELECT 1
        FROM [RefreshToken] AS [r]
        WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))
) AS [t]
LEFT JOIN [RefreshToken] AS [r0] ON [t].[Id] = [r0].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:58:31.812 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:58:31.832 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [RefreshToken] SET [ReasonRevoked] = @p0, [ReplacedByToken] = @p1, [Revoked] = @p2, [RevokedByIp] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-04-30 18:58:31.840 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:58:31.863 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 18:58:31.865 +04:00 [INF] Executed action API.Controllers.AuthController.RefreshToken (API) in 207.7734ms
2022-04-30 18:58:31.866 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 18:58:31.867 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0 - 200 - application/json;+charset=utf-8 254.9125ms
2022-04-30 18:58:52.240 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:58:52.247 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:58:52.251 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:58:52.257 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:58:52.258 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:58:52.260 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 3.9641ms
2022-04-30 18:58:52.261 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:58:52.262 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 22.6221ms
2022-04-30 18:59:09.343 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:59:09.344 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:09.347 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:09.349 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:59:09.350 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:59:09.352 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 2.5125ms
2022-04-30 18:59:09.353 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:09.354 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 11.2322ms
2022-04-30 18:59:10.678 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:59:10.679 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:10.680 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:10.682 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:59:10.683 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:59:10.687 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 5.4887ms
2022-04-30 18:59:10.688 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:10.689 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 11.6642ms
2022-04-30 18:59:24.311 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:59:24.312 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:59:24.313 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:27.087 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:59:27.094 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:59:27.117 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:59:27.125 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:59:27.129 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 18:59:27.130 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2814.38ms
2022-04-30 18:59:27.131 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:59:27.132 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2821.3641ms
2022-04-30 18:59:38.940 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:59:38.942 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:38.944 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:38.946 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:59:38.947 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:59:38.949 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 2.3993ms
2022-04-30 18:59:38.950 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:38.951 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 11.4715ms
2022-04-30 18:59:54.960 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:59:54.961 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:54.962 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:54.964 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:59:54.965 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:59:54.967 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 2.8433ms
2022-04-30 18:59:54.968 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:54.969 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 9.2044ms
2022-04-30 19:00:13.915 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/GetById/1 - -
2022-04-30 19:00:13.917 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetById (API)'
2022-04-30 19:00:13.921 +04:00 [INF] Route matched with {action = "GetById", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 19:00:13.924 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 19:00:13.925 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 19:00:13.926 +04:00 [INF] Executed action API.Controllers.AuthController.GetById (API) in 2.4292ms
2022-04-30 19:00:13.927 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetById (API)'
2022-04-30 19:00:13.928 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/GetById/1 - - - 401 - application/json;+charset=utf-8 13.3559ms
2022-04-30 19:00:18.081 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth - -
2022-04-30 19:00:18.083 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetAll (API)'
2022-04-30 19:00:18.086 +04:00 [INF] Route matched with {action = "GetAll", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller API.Controllers.AuthController (API).
2022-04-30 19:00:18.088 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 19:00:18.089 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 19:00:18.094 +04:00 [INF] Executed action API.Controllers.AuthController.GetAll (API) in 6.0792ms
2022-04-30 19:00:18.096 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetAll (API)'
2022-04-30 19:00:18.097 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth - - - 401 - application/json;+charset=utf-8 15.9687ms
2022-04-30 19:00:24.050 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0
2022-04-30 19:00:24.051 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 19:00:24.052 +04:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller API.Controllers.AuthController (API).
2022-04-30 19:00:24.055 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:00:24.067 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r0].[Id], [r0].[Created], [r0].[CreatedByIp], [r0].[Expires], [r0].[ReasonRevoked], [r0].[ReplacedByToken], [r0].[Revoked], [r0].[RevokedByIp], [r0].[Token], [r0].[UserEntityId], [r0].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE EXISTS (
        SELECT 1
        FROM [RefreshToken] AS [r]
        WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))
) AS [t]
LEFT JOIN [RefreshToken] AS [r0] ON [t].[Id] = [r0].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 19:00:24.094 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 19:00:24.100 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [RefreshToken] SET [ReasonRevoked] = @p0, [ReplacedByToken] = @p1, [Revoked] = @p2, [RevokedByIp] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-04-30 19:00:24.106 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 19:00:24.110 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 19:00:24.112 +04:00 [INF] Executed action API.Controllers.AuthController.RefreshToken (API) in 58.0245ms
2022-04-30 19:00:24.113 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 19:00:24.114 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0 - 200 - application/json;+charset=utf-8 64.7792ms
2022-04-30 19:05:00.513 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 19:05:00.550 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 19:05:00.552 +04:00 [INF] Hosting environment: Development
2022-04-30 19:05:00.554 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 19:05:02.310 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 19:05:02.647 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 344.6877ms
2022-04-30 19:05:02.749 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 19:05:02.753 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.9688ms
2022-04-30 19:05:03.172 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 19:05:03.311 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 138.8985ms
2022-04-30 19:05:06.775 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 19:05:06.950 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 19:05:06.976 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 19:05:07.938 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:08.721 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 19:05:09.043 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 19:05:09.187 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 19:05:09.240 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 19:05:09.255 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2271.5703ms
2022-04-30 19:05:09.257 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 19:05:09.261 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2485.9410ms
2022-04-30 19:05:25.461 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth - -
2022-04-30 19:05:25.561 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:25.572 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:05:25.575 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetAll (API)'
2022-04-30 19:05:25.578 +04:00 [INF] Route matched with {action = "GetAll", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller API.Controllers.AuthController (API).
2022-04-30 19:05:25.593 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 19:05:25.600 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.User.UserEntity, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-04-30 19:05:25.609 +04:00 [INF] Executed action API.Controllers.AuthController.GetAll (API) in 27.6888ms
2022-04-30 19:05:25.611 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetAll (API)'
2022-04-30 19:05:25.612 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth - - - 200 - application/json;+charset=utf-8 150.2414ms
2022-04-30 19:05:31.068 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/GetById/1 - -
2022-04-30 19:05:31.081 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:31.086 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:05:31.090 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetById (API)'
2022-04-30 19:05:31.095 +04:00 [INF] Route matched with {action = "GetById", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 19:05:31.105 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__id_0
2022-04-30 19:05:31.109 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.UserEntity'.
2022-04-30 19:05:31.111 +04:00 [INF] Executed action API.Controllers.AuthController.GetById (API) in 14.0404ms
2022-04-30 19:05:31.112 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetById (API)'
2022-04-30 19:05:31.113 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/GetById/1 - - - 200 - application/json;+charset=utf-8 44.6534ms
2022-04-30 19:05:40.695 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 19:05:40.697 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:40.701 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:05:40.704 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 19:05:40.708 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 19:05:45.073 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__id_0
2022-04-30 19:05:45.077 +04:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2022-04-30 19:05:45.078 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 4365.9433ms
2022-04-30 19:05:45.079 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 19:05:45.081 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 204 0 - 4386.1046ms
2022-04-30 19:05:58.354 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0
2022-04-30 19:05:58.356 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:58.360 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:05:58.362 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 19:05:58.366 +04:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller API.Controllers.AuthController (API).
2022-04-30 19:05:58.391 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r0].[Id], [r0].[Created], [r0].[CreatedByIp], [r0].[Expires], [r0].[ReasonRevoked], [r0].[ReplacedByToken], [r0].[Revoked], [r0].[RevokedByIp], [r0].[Token], [r0].[UserEntityId], [r0].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE EXISTS (
        SELECT 1
        FROM [RefreshToken] AS [r]
        WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))
) AS [t]
LEFT JOIN [RefreshToken] AS [r0] ON [t].[Id] = [r0].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 19:05:58.400 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 19:05:58.417 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [RefreshToken] SET [ReasonRevoked] = @p0, [ReplacedByToken] = @p1, [Revoked] = @p2, [RevokedByIp] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-04-30 19:05:58.424 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 19:05:58.428 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 19:05:58.430 +04:00 [INF] Executed action API.Controllers.AuthController.RefreshToken (API) in 59.7398ms
2022-04-30 19:05:58.431 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 19:05:58.432 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0 - 200 - application/json;+charset=utf-8 78.1312ms
2022-04-30 19:06:01.279 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 19:06:01.281 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:06:01.285 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:06:01.293 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 19:06:01.294 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 19:06:05.599 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__id_0
2022-04-30 19:06:05.603 +04:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2022-04-30 19:06:05.604 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 4307.6084ms
2022-04-30 19:06:05.605 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 19:06:05.606 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 204 0 - 4327.4387ms
2022-04-30 19:09:18.855 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 19:09:18.885 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 19:09:18.886 +04:00 [INF] Hosting environment: Development
2022-04-30 19:09:18.888 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 19:09:20.779 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 19:09:21.077 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 303.6305ms
2022-04-30 19:09:21.335 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 19:09:21.344 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 9.1047ms
2022-04-30 19:09:21.557 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 19:09:21.742 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 184.3694ms
2022-04-30 22:03:12.216 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:03:12.237 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:03:12.238 +04:00 [INF] Hosting environment: Development
2022-04-30 22:03:12.239 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:03:13.345 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:03:13.738 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 396.9773ms
2022-04-30 22:03:13.806 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:03:13.811 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.7055ms
2022-04-30 22:03:14.057 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:03:14.164 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 107.0563ms
2022-04-30 22:16:49.047 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:16:49.070 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:16:49.072 +04:00 [INF] Hosting environment: Development
2022-04-30 22:16:49.072 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:16:50.374 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:16:50.649 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 278.4431ms
2022-04-30 22:16:50.764 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:16:50.773 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 9.4283ms
2022-04-30 22:16:51.124 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:16:51.300 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.5167ms
2022-04-30 22:20:43.213 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:20:43.246 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:20:43.247 +04:00 [INF] Hosting environment: Development
2022-04-30 22:20:43.248 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:20:45.185 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:20:45.456 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 274.6658ms
2022-04-30 22:20:45.532 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:20:45.541 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 9.2852ms
2022-04-30 22:20:45.969 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:20:46.097 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 127.5404ms
2022-04-30 22:20:53.714 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 22:20:54.243 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 22:20:54.269 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 22:20:55.301 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 22:20:56.572 +04:00 [INF] Executed DbCommand (55ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 22:20:56.620 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 22:20:56.703 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 22:20:56.870 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 22:20:57.168 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-04-30 22:20:57.175 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 2900.4245ms
2022-04-30 22:20:57.177 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 22:20:57.181 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 200 - text/plain;+charset=utf-8 3467.6178ms
2022-04-30 22:39:21.522 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:39:21.544 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:39:21.545 +04:00 [INF] Hosting environment: Development
2022-04-30 22:39:21.546 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:39:23.620 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:39:23.901 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 284.1643ms
2022-04-30 22:39:23.983 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:39:23.990 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 7.5551ms
2022-04-30 22:39:24.433 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:39:24.561 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 128.3097ms
2022-04-30 22:51:07.631 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:51:07.652 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:51:07.654 +04:00 [INF] Hosting environment: Development
2022-04-30 22:51:07.655 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:51:08.768 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:51:09.048 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 284.6444ms
2022-04-30 22:51:09.105 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:51:09.108 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.8826ms
2022-04-30 22:51:09.428 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:51:09.523 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 95.9165ms
2022-04-30 22:51:27.910 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 207
2022-04-30 22:51:28.085 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 22:51:28.111 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 22:51:29.028 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 22:51:29.718 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 22:51:29.766 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 22:51:29.840 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 22:51:29.998 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 22:51:30.161 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-04-30 22:51:30.168 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 2050.6805ms
2022-04-30 22:51:30.170 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 22:51:30.175 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 207 - 200 - text/plain;+charset=utf-8 2264.6860ms
2022-04-30 23:08:40.193 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 23:08:40.213 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 23:08:40.214 +04:00 [INF] Hosting environment: Development
2022-04-30 23:08:40.214 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 23:08:41.792 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 23:08:42.040 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 253.1982ms
2022-04-30 23:08:42.117 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 23:08:42.123 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 5.4841ms
2022-04-30 23:08:42.579 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 23:08:42.742 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.9994ms
2022-04-30 23:09:15.894 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 23:09:15.918 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 23:09:15.919 +04:00 [INF] Hosting environment: Development
2022-04-30 23:09:15.920 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 23:09:18.371 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 23:09:18.784 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 418.9849ms
2022-04-30 23:09:18.856 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 23:09:18.859 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.5243ms
2022-04-30 23:09:19.369 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 23:09:19.552 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 182.3444ms
2022-04-30 23:09:25.853 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-04-30 23:09:26.024 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:09:26.040 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-04-30 23:09:26.043 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 23:09:26.045 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 23:09:26.051 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 5.6541ms
2022-04-30 23:09:26.056 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:09:26.058 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 401 - application/json;+charset=utf-8 204.9277ms
2022-04-30 23:09:38.169 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 23:09:38.180 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 23:09:38.192 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 23:09:39.196 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:09:40.032 +04:00 [INF] Executed DbCommand (55ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 23:09:40.728 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 23:09:40.868 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 23:09:40.919 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 23:09:40.929 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2734.9654ms
2022-04-30 23:09:40.931 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 23:09:40.935 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2765.3708ms
2022-04-30 23:09:54.625 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-04-30 23:09:54.731 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:09:54.742 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 23:09:54.746 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:09:54.747 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-04-30 23:10:49.756 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] IS NOT NULL
2022-04-30 23:10:59.641 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-04-30 23:10:59.649 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 64897.5676ms
2022-04-30 23:10:59.650 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:10:59.651 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 200 0 - 65026.8860ms
2022-04-30 23:22:16.448 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 23:22:16.482 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 23:22:16.483 +04:00 [INF] Hosting environment: Development
2022-04-30 23:22:16.484 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 23:22:19.282 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 23:22:19.558 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 282.7651ms
2022-04-30 23:22:19.629 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 23:22:19.635 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 5.7604ms
2022-04-30 23:22:19.981 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 23:22:20.165 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 183.6205ms
2022-04-30 23:22:29.598 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 23:22:29.769 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 23:22:29.797 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 23:22:30.763 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:22:31.554 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 23:22:31.873 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 23:22:32.016 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 23:22:32.069 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 23:22:32.084 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2280.6498ms
2022-04-30 23:22:32.086 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 23:22:32.090 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2492.1485ms
2022-04-30 23:22:43.801 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-04-30 23:22:43.912 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:22:43.921 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 23:22:43.925 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:22:43.935 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-04-30 23:22:49.845 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] IS NOT NULL
2022-04-30 23:22:49.883 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-04-30 23:22:49.884 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 5946.6686ms
2022-04-30 23:22:49.886 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:22:49.887 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 200 0 - 6086.0854ms
2022-04-30 23:23:04.576 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-04-30 23:23:04.588 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:23:04.597 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 23:23:04.605 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:23:04.607 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-04-30 23:23:15.950 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] IS NOT NULL
2022-04-30 23:23:55.685 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-04-30 23:23:55.688 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 51079.0215ms
2022-04-30 23:23:55.692 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:23:55.694 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 200 0 - 51117.2477ms
2022-04-30 23:26:09.372 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Authenticate/verify-email/F29F7537D891F1E0827F9068A8CB8061C7BD0AA2C07F56801BF942BD6086FD7B64096CA8177BA044C2728090D1556DD0D7739000FE6CCA188AFB48F9D3822FF8 - -
2022-04-30 23:26:09.378 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Authenticate/verify-email/F29F7537D891F1E0827F9068A8CB8061C7BD0AA2C07F56801BF942BD6086FD7B64096CA8177BA044C2728090D1556DD0D7739000FE6CCA188AFB48F9D3822FF8 - - - 404 0 - 6.1269ms
2022-05-01 00:02:38.114 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 00:02:38.142 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 00:02:38.143 +04:00 [INF] Hosting environment: Development
2022-05-01 00:02:38.143 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 00:02:40.857 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:02:41.244 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 391.9054ms
2022-05-01 00:02:41.409 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:02:41.417 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 7.6312ms
2022-05-01 00:02:42.080 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:02:42.257 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.9676ms
2022-05-01 00:02:49.133 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-05-01 00:02:49.323 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-05-01 00:02:49.345 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-05-01 00:02:49.349 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-05-01 00:02:49.352 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-01 00:02:49.365 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 9.1645ms
2022-05-01 00:02:49.368 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-05-01 00:02:49.371 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 401 - application/json;+charset=utf-8 238.0148ms
2022-05-01 00:02:53.028 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 00:02:53.041 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 00:02:53.057 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 00:02:54.102 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 00:02:54.950 +04:00 [INF] Executed DbCommand (59ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 00:02:55.283 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-01 00:02:55.429 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-01 00:02:55.482 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-01 00:02:55.493 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2433.4252ms
2022-05-01 00:02:55.495 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 00:02:55.499 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2471.1104ms
2022-05-01 00:03:03.530 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-05-01 00:03:03.640 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 00:03:03.655 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-01 00:03:03.662 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-05-01 00:03:03.663 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-05-01 00:03:09.769 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] IS NOT NULL
2022-05-01 00:03:09.812 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-05-01 00:03:09.820 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 6152.9192ms
2022-05-01 00:03:09.821 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-05-01 00:03:09.822 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 200 0 - 6292.5017ms
2022-05-01 00:10:48.734 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 00:10:49.048 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-01 00:10:49.080 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-01 00:10:49.083 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-01 00:10:49.083 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-01 00:10:49.104 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-01 00:10:49.118 +04:00 [INF] No migrations were applied. The database is already up to date.
2022-05-01 00:18:52.865 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 00:18:53.175 +04:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-01 00:18:53.206 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-01 00:18:53.210 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-01 00:18:53.210 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-01 00:18:53.232 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-01 00:18:53.245 +04:00 [INF] No migrations were applied. The database is already up to date.
2022-05-01 00:55:26.194 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 00:55:26.213 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 00:55:26.214 +04:00 [INF] Hosting environment: Development
2022-05-01 00:55:26.215 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 00:55:26.607 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:55:26.827 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 225.9279ms
2022-05-01 00:55:26.891 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:55:26.893 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.3248ms
2022-05-01 00:55:27.159 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:55:27.270 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.7674ms
2022-05-01 00:56:31.467 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:56:31.475 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 8.4838ms
2022-05-01 00:56:31.506 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:56:31.508 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.1067ms
2022-05-01 00:56:31.841 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:56:31.843 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/favicon-32x32.png - -
2022-05-01 00:56:31.846 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 4.9849ms
2022-05-01 00:56:31.856 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-05-01 00:56:31.857 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/favicon-32x32.png - - - 200 628 image/png 14.2472ms
2022-05-01 00:57:19.426 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 00:57:19.455 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 00:57:19.457 +04:00 [INF] Hosting environment: Development
2022-05-01 00:57:19.457 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 00:57:21.092 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:57:21.379 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 294.3392ms
2022-05-01 00:57:21.447 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:57:21.451 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.0894ms
2022-05-01 00:57:21.736 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:57:21.864 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 127.3488ms
2022-05-01 00:59:04.304 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 00:59:04.329 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 00:59:04.330 +04:00 [INF] Hosting environment: Development
2022-05-01 00:59:04.331 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 00:59:05.951 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:59:06.233 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 286.7677ms
2022-05-01 00:59:06.290 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:59:06.292 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.5362ms
2022-05-01 00:59:06.633 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:59:06.748 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 115.1709ms
2022-05-01 01:01:03.704 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 01:01:03.728 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 01:01:03.730 +04:00 [INF] Hosting environment: Development
2022-05-01 01:01:03.731 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 01:01:05.708 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 01:01:06.115 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 420.2897ms
2022-05-01 01:01:06.204 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 01:01:06.207 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.0942ms
2022-05-01 01:01:06.571 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 01:01:06.695 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 123.5393ms
2022-05-01 01:15:28.012 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 01:15:28.039 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 01:15:28.040 +04:00 [INF] Hosting environment: Development
2022-05-01 01:15:28.041 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 01:15:33.348 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 01:15:33.630 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 287.1212ms
2022-05-01 01:15:33.688 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 01:15:33.692 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.9379ms
2022-05-01 01:15:33.978 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 01:15:34.090 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 112.3647ms
2022-05-01 14:58:23.890 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 14:58:23.912 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 14:58:23.913 +04:00 [INF] Hosting environment: Development
2022-05-01 14:58:23.914 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 14:58:25.350 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 14:58:25.699 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 353.5103ms
2022-05-01 14:58:25.752 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 14:58:25.756 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.3568ms
2022-05-01 14:58:26.007 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 14:58:26.101 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 94.8334ms
2022-05-01 14:59:17.465 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 14:59:17.487 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 14:59:17.488 +04:00 [INF] Hosting environment: Development
2022-05-01 14:59:17.489 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 14:59:19.472 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 14:59:19.709 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 239.7966ms
2022-05-01 14:59:19.784 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 14:59:19.788 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.7399ms
2022-05-01 14:59:20.126 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 14:59:20.222 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 95.8095ms
2022-05-01 15:43:04.688 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 15:43:05.826 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 15:43:21.125 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 15:43:21.126 +04:00 [INF] Hosting environment: Development
2022-05-01 15:43:21.127 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 15:43:21.326 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 15502.2868ms
2022-05-01 15:43:21.378 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 15:43:21.380 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.2761ms
2022-05-01 15:43:21.641 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 15:43:21.732 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.9179ms
2022-05-01 15:44:10.520 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 15:44:10.928 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 15:44:10.959 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 15:44:11.885 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 15:44:12.949 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 15:44:13.600 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-01 15:44:13.735 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-01 15:44:13.786 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-01 15:44:13.800 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2836.1124ms
2022-05-01 15:44:13.802 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 15:44:13.806 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 3286.5645ms
2022-05-01 19:23:49.482 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 19:23:49.505 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 19:23:49.506 +04:00 [INF] Hosting environment: Development
2022-05-01 19:23:49.507 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 19:23:50.436 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 19:23:50.772 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 341.2215ms
2022-05-01 19:23:50.829 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 19:23:50.832 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.4055ms
2022-05-01 19:23:51.162 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 19:23:51.284 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 122.2328ms
2022-05-01 23:16:24.221 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 23:16:24.244 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 23:16:24.244 +04:00 [INF] Hosting environment: Development
2022-05-01 23:16:24.245 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 23:16:26.542 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 23:16:26.782 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 246.0807ms
2022-05-01 23:16:26.838 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 23:16:26.840 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.5459ms
2022-05-01 23:16:27.108 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 23:16:27.236 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 127.3354ms
2022-05-01 23:16:30.391 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 23:16:30.560 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:16:30.585 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 23:16:31.658 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:16:32.453 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 23:16:32.700 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2106.2019ms
2022-05-01 23:16:32.706 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:16:33.218 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 400 - application/json 2826.5767ms
2022-05-01 23:21:10.554 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 23:21:10.579 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 23:21:10.580 +04:00 [INF] Hosting environment: Development
2022-05-01 23:21:10.580 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 23:21:12.027 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 23:21:12.284 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 260.5004ms
2022-05-01 23:21:12.337 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 23:21:12.341 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.6628ms
2022-05-01 23:21:12.641 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 23:21:12.767 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 126.7504ms
2022-05-01 23:21:20.600 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 23:21:20.817 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:21:20.845 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 23:21:21.746 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:21:22.510 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 23:21:22.732 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 1880.8605ms
2022-05-01 23:21:22.734 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:21:22.982 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 400 - application/json 2382.2827ms
2022-05-01 23:22:15.368 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 23:22:15.389 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 23:22:15.391 +04:00 [INF] Hosting environment: Development
2022-05-01 23:22:15.392 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 23:22:16.853 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 23:22:17.087 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 236.8308ms
2022-05-01 23:22:17.140 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 23:22:17.143 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.3963ms
2022-05-01 23:22:17.393 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 23:22:17.510 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.0193ms
2022-05-01 23:22:23.757 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 23:22:23.921 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:22:23.948 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 23:22:25.292 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:22:26.068 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 23:22:26.387 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-01 23:22:26.550 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-01 23:22:26.611 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-01 23:22:26.623 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2668.3485ms
2022-05-01 23:22:26.625 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:22:26.633 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2875.2762ms
2022-05-01 23:22:49.335 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string2&newRole=1 - 0
2022-05-01 23:22:49.448 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:22:49.457 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-01 23:22:49.467 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-01 23:22:49.472 +04:00 [INF] Route matched with {action = "ChangeUserRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeUserRole(Infrastructure.Entities.User.Dto.RoleChangeDto) on controller API.Controllers.AdminController (API).
2022-05-01 23:22:49.478 +04:00 [INF] Executed action API.Controllers.AdminController.ChangeUserRole (API) in 2.4749ms
2022-05-01 23:22:49.480 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-01 23:22:49.657 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string2&newRole=1 - 0 - 500 - application/json 322.2387ms
2022-05-01 23:26:38.122 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 23:26:38.145 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 23:26:38.146 +04:00 [INF] Hosting environment: Development
2022-05-01 23:26:38.147 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 23:26:39.193 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 23:26:39.439 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 251.5757ms
2022-05-01 23:26:39.508 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 23:26:39.512 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.5433ms
2022-05-01 23:26:39.774 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 23:26:39.970 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 196.0435ms
2022-05-01 23:26:44.492 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 23:26:44.669 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:26:44.697 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 23:26:45.663 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:26:46.432 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 23:26:46.742 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-01 23:26:46.881 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-01 23:26:46.929 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-01 23:26:46.940 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2237.3851ms
2022-05-01 23:26:46.942 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:26:46.948 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2455.2800ms
2022-05-01 23:27:05.327 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string2&newRole=1 - 0
2022-05-01 23:27:05.436 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:27:05.446 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-01 23:27:05.453 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-01 23:27:05.460 +04:00 [INF] Route matched with {action = "ChangeUserRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeUserRole(Infrastructure.Entities.User.Dto.RoleChangeDto) on controller API.Controllers.AdminController (API).
2022-05-01 23:27:05.481 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[UserName] = @__model_UserName_0
2022-05-01 23:27:05.493 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [dbo].[User] SET [Role] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-05-01 23:27:05.504 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2022-05-01 23:27:05.506 +04:00 [INF] Executed action API.Controllers.AdminController.ChangeUserRole (API) in 43.2393ms
2022-05-01 23:27:05.507 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-01 23:27:05.509 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string2&newRole=1 - 0 - 200 - application/json;+charset=utf-8 181.3862ms
2022-05-02 00:08:21.978 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-02 00:08:22.248 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-02 00:08:22.251 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-02 00:08:22.252 +04:00 [INF] Hosting environment: Development
2022-05-02 00:08:22.253 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-02 00:08:23.271 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-02 00:08:23.515 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 248.7083ms
2022-05-02 00:08:23.570 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-02 00:08:23.573 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6636ms
2022-05-02 00:08:23.837 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-02 00:08:23.951 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 113.8521ms
2022-05-02 00:08:55.608 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-02 00:08:55.864 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-02 00:08:55.868 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-02 00:08:55.869 +04:00 [INF] Hosting environment: Development
2022-05-02 00:08:55.869 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-02 00:08:57.229 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-02 00:08:57.506 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 279.9599ms
2022-05-02 00:08:57.575 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-02 00:08:57.578 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.7533ms
2022-05-02 00:08:57.830 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-02 00:08:57.993 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.1475ms
2022-05-02 13:40:05.746 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-02 13:40:06.331 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-02 13:40:06.336 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-02 13:40:06.337 +04:00 [INF] Hosting environment: Development
2022-05-02 13:40:06.337 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-02 13:40:07.192 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-02 13:40:07.716 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 528.2398ms
2022-05-02 13:40:07.787 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-02 13:40:07.790 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6655ms
2022-05-02 13:40:07.940 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-02 13:40:08.048 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 108.6514ms
