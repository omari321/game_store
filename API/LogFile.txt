2022-05-16 01:27:18.469 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:27:27.287 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:27:27.570 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:27:27.597 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:27:27.601 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:27:27.601 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:27:27.615 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-16 01:27:27.629 +04:00 [INF] Applying migration '20220515212718_test6'.
2022-05-16 01:27:27.687 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-16T01:27:18.5263064+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:27:27.688 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-16T01:27:18.5263079+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:27:27.689 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-16T01:27:18.5263365+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:27:27.689 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-16T01:27:18.5263367+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:27:27.692 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'Swxl4FUa9lhg5wlCoAjN4P34S8BFcZzj+G1Czc9gMNw=', [Salt] = N'jzDAoO4u0L0DDxCLpK4wlA==', [Verified] = '2022-05-16T01:27:18.5435583+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:27:27.693 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220515212718_test6', N'6.0.3');
2022-05-16 01:28:34.218 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 01:28:34.301 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 01:28:34.379 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 01:28:34.379 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 01:28:34.380 +04:00 [INF] Hosting environment: Development
2022-05-16 01:28:34.380 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 01:28:35.284 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 01:28:35.483 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 201.8630ms
2022-05-16 01:28:35.497 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 01:28:35.501 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.4682ms
2022-05-16 01:28:35.607 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 01:28:35.736 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 128.3681ms
2022-05-16 01:28:40.204 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-16 01:28:40.491 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 01:28:40.520 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-16 01:28:41.343 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:28:42.117 +04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[MailSent], [t].[Password], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-16 01:28:42.735 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:28:42.892 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:28:42.943 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-16 01:28:42.955 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2429.5928ms
2022-05-16 01:28:42.957 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 01:28:42.962 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2759.0883ms
2022-05-16 01:29:04.944 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Publisher/AddPublisher application/json 30
2022-05-16 01:29:05.063 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:29:05.073 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:29:05.077 +04:00 [INF] Executing endpoint 'API.Controllers.PublisherController.AddPublisher (API)'
2022-05-16 01:29:05.081 +04:00 [INF] Route matched with {action = "AddPublisher", controller = "Publisher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPublisher(Infrastructure.Entities.Publisher.Dto.AddPublisherDto) on controller API.Controllers.PublisherController (API).
2022-05-16 01:29:05.093 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_PublisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Publisher] AS [p]
        WHERE [p].[PublisherName] = @__model_PublisherName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:29:05.130 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Publisher] ([DateCreated], [DateUpdated], [PublisherName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Publisher]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:29:05.137 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:29:05.139 +04:00 [INF] Executed action API.Controllers.PublisherController.AddPublisher (API) in 55.9724ms
2022-05-16 01:29:05.141 +04:00 [INF] Executed endpoint 'API.Controllers.PublisherController.AddPublisher (API)'
2022-05-16 01:29:05.142 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Publisher/AddPublisher application/json 30 - 200 - application/json;+charset=utf-8 197.8152ms
2022-05-16 01:29:24.247 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Videogame/AddGame multipart/form-data;+boundary=----WebKitFormBoundarygvaHUPriQ32LqVpM 123807
2022-05-16 01:29:24.260 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:29:24.269 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:29:24.274 +04:00 [INF] Executing endpoint 'API.Controllers.VideogameController.AddGame (API)'
2022-05-16 01:29:24.280 +04:00 [INF] Route matched with {action = "AddGame", controller = "Videogame"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.VideogameController (API).
2022-05-16 01:29:24.337 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:29:24.404 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 2000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = Int32), @p7='?' (Size = 100), @p8='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Videogame] ([DateCreated], [DateUpdated], [Description], [DownloadFileUrl], [OldPrice], [Price], [PublicsherId], [ThumbnailUrl], [VideogameName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [dbo].[Videogame]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:29:24.411 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:29:24.413 +04:00 [INF] Executed action API.Controllers.VideogameController.AddGame (API) in 130.3083ms
2022-05-16 01:29:24.414 +04:00 [INF] Executed endpoint 'API.Controllers.VideogameController.AddGame (API)'
2022-05-16 01:29:24.416 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Videogame/AddGame multipart/form-data;+boundary=----WebKitFormBoundarygvaHUPriQ32LqVpM 123807 - 200 - application/json;+charset=utf-8 169.1039ms
2022-05-16 01:29:24.498 +04:00 [INF] Book found! Starting to process ..
2022-05-16 01:29:24.696 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:29:24.708 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM [dbo].[Videogame] AS [v]
WHERE [v].[Id] = @__model_VideogameId_0
2022-05-16 01:29:24.720 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [dbo].[Videogame] SET [ThumbnailUrl] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-05-16 01:31:02.192 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Category/AddCategory application/json 30
2022-05-16 01:31:02.197 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:31:02.201 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:31:02.204 +04:00 [INF] Executing endpoint 'API.Controllers.CategoryController.AddCategory (API)'
2022-05-16 01:31:02.207 +04:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCategory(Infrastructure.Entities.Categories.Dtos.CreateCategoryDto) on controller API.Controllers.CategoryController (API).
2022-05-16 01:31:02.217 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Category] AS [c]
        WHERE [c].[CategoryName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:31:02.232 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Category] ([CategoryName], [DateCreated], [DateUpdated])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Category]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:31:02.236 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:31:02.238 +04:00 [INF] Executed action API.Controllers.CategoryController.AddCategory (API) in 28.4839ms
2022-05-16 01:31:02.239 +04:00 [INF] Executed endpoint 'API.Controllers.CategoryController.AddCategory (API)'
2022-05-16 01:31:02.241 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Category/AddCategory application/json 30 - 200 - application/json;+charset=utf-8 48.6643ms
2022-05-16 01:31:32.578 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Category/AddGameCategory application/json 41
2022-05-16 01:31:32.584 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:31:32.589 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:31:32.592 +04:00 [INF] Executing endpoint 'API.Controllers.CategoryController.AddGameCategory (API)'
2022-05-16 01:31:32.595 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.CategoryController (API).
2022-05-16 01:31:32.607 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[VideogameCategory] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:31:32.625 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[VideogameCategory] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated])
VALUES (@p0, @p1, @p2, @p3);
2022-05-16 01:31:32.628 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:31:32.629 +04:00 [INF] Executed action API.Controllers.CategoryController.AddGameCategory (API) in 31.9787ms
2022-05-16 01:31:32.630 +04:00 [INF] Executed endpoint 'API.Controllers.CategoryController.AddGameCategory (API)'
2022-05-16 01:31:32.631 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Category/AddGameCategory application/json 41 - 200 - application/json;+charset=utf-8 53.6747ms
2022-05-16 01:32:06.905 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0
2022-05-16 01:32:06.907 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:32:06.910 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:32:06.913 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:32:06.917 +04:00 [INF] Route matched with {action = "AddGameForUser", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameForUser(Int32, Int32) on controller API.Controllers.AdminController (API).
2022-05-16 01:32:06.930 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[Id] = @__gameId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:32:06.964 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[OwnedGames] ([DateCreated], [DateUpdated], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [dbo].[OwnedGames]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:32:06.974 +04:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Double), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[TransactionsEntity] ([DateCreated], [DateUpdated], [MoneyAmount], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [dbo].[TransactionsEntity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:32:07.009 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.TransactionsEntity'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78c1731c-86e3-4872-abc1-c2bbf491437c
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.TransactionsEntity'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78c1731c-86e3-4872-abc1-c2bbf491437c
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-16 01:32:07.193 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameForUser (API) in 273.2005ms
2022-05-16 01:32:07.194 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:32:07.441 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0 - 500 - application/json 535.9768ms
2022-05-16 01:32:28.334 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0
2022-05-16 01:32:28.341 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:32:28.346 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:32:28.353 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:32:28.354 +04:00 [INF] Route matched with {action = "AddGameForUser", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameForUser(Int32, Int32) on controller API.Controllers.AdminController (API).
2022-05-16 01:32:37.431 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[Id] = @__gameId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:32:47.399 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[OwnedGames] ([DateCreated], [DateUpdated], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [dbo].[OwnedGames]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:32:47.405 +04:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Double), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[TransactionsEntity] ([DateCreated], [DateUpdated], [MoneyAmount], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [dbo].[TransactionsEntity]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:32:47.411 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.TransactionsEntity'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78c1731c-86e3-4872-abc1-c2bbf491437c
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.TransactionsEntity'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:78c1731c-86e3-4872-abc1-c2bbf491437c
Error Number:208,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-16 01:32:47.744 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameForUser (API) in 19388.9511ms
2022-05-16 01:32:47.745 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:33:45.899 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:33:54.389 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:33:54.667 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:33:54.694 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:33:54.697 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:33:54.697 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:33:54.711 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-16 01:33:54.725 +04:00 [INF] Applying migration '20220515213346_test7'.
2022-05-16 01:33:54.789 +04:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[TransactionsEntity] DROP CONSTRAINT [FK_TransactionsEntity_User_UserId];
2022-05-16 01:35:12.598 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:35:13.320 +04:00 [INF] Executed DbCommand (326ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-05-16 01:35:13.382 +04:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-05-16 01:35:13.396 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:35:13.480 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-05-16 01:35:13.482 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:35:13.501 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:35:13.505 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-16 01:35:13.519 +04:00 [INF] Applying migration '20220505014704_first'.
2022-05-16 01:35:13.580 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Category] (
    [Id] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(max) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Category] PRIMARY KEY ([Id])
);
2022-05-16 01:35:13.581 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-05-16 01:35:13.582 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-05-16 01:35:13.583 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Publisher] (
    [Id] int NOT NULL IDENTITY,
    [PublisherName] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Publisher] PRIMARY KEY ([Id])
);
2022-05-16 01:35:13.584 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:35:13.585 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Videogame] (
    [Id] int NOT NULL IDENTITY,
    [VideogameName] nvarchar(128) NOT NULL,
    [Price] float NOT NULL,
    [OldPrice] float NULL,
    [PublicsherId] int NOT NULL,
    [Description] nvarchar(2000) NOT NULL,
    [PlatformId] int NOT NULL,
    [ImageUrl] nvarchar(100) NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Videogame] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videogame_Publisher_PublicsherId] FOREIGN KEY ([PublicsherId]) REFERENCES [dbo].[Publisher] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:35:13.586 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-05-16 01:35:13.588 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[VideogameCategory] (
    [VideogameId] int NOT NULL,
    [CategoryId] int NOT NULL,
    [GameId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_VideogameCategory] PRIMARY KEY ([VideogameId], [CategoryId]),
    CONSTRAINT [FK_VideogameCategory_Category_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [dbo].[Category] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_VideogameCategory_Videogame_GameId] FOREIGN KEY ([GameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:35:13.888 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-05-16 01:35:13.905 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-05-05T05:47:04.2624490+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-05-16 01:35:13.913 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-05-05T05:47:04.2624492+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-05-16 01:35:13.922 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-05-05T05:47:04.2624285+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-05-16 01:35:13.929 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-05-05T05:47:04.2624295+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-05-16 01:35:13.940 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] ON;
INSERT INTO [dbo].[User] ([Id], [Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (1, N'admin', 1, '0001-01-01T00:00:00.0000000', NULL, N'O_pirtskhalaishvili@cu.edu.ge', N'admin', N'admin', N'3PtISEJDqaOI1xgzGHYzpkGCbshwLgq7K0Y/0gPObsU=', NULL, 1, N'mT/0MRWlzYAGTlz4Me+mzw==', N'551001100', 'string', NULL, '2022-05-05T05:47:04.2771303+04:00');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] OFF;
2022-05-16 01:35:15.284 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-05-16 01:35:15.284 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-05-16 01:35:15.286 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-05-16 01:35:15.287 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-05-16 01:35:15.287 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Videogame_PublicsherId] ON [dbo].[Videogame] ([PublicsherId]);
2022-05-16 01:35:15.288 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VideogameCategory_CategoryId] ON [dbo].[VideogameCategory] ([CategoryId]);
2022-05-16 01:35:15.288 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VideogameCategory_GameId] ON [dbo].[VideogameCategory] ([GameId]);
2022-05-16 01:35:15.289 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220505014704_first', N'6.0.3');
2022-05-16 01:35:15.294 +04:00 [INF] Applying migration '20220505185326_test2'.
2022-05-16 01:35:15.316 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[VideogameCategory] DROP CONSTRAINT [FK_VideogameCategory_Videogame_GameId];
2022-05-16 01:35:15.317 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_VideogameCategory_GameId] ON [dbo].[VideogameCategory];
2022-05-16 01:35:15.339 +04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[dbo].[VideogameCategory]') AND [c].[name] = N'GameId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [dbo].[VideogameCategory] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [dbo].[VideogameCategory] DROP COLUMN [GameId];
2022-05-16 01:35:15.341 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-05T22:53:25.8892800+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:15.341 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-05T22:53:25.8892812+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:15.342 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-05T22:53:25.8892982+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:15.342 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-05T22:53:25.8892984+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:15.992 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'VKyRBHt9qXbYVjS8mGcDiYkB/6ALNPiXiOB58jDJdl0=', [Salt] = N'XkeKegH7vYyxrY1ux+u2sQ==', [Verified] = '2022-05-05T22:53:25.9037764+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:15.993 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[VideogameCategory] ADD CONSTRAINT [FK_VideogameCategory_Videogame_VideogameId] FOREIGN KEY ([VideogameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE;
2022-05-16 01:35:15.993 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220505185326_test2', N'6.0.3');
2022-05-16 01:35:15.994 +04:00 [INF] Applying migration '20220512011044_longtimenoSee'.
2022-05-16 01:35:16.023 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[dbo].[Videogame]') AND [c].[name] = N'PlatformId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [dbo].[Videogame] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [dbo].[Videogame] DROP COLUMN [PlatformId];
2022-05-16 01:35:16.144 +04:00 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[dbo].[Videogame].[ImageUrl]', N'ThumbnailUrl', N'COLUMN';
2022-05-16 01:35:16.145 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[Videogame] ADD [DownloadFileUrl] nvarchar(max) NULL;
2022-05-16 01:35:16.146 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[OwnedGames] (
    [Id] int NOT NULL IDENTITY,
    [VideogameId] int NOT NULL,
    [UserId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_OwnedGames] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OwnedGames_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[User] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_OwnedGames_Videogame_VideogameId] FOREIGN KEY ([VideogameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:35:16.147 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentCreditentials] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [UserId] int NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [UserEntityId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentCreditentials] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PaymentCreditentials_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-05-16 01:35:16.148 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Transactions] (
    [Id] int NOT NULL IDENTITY,
    [VideogameId] int NOT NULL,
    [UserId] int NOT NULL,
    [PayedAmount] float NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[User] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Videogame_VideogameId] FOREIGN KEY ([VideogameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:35:16.149 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[VideogameImages] (
    [Id] int NOT NULL IDENTITY,
    [VideogameId] int NOT NULL,
    [ImageUrl] nvarchar(max) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_VideogameImages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_VideogameImages_Videogame_VideogameId] FOREIGN KEY ([VideogameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:35:16.741 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-12T05:10:43.6075292+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.742 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-12T05:10:43.6075306+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.742 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-12T05:10:43.6075513+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.742 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-12T05:10:43.6075514+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.744 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'SasID+4Izl12BnH710fbEoQ/xJxU45JnMtg+Y9KaPBE=', [Salt] = N'LQWDkig25xGtqw2tKj7Cng==', [Verified] = '2022-05-12T05:10:43.6226305+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.744 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OwnedGames_UserId] ON [dbo].[OwnedGames] ([UserId]);
2022-05-16 01:35:16.745 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OwnedGames_VideogameId] ON [dbo].[OwnedGames] ([VideogameId]);
2022-05-16 01:35:16.745 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PaymentCreditentials_UserEntityId] ON [dbo].[PaymentCreditentials] ([UserEntityId]);
2022-05-16 01:35:16.746 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [dbo].[Transactions] ([UserId]);
2022-05-16 01:35:16.746 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_VideogameId] ON [dbo].[Transactions] ([VideogameId]);
2022-05-16 01:35:16.747 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VideogameImages_VideogameId] ON [dbo].[VideogameImages] ([VideogameId]);
2022-05-16 01:35:16.747 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220512011044_longtimenoSee', N'6.0.3');
2022-05-16 01:35:16.748 +04:00 [INF] Applying migration '20220512173501_test3'.
2022-05-16 01:35:16.760 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-12T21:35:01.2466319+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.760 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-12T21:35:01.2466328+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.760 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-12T21:35:01.2466543+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.761 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-12T21:35:01.2466545+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.761 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'e2FcKkUxmCNDwZ+VdoRkbL0v1ae4q9S+LkH59o+80LE=', [Salt] = N'iLROhq0dPwQl569lm9szTQ==', [Verified] = '2022-05-12T21:35:01.2621668+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:16.761 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220512173501_test3', N'6.0.3');
2022-05-16 01:35:18.213 +04:00 [INF] Applying migration '20220512190614_test4'.
2022-05-16 01:35:18.226 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[User] ADD [MailSent] datetime2 NULL;
2022-05-16 01:35:18.226 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-12T23:06:13.9137391+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.226 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-12T23:06:13.9137403+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.227 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-12T23:06:13.9137734+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.227 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-12T23:06:13.9137737+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.228 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'T5/m3SNLrZYW2V4XXE7/1O45oVHKRSCduGOG7ThKlqQ=', [Salt] = N'pDzC/S+MlJ5bKZwI9+PqGg==', [Verified] = '2022-05-12T23:06:13.9299515+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.229 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220512190614_test4', N'6.0.3');
2022-05-16 01:35:18.229 +04:00 [INF] Applying migration '20220513003905_test5'.
2022-05-16 01:35:18.241 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-13T04:39:05.3649391+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.241 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-13T04:39:05.3649401+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.242 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-13T04:39:05.3649591+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.242 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-13T04:39:05.3649593+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.242 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'w64WeP4KxriUBxQJIbCl1V1U10PdKvobXXUNkj/8ZTs=', [Salt] = N'Gyg5UOAeWdsD3myAupeBvA==', [Verified] = '2022-05-13T04:39:05.3796529+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.242 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220513003905_test5', N'6.0.3');
2022-05-16 01:35:18.243 +04:00 [INF] Applying migration '20220515212718_test6'.
2022-05-16 01:35:18.254 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-16T01:27:18.5263064+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.254 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-16T01:27:18.5263079+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.254 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-16T01:27:18.5263365+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.255 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-16T01:27:18.5263367+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:35:18.255 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'Swxl4FUa9lhg5wlCoAjN4P34S8BFcZzj+G1Czc9gMNw=', [Salt] = N'jzDAoO4u0L0DDxCLpK4wlA==', [Verified] = '2022-05-16T01:27:18.5435583+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:35:20.261 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220515212718_test6', N'6.0.3');
2022-05-16 01:35:20.261 +04:00 [INF] Applying migration '20220515213346_test7'.
2022-05-16 01:35:20.276 +04:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[TransactionsEntity] DROP CONSTRAINT [FK_TransactionsEntity_User_UserId];
2022-05-16 01:36:09.441 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:36:16.584 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:36:16.884 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:36:16.913 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:36:16.916 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:36:16.917 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:36:16.933 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-16 01:36:16.947 +04:00 [INF] Applying migration '20220515213609_test6'.
2022-05-16 01:36:17.007 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-16T01:36:09.4937592+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:36:17.008 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-16T01:36:09.4937602+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:36:17.009 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-16T01:36:09.4937814+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:36:17.010 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-16T01:36:09.4937816+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 01:36:17.012 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'wa8uLjNKu1KPg/1ScTMoC8kZ0bcSRq5ytEJxoO2HxTM=', [Salt] = N'Ia6ts1MpC+l6H222DkXwEg==', [Verified] = '2022-05-16T01:36:09.5083574+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 01:36:17.013 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220515213609_test6', N'6.0.3');
2022-05-16 01:37:08.152 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 01:37:08.248 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 01:37:08.344 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 01:37:08.345 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 01:37:08.346 +04:00 [INF] Hosting environment: Development
2022-05-16 01:37:08.347 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 01:37:09.739 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 01:37:10.069 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 336.6240ms
2022-05-16 01:37:10.084 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 01:37:10.089 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.2297ms
2022-05-16 01:37:10.332 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 01:37:10.450 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.6118ms
2022-05-16 01:37:15.472 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-16 01:37:15.739 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 01:37:15.763 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-16 01:37:16.560 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:37:17.290 +04:00 [INF] Executed DbCommand (58ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[MailSent], [t].[Password], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-16 01:37:17.577 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:37:17.730 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:37:17.777 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-16 01:37:17.788 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2020.1855ms
2022-05-16 01:37:17.791 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 01:37:17.795 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2323.0575ms
2022-05-16 01:37:35.344 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Publisher/AddPublisher application/json 30
2022-05-16 01:37:35.457 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:37:35.467 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:37:35.471 +04:00 [INF] Executing endpoint 'API.Controllers.PublisherController.AddPublisher (API)'
2022-05-16 01:37:35.474 +04:00 [INF] Route matched with {action = "AddPublisher", controller = "Publisher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPublisher(Infrastructure.Entities.Publisher.Dto.AddPublisherDto) on controller API.Controllers.PublisherController (API).
2022-05-16 01:37:35.489 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_PublisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Publisher] AS [p]
        WHERE [p].[PublisherName] = @__model_PublisherName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:37:35.521 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Publisher] ([DateCreated], [DateUpdated], [PublisherName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Publisher]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:37:35.528 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:37:35.530 +04:00 [INF] Executed action API.Controllers.PublisherController.AddPublisher (API) in 54.3486ms
2022-05-16 01:37:35.532 +04:00 [INF] Executed endpoint 'API.Controllers.PublisherController.AddPublisher (API)'
2022-05-16 01:37:35.533 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Publisher/AddPublisher application/json 30 - 200 - application/json;+charset=utf-8 188.9578ms
2022-05-16 01:37:58.069 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Videogame/AddGame multipart/form-data;+boundary=----WebKitFormBoundaryBRM2RGgWwy1e4zCZ 123807
2022-05-16 01:37:58.082 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:37:58.089 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:37:58.095 +04:00 [INF] Executing endpoint 'API.Controllers.VideogameController.AddGame (API)'
2022-05-16 01:37:58.101 +04:00 [INF] Route matched with {action = "AddGame", controller = "Videogame"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.VideogameController (API).
2022-05-16 01:37:58.141 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:37:58.194 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 2000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = Int32), @p7='?' (Size = 100), @p8='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Videogame] ([DateCreated], [DateUpdated], [Description], [DownloadFileUrl], [OldPrice], [Price], [PublicsherId], [ThumbnailUrl], [VideogameName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [dbo].[Videogame]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:37:58.201 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:37:58.203 +04:00 [INF] Executed action API.Controllers.VideogameController.AddGame (API) in 100.3231ms
2022-05-16 01:37:58.204 +04:00 [INF] Executed endpoint 'API.Controllers.VideogameController.AddGame (API)'
2022-05-16 01:37:58.207 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Videogame/AddGame multipart/form-data;+boundary=----WebKitFormBoundaryBRM2RGgWwy1e4zCZ 123807 - 200 - application/json;+charset=utf-8 138.0517ms
2022-05-16 01:37:58.405 +04:00 [INF] Book found! Starting to process ..
2022-05-16 01:37:58.467 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:37:58.477 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM [dbo].[Videogame] AS [v]
WHERE [v].[Id] = @__model_VideogameId_0
2022-05-16 01:37:58.487 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [dbo].[Videogame] SET [ThumbnailUrl] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-05-16 01:38:06.518 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Category/AddCategory application/json 30
2022-05-16 01:38:06.520 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:38:06.524 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:38:06.527 +04:00 [INF] Executing endpoint 'API.Controllers.CategoryController.AddCategory (API)'
2022-05-16 01:38:06.531 +04:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCategory(Infrastructure.Entities.Categories.Dtos.CreateCategoryDto) on controller API.Controllers.CategoryController (API).
2022-05-16 01:38:06.540 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Category] AS [c]
        WHERE [c].[CategoryName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:38:06.555 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Category] ([CategoryName], [DateCreated], [DateUpdated])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Category]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:38:06.559 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:38:06.560 +04:00 [INF] Executed action API.Controllers.CategoryController.AddCategory (API) in 27.849ms
2022-05-16 01:38:06.562 +04:00 [INF] Executed endpoint 'API.Controllers.CategoryController.AddCategory (API)'
2022-05-16 01:38:06.563 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Category/AddCategory application/json 30 - 200 - application/json;+charset=utf-8 45.0630ms
2022-05-16 01:38:15.871 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Category/AddGameCategory application/json 41
2022-05-16 01:38:15.875 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:38:15.879 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:38:15.881 +04:00 [INF] Executing endpoint 'API.Controllers.CategoryController.AddGameCategory (API)'
2022-05-16 01:38:15.885 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.CategoryController (API).
2022-05-16 01:38:15.898 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[VideogameCategory] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:38:15.917 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[VideogameCategory] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated])
VALUES (@p0, @p1, @p2, @p3);
2022-05-16 01:38:15.920 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:38:15.922 +04:00 [INF] Executed action API.Controllers.CategoryController.AddGameCategory (API) in 35.0935ms
2022-05-16 01:38:15.923 +04:00 [INF] Executed endpoint 'API.Controllers.CategoryController.AddGameCategory (API)'
2022-05-16 01:38:15.924 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Category/AddGameCategory application/json 41 - 200 - application/json;+charset=utf-8 53.0775ms
2022-05-16 01:38:22.009 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0
2022-05-16 01:38:22.010 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:38:22.013 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:38:22.021 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:38:22.024 +04:00 [INF] Route matched with {action = "AddGameForUser", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameForUser(Int32, Int32) on controller API.Controllers.AdminController (API).
2022-05-16 01:38:23.986 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[Id] = @__gameId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:38:24.018 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[OwnedGames] ([DateCreated], [DateUpdated], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [dbo].[OwnedGames]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:38:24.029 +04:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Double), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Transactions] ([DateCreated], [DateUpdated], [MoneyAmount], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [dbo].[Transactions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:38:24.063 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoneyAmount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f0811183-f22e-43fc-9c4f-22acc0884035
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoneyAmount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f0811183-f22e-43fc-9c4f-22acc0884035
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-16 01:38:24.210 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameForUser (API) in 2183.9893ms
2022-05-16 01:38:24.212 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:38:24.440 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0 - 500 - application/json 2431.4660ms
2022-05-16 01:38:33.544 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0
2022-05-16 01:38:33.549 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:38:33.552 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:38:33.556 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:38:33.557 +04:00 [INF] Route matched with {action = "AddGameForUser", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameForUser(Int32, Int32) on controller API.Controllers.AdminController (API).
2022-05-16 01:38:35.737 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[Id] = @__gameId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:38:38.169 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[OwnedGames] ([DateCreated], [DateUpdated], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [dbo].[OwnedGames]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:38:38.189 +04:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Double), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Transactions] ([DateCreated], [DateUpdated], [MoneyAmount], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [dbo].[Transactions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:38:38.194 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoneyAmount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f0811183-f22e-43fc-9c4f-22acc0884035
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoneyAmount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f0811183-f22e-43fc-9c4f-22acc0884035
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-16 01:38:38.357 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameForUser (API) in 4797.8911ms
2022-05-16 01:38:38.358 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:38:38.482 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0 - 500 - application/json 4938.1775ms
2022-05-16 01:38:48.086 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0
2022-05-16 01:38:48.088 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:38:48.094 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:38:48.102 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:38:48.103 +04:00 [INF] Route matched with {action = "AddGameForUser", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameForUser(Int32, Int32) on controller API.Controllers.AdminController (API).
2022-05-16 01:38:54.140 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[Id] = @__gameId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:38:59.528 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[OwnedGames] ([DateCreated], [DateUpdated], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [dbo].[OwnedGames]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:38:59.547 +04:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Double), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Transactions] ([DateCreated], [DateUpdated], [MoneyAmount], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [dbo].[Transactions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:38:59.551 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoneyAmount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f0811183-f22e-43fc-9c4f-22acc0884035
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'MoneyAmount'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f0811183-f22e-43fc-9c4f-22acc0884035
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-16 01:38:59.902 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameForUser (API) in 11796.7796ms
2022-05-16 01:38:59.903 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:40:30.109 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:40:42.745 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:40:43.041 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:40:43.069 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:40:43.072 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:40:43.072 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:40:43.087 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-16 01:40:43.101 +04:00 [INF] Applying migration '20220515214030_test8'.
2022-05-16 01:40:43.280 +04:00 [ERR] Failed executing DbCommand (122ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[dbo].[Transactions].[MoneyAmount]', N'TransactionAmount', N'COLUMN';
2022-05-16 01:41:05.644 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:41:13.187 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:41:13.470 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:41:13.496 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:41:13.499 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:41:13.499 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:41:13.512 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-16 01:41:13.526 +04:00 [INF] Applying migration '20220515214105_test1'.
2022-05-16 01:41:13.620 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Category] (
    [Id] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(max) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Category] PRIMARY KEY ([Id])
);
2022-05-16 01:41:29.580 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:41:30.245 +04:00 [INF] Executed DbCommand (288ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-05-16 01:41:30.309 +04:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-05-16 01:41:30.323 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:41:30.408 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-05-16 01:41:30.409 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 01:41:30.428 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 01:41:30.432 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-16 01:41:30.445 +04:00 [INF] Applying migration '20220515214105_test1'.
2022-05-16 01:41:30.513 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Category] (
    [Id] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(max) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Category] PRIMARY KEY ([Id])
);
2022-05-16 01:41:30.514 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-05-16 01:41:30.516 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Publisher] (
    [Id] int NOT NULL IDENTITY,
    [PublisherName] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Publisher] PRIMARY KEY ([Id])
);
2022-05-16 01:41:30.516 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:41:30.518 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Videogame] (
    [Id] int NOT NULL IDENTITY,
    [VideogameName] nvarchar(128) NOT NULL,
    [Price] float NOT NULL,
    [OldPrice] float NULL,
    [PublicsherId] int NOT NULL,
    [Description] nvarchar(2000) NOT NULL,
    [ThumbnailUrl] nvarchar(100) NULL,
    [DownloadFileUrl] nvarchar(max) NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Videogame] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videogame_Publisher_PublicsherId] FOREIGN KEY ([PublicsherId]) REFERENCES [dbo].[Publisher] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:41:30.519 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [MailSent] datetime2 NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:41:30.520 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[VideogameCategory] (
    [VideogameId] int NOT NULL,
    [CategoryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_VideogameCategory] PRIMARY KEY ([VideogameId], [CategoryId]),
    CONSTRAINT [FK_VideogameCategory_Category_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [dbo].[Category] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_VideogameCategory_Videogame_VideogameId] FOREIGN KEY ([VideogameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:41:30.521 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[VideogameImages] (
    [Id] int NOT NULL IDENTITY,
    [VideogameId] int NOT NULL,
    [ImageUrl] nvarchar(max) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_VideogameImages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_VideogameImages_Videogame_VideogameId] FOREIGN KEY ([VideogameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:41:30.619 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[OwnedGames] (
    [Id] int NOT NULL IDENTITY,
    [VideogameId] int NOT NULL,
    [UserId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_OwnedGames] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OwnedGames_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[User] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_OwnedGames_Videogame_VideogameId] FOREIGN KEY ([VideogameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:41:30.620 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentCreditentials] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [UserId] int NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentCreditentials] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PaymentCreditentials_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[User] ([Id]) ON DELETE CASCADE
);
2022-05-16 01:41:30.621 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-05-16 01:41:30.623 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Transactions] (
    [Id] int NOT NULL IDENTITY,
    [VideogameId] int NULL,
    [UserId] int NOT NULL,
    [TransactionAmount] float NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Transactions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Transactions_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[User] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Transactions_Videogame_VideogameId] FOREIGN KEY ([VideogameId]) REFERENCES [dbo].[Videogame] ([Id])
);
2022-05-16 01:41:30.642 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-05-16T01:41:05.6944787+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-05-16 01:41:30.649 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-05-16T01:41:05.6944788+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-05-16 01:41:30.658 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-05-16T01:41:05.6944598+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-05-16 01:41:32.007 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-05-16T01:41:05.6944608+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-05-16 01:41:32.017 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'MailSent', N'Password', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] ON;
INSERT INTO [dbo].[User] ([Id], [Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [MailSent], [Password], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (1, N'admin', 1, '0001-01-01T00:00:00.0000000', NULL, N'O_pirtskhalaishvili@cu.edu.ge', N'admin', N'admin', NULL, N'ZOq8IjqEpX5NKEaBqN8dTr/Up8IT9a8kg9Dqjs5VLSk=', 1, N'Y+aEHkUVwCN9pO6AoeLk4Q==', N'551001100', 'string', NULL, '2022-05-16T01:41:05.7088762+04:00');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'MailSent', N'Password', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] OFF;
2022-05-16 01:41:32.019 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-05-16 01:41:32.020 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OwnedGames_UserId] ON [dbo].[OwnedGames] ([UserId]);
2022-05-16 01:41:32.020 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OwnedGames_VideogameId] ON [dbo].[OwnedGames] ([VideogameId]);
2022-05-16 01:41:32.021 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PaymentCreditentials_UserId] ON [dbo].[PaymentCreditentials] ([UserId]);
2022-05-16 01:41:32.022 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-05-16 01:41:32.022 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_UserId] ON [dbo].[Transactions] ([UserId]);
2022-05-16 01:41:32.023 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Transactions_VideogameId] ON [dbo].[Transactions] ([VideogameId]);
2022-05-16 01:41:32.024 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-05-16 01:41:32.025 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Videogame_PublicsherId] ON [dbo].[Videogame] ([PublicsherId]);
2022-05-16 01:41:32.986 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VideogameCategory_CategoryId] ON [dbo].[VideogameCategory] ([CategoryId]);
2022-05-16 01:41:32.987 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VideogameImages_VideogameId] ON [dbo].[VideogameImages] ([VideogameId]);
2022-05-16 01:41:32.988 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220515214105_test1', N'6.0.3');
2022-05-16 01:41:38.880 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 01:41:39.008 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 01:41:39.088 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 01:41:39.089 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 01:41:39.089 +04:00 [INF] Hosting environment: Development
2022-05-16 01:41:39.090 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 01:41:40.168 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 01:41:40.368 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 203.8147ms
2022-05-16 01:41:40.383 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 01:41:40.385 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.5088ms
2022-05-16 01:41:40.611 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 01:41:40.726 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 114.5833ms
2022-05-16 01:41:46.774 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-16 01:41:47.039 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 01:41:47.062 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-16 01:41:47.863 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:41:48.598 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[MailSent], [t].[Password], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-16 01:41:48.891 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:41:49.046 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:41:49.096 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-16 01:41:49.107 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2038.8093ms
2022-05-16 01:41:49.109 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 01:41:49.113 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2339.1782ms
2022-05-16 01:42:10.001 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Publisher/AddPublisher application/json 30
2022-05-16 01:42:10.111 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:42:10.121 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:42:10.125 +04:00 [INF] Executing endpoint 'API.Controllers.PublisherController.AddPublisher (API)'
2022-05-16 01:42:10.129 +04:00 [INF] Route matched with {action = "AddPublisher", controller = "Publisher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPublisher(Infrastructure.Entities.Publisher.Dto.AddPublisherDto) on controller API.Controllers.PublisherController (API).
2022-05-16 01:42:10.141 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_PublisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Publisher] AS [p]
        WHERE [p].[PublisherName] = @__model_PublisherName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:42:10.175 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Publisher] ([DateCreated], [DateUpdated], [PublisherName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Publisher]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:42:10.182 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:42:10.184 +04:00 [INF] Executed action API.Controllers.PublisherController.AddPublisher (API) in 52.6597ms
2022-05-16 01:42:10.185 +04:00 [INF] Executed endpoint 'API.Controllers.PublisherController.AddPublisher (API)'
2022-05-16 01:42:10.187 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Publisher/AddPublisher application/json 30 - 200 - application/json;+charset=utf-8 185.3282ms
2022-05-16 01:42:21.534 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Videogame/AddGame multipart/form-data;+boundary=----WebKitFormBoundaryY5T057jB4HrT0TOF 123807
2022-05-16 01:42:21.553 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:42:21.561 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:42:21.565 +04:00 [INF] Executing endpoint 'API.Controllers.VideogameController.AddGame (API)'
2022-05-16 01:42:21.570 +04:00 [INF] Route matched with {action = "AddGame", controller = "Videogame"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.VideogameController (API).
2022-05-16 01:42:21.611 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:42:21.674 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 2000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = Int32), @p7='?' (Size = 100), @p8='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Videogame] ([DateCreated], [DateUpdated], [Description], [DownloadFileUrl], [OldPrice], [Price], [PublicsherId], [ThumbnailUrl], [VideogameName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [dbo].[Videogame]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:42:21.682 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:42:21.685 +04:00 [INF] Executed action API.Controllers.VideogameController.AddGame (API) in 111.9875ms
2022-05-16 01:42:21.686 +04:00 [INF] Executed endpoint 'API.Controllers.VideogameController.AddGame (API)'
2022-05-16 01:42:21.688 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Videogame/AddGame multipart/form-data;+boundary=----WebKitFormBoundaryY5T057jB4HrT0TOF 123807 - 200 - application/json;+charset=utf-8 153.9858ms
2022-05-16 01:42:22.061 +04:00 [INF] Book found! Starting to process ..
2022-05-16 01:42:22.128 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:42:22.137 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM [dbo].[Videogame] AS [v]
WHERE [v].[Id] = @__model_VideogameId_0
2022-05-16 01:42:22.148 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [dbo].[Videogame] SET [ThumbnailUrl] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-05-16 01:42:32.262 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Category/AddCategory application/json 30
2022-05-16 01:42:32.264 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:42:32.270 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:42:32.277 +04:00 [INF] Executing endpoint 'API.Controllers.CategoryController.AddCategory (API)'
2022-05-16 01:42:32.282 +04:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCategory(Infrastructure.Entities.Categories.Dtos.CreateCategoryDto) on controller API.Controllers.CategoryController (API).
2022-05-16 01:42:32.292 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Category] AS [c]
        WHERE [c].[CategoryName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:42:32.307 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Category] ([CategoryName], [DateCreated], [DateUpdated])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Category]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:42:32.312 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:42:32.315 +04:00 [INF] Executed action API.Controllers.CategoryController.AddCategory (API) in 30.8749ms
2022-05-16 01:42:32.316 +04:00 [INF] Executed endpoint 'API.Controllers.CategoryController.AddCategory (API)'
2022-05-16 01:42:32.317 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Category/AddCategory application/json 30 - 200 - application/json;+charset=utf-8 55.6001ms
2022-05-16 01:42:41.757 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Category/AddGameCategory application/json 41
2022-05-16 01:42:41.761 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:42:41.764 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:42:41.769 +04:00 [INF] Executing endpoint 'API.Controllers.CategoryController.AddGameCategory (API)'
2022-05-16 01:42:41.774 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.CategoryController (API).
2022-05-16 01:42:41.786 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[VideogameCategory] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:42:41.804 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[VideogameCategory] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated])
VALUES (@p0, @p1, @p2, @p3);
2022-05-16 01:42:41.807 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:42:41.809 +04:00 [INF] Executed action API.Controllers.CategoryController.AddGameCategory (API) in 33.0519ms
2022-05-16 01:42:41.810 +04:00 [INF] Executed endpoint 'API.Controllers.CategoryController.AddGameCategory (API)'
2022-05-16 01:42:41.811 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Category/AddGameCategory application/json 41 - 200 - application/json;+charset=utf-8 54.3209ms
2022-05-16 01:42:47.507 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0
2022-05-16 01:42:47.509 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:42:47.512 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:42:47.516 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:42:47.520 +04:00 [INF] Route matched with {action = "AddGameForUser", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameForUser(Int32, Int32) on controller API.Controllers.AdminController (API).
2022-05-16 01:42:50.638 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[Id] = @__gameId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:42:52.852 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[OwnedGames] ([DateCreated], [DateUpdated], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [dbo].[OwnedGames]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:42:52.859 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Double), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Transactions] ([DateCreated], [DateUpdated], [TransactionAmount], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [dbo].[Transactions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:42:53.975 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:42:53.977 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameForUser (API) in 6455.1694ms
2022-05-16 01:42:53.979 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameForUser (API)'
2022-05-16 01:42:53.980 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameForUser?userId=1&gameId=1 - 0 - 200 - application/json;+charset=utf-8 6472.7966ms
2022-05-16 01:43:00.564 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/GetUserOwnedGames?userId=1 - 0
2022-05-16 01:43:00.568 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:43:00.571 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:43:00.574 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetUserOwnedGames (API)'
2022-05-16 01:43:00.579 +04:00 [INF] Route matched with {action = "GetUserOwnedGames", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserOwnedGames(Infrastructure.Paging.QueryParams, Int32) on controller API.Controllers.AdminController (API).
2022-05-16 01:43:00.618 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[OwnedGames] AS [o]
WHERE [o].[UserId] = @__userId_0
2022-05-16 01:43:00.635 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 01:43:00.637 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 01:43:00.654 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[UserId], [t].[VideogameId], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM (
    SELECT [o].[Id], [o].[DateCreated], [o].[DateUpdated], [o].[UserId], [o].[VideogameId]
    FROM [dbo].[OwnedGames] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [dbo].[Videogame] AS [v] ON [t].[VideogameId] = [v].[Id]
2022-05-16 01:43:00.673 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.GameNamesDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-16 01:43:00.676 +04:00 [INF] Executed action API.Controllers.AdminController.GetUserOwnedGames (API) in 95.4095ms
2022-05-16 01:43:00.678 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetUserOwnedGames (API)'
2022-05-16 01:43:00.679 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/GetUserOwnedGames?userId=1 - 0 - 200 - application/json;+charset=utf-8 115.2817ms
2022-05-16 01:43:10.595 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/SearchUserInfo?UserName=str - -
2022-05-16 01:43:10.597 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:43:10.601 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:43:10.604 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.SearchUserInfo (API)'
2022-05-16 01:43:10.608 +04:00 [INF] Route matched with {action = "SearchUserInfo", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchUserInfo(Infrastructure.Entities.User.Dto.SearchUserDto) on controller API.Controllers.AdminController (API).
2022-05-16 01:43:10.627 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[User] AS [u]
WHERE (@__model_UserName_0 LIKE '') OR (CHARINDEX(@__model_UserName_0, [u].[UserName]) > 0)
2022-05-16 01:43:10.631 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 01:43:10.631 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 01:43:10.637 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE (@__model_UserName_0 LIKE '') OR (CHARINDEX(@__model_UserName_0, [u].[UserName]) > 0)
ORDER BY (SELECT 1)
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2022-05-16 01:43:10.644 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.User.Dto.UserDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-16 01:43:10.648 +04:00 [INF] Executed action API.Controllers.AdminController.SearchUserInfo (API) in 38.1609ms
2022-05-16 01:43:10.649 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.SearchUserInfo (API)'
2022-05-16 01:43:10.651 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/SearchUserInfo?UserName=str - - - 200 - application/json;+charset=utf-8 55.9996ms
2022-05-16 01:43:14.384 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetAdminManagerUsers - -
2022-05-16 01:43:14.386 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:43:14.389 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:43:14.392 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetAdminManagerUsers (API)'
2022-05-16 01:43:14.395 +04:00 [INF] Route matched with {action = "GetAdminManagerUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAdminManagerUsers() on controller API.Controllers.AdminController (API).
2022-05-16 01:43:14.411 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Role] IN (1, 2)
2022-05-16 01:43:14.414 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.User.Dto.UserDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-16 01:43:14.415 +04:00 [INF] Executed action API.Controllers.AdminController.GetAdminManagerUsers (API) in 18.4764ms
2022-05-16 01:43:14.417 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetAdminManagerUsers (API)'
2022-05-16 01:43:14.418 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetAdminManagerUsers - - - 200 - application/json;+charset=utf-8 33.1517ms
2022-05-16 01:43:22.992 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetRoles - -
2022-05-16 01:43:22.993 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:43:22.997 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:43:23.000 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetRoles (API)'
2022-05-16 01:43:23.003 +04:00 [INF] Route matched with {action = "GetRoles", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoles() on controller API.Controllers.AdminController (API).
2022-05-16 01:43:23.009 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:43:23.013 +04:00 [INF] Executed action API.Controllers.AdminController.GetRoles (API) in 8.0669ms
2022-05-16 01:43:23.014 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetRoles (API)'
2022-05-16 01:43:23.015 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetRoles - - - 200 - application/json;+charset=utf-8 23.5191ms
2022-05-16 01:43:25.860 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GameInformationForAdmin - -
2022-05-16 01:43:25.862 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:43:25.865 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:43:25.867 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GameInformationForAdmin (API)'
2022-05-16 01:43:25.872 +04:00 [INF] Route matched with {action = "GameInformationForAdmin", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GameInformationForAdmin(Infrastructure.Paging.QueryParams) on controller API.Controllers.AdminController (API).
2022-05-16 01:43:25.880 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[Videogame] AS [v]
2022-05-16 01:43:25.886 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 01:43:25.887 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 01:43:25.909 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[Description], [t].[DownloadFileUrl], [t].[OldPrice], [t].[Price], [t].[PublicsherId], [t].[ThumbnailUrl], [t].[VideogameName], [t0].[VideogameId], [t0].[CategoryId], [t0].[DateCreated], [t0].[DateUpdated], [t0].[Id], [t0].[CategoryName], [t0].[DateCreated0], [t0].[DateUpdated0]
FROM (
    SELECT [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
    FROM [dbo].[Videogame] AS [v]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [v0].[VideogameId], [v0].[CategoryId], [v0].[DateCreated], [v0].[DateUpdated], [c].[Id], [c].[CategoryName], [c].[DateCreated] AS [DateCreated0], [c].[DateUpdated] AS [DateUpdated0]
    FROM [dbo].[VideogameCategory] AS [v0]
    INNER JOIN [dbo].[Category] AS [c] ON [v0].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[VideogameId]
ORDER BY [t].[Id], [t0].[VideogameId], [t0].[CategoryId]
2022-05-16 01:43:25.922 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.GameInformationForAdminDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-16 01:43:25.929 +04:00 [INF] Executed action API.Controllers.AdminController.GameInformationForAdmin (API) in 55.3447ms
2022-05-16 01:43:25.931 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GameInformationForAdmin (API)'
2022-05-16 01:43:25.932 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GameInformationForAdmin - - - 200 - application/json;+charset=utf-8 71.7994ms
2022-05-16 01:43:40.967 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGameInformationForAdmin/d - -
2022-05-16 01:43:40.969 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:43:40.972 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:43:40.976 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.SearchGameInformationForAdmin (API)'
2022-05-16 01:43:40.979 +04:00 [INF] Route matched with {action = "SearchGameInformationForAdmin", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchGameInformationForAdmin(Infrastructure.Paging.QueryParams, System.String) on controller API.Controllers.AdminController (API).
2022-05-16 01:43:40.988 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__NameSearchTerm_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[Videogame] AS [v]
WHERE (@__NameSearchTerm_0 LIKE N'') OR (CHARINDEX(@__NameSearchTerm_0, [v].[VideogameName]) > 0)
2022-05-16 01:43:40.991 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 01:43:40.992 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 01:43:41.008 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__NameSearchTerm_0='?' (Size = 128), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[Description], [t].[DownloadFileUrl], [t].[OldPrice], [t].[Price], [t].[PublicsherId], [t].[ThumbnailUrl], [t].[VideogameName], [t0].[VideogameId], [t0].[CategoryId], [t0].[DateCreated], [t0].[DateUpdated], [t0].[Id], [t0].[CategoryName], [t0].[DateCreated0], [t0].[DateUpdated0]
FROM (
    SELECT [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
    FROM [dbo].[Videogame] AS [v]
    WHERE (@__NameSearchTerm_0 LIKE N'') OR (CHARINDEX(@__NameSearchTerm_0, [v].[VideogameName]) > 0)
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [v0].[VideogameId], [v0].[CategoryId], [v0].[DateCreated], [v0].[DateUpdated], [c].[Id], [c].[CategoryName], [c].[DateCreated] AS [DateCreated0], [c].[DateUpdated] AS [DateUpdated0]
    FROM [dbo].[VideogameCategory] AS [v0]
    INNER JOIN [dbo].[Category] AS [c] ON [v0].[CategoryId] = [c].[Id]
) AS [t0] ON [t].[Id] = [t0].[VideogameId]
ORDER BY [t].[Id], [t0].[VideogameId], [t0].[CategoryId]
2022-05-16 01:43:41.013 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.GameInformationForAdminDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-16 01:43:41.014 +04:00 [INF] Executed action API.Controllers.AdminController.SearchGameInformationForAdmin (API) in 32.6275ms
2022-05-16 01:43:41.015 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.SearchGameInformationForAdmin (API)'
2022-05-16 01:43:41.016 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGameInformationForAdmin/d - - - 200 - application/json;+charset=utf-8 48.7173ms
2022-05-16 01:43:50.088 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=tbilisi2 - 0
2022-05-16 01:43:50.090 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:43:50.093 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:43:50.096 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-16 01:43:50.105 +04:00 [INF] Route matched with {action = "AddCountry", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCountry(Infrastructure.Entities.Country.Dtos.AddCountryDto) on controller API.Controllers.AdminController (API).
2022-05-16 01:43:50.117 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_CountryName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Country] AS [c]
        WHERE [c].[Name] = @__model_CountryName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:43:50.132 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Country] ([DateCreated], [DateUpdated], [Name])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Country]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:43:50.137 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 01:43:50.139 +04:00 [INF] Executed action API.Controllers.AdminController.AddCountry (API) in 30.1257ms
2022-05-16 01:43:50.140 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-16 01:43:50.140 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=tbilisi2 - 0 - 200 - application/json;+charset=utf-8 52.3644ms
2022-05-16 01:44:59.506 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UserFunctions/AddUpdatePaymentCreditentials application/json 157
2022-05-16 01:44:59.509 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:44:59.512 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:44:59.515 +04:00 [INF] Executing endpoint 'API.Controllers.UserFunctions.AddUpdatePaymentCreditentials (API)'
2022-05-16 01:44:59.518 +04:00 [INF] Route matched with {action = "AddUpdatePaymentCreditentials", controller = "UserFunctions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUpdatePaymentCreditentials(Infrastructure.Entities.PaymentCreditentials.Dtos.UpdateAddPaymentDto) on controller API.Controllers.UserFunctions (API).
2022-05-16 01:44:59.534 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CSV], [p].[CardNumber], [p].[DateCreated], [p].[DateUpdated], [p].[ExpireDate], [p].[OwnerName], [p].[PaymentTypeId], [p].[UserId]
FROM [dbo].[PaymentCreditentials] AS [p]
WHERE [p].[UserId] = @__userId_0
2022-05-16 01:50:10.775 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 01:50:10.876 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 01:50:10.982 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 01:50:10.983 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 01:50:10.984 +04:00 [INF] Hosting environment: Development
2022-05-16 01:50:10.985 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 01:50:11.903 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 01:50:12.264 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 370.4945ms
2022-05-16 01:50:12.283 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 01:50:12.287 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.1718ms
2022-05-16 01:50:12.598 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 01:50:12.754 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 156.1738ms
2022-05-16 01:52:18.773 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 01:52:18.855 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 01:52:18.932 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 01:52:18.933 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 01:52:18.934 +04:00 [INF] Hosting environment: Development
2022-05-16 01:52:18.935 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 01:52:20.205 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 01:52:20.432 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 229.9385ms
2022-05-16 01:52:20.449 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 01:52:20.452 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.1334ms
2022-05-16 01:52:20.778 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 01:52:20.934 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 155.4643ms
2022-05-16 01:52:30.029 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-16 01:52:30.326 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 01:52:30.353 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-16 01:52:31.166 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:52:31.900 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[MailSent], [t].[Password], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-16 01:52:32.222 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 01:52:32.357 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 01:52:32.408 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-16 01:52:32.419 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2060.8163ms
2022-05-16 01:52:32.421 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 01:52:32.426 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2396.5553ms
2022-05-16 01:52:53.400 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UserFunctions/AddUpdatePaymentCreditentials application/json 157
2022-05-16 01:52:53.498 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:52:53.507 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:52:53.510 +04:00 [INF] Executing endpoint 'API.Controllers.UserFunctions.AddUpdatePaymentCreditentials (API)'
2022-05-16 01:52:53.514 +04:00 [INF] Route matched with {action = "AddUpdatePaymentCreditentials", controller = "UserFunctions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUpdatePaymentCreditentials(Infrastructure.Entities.PaymentCreditentials.Dtos.UpdateAddPaymentDto) on controller API.Controllers.UserFunctions (API).
2022-05-16 01:52:53.533 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CSV], [p].[CardNumber], [p].[DateCreated], [p].[DateUpdated], [p].[ExpireDate], [p].[OwnerName], [p].[PaymentTypeId], [p].[UserId]
FROM [dbo].[PaymentCreditentials] AS [p]
WHERE [p].[UserId] = @__userId_0
2022-05-16 01:52:53.536 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.PaymentCreditentials.Dtos.PaymentCredentialsInfoDto'.
2022-05-16 01:52:53.544 +04:00 [INF] Executed action API.Controllers.UserFunctions.AddUpdatePaymentCreditentials (API) in 27.2097ms
2022-05-16 01:52:53.545 +04:00 [INF] Executed endpoint 'API.Controllers.UserFunctions.AddUpdatePaymentCreditentials (API)'
2022-05-16 01:52:53.547 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UserFunctions/AddUpdatePaymentCreditentials application/json 157 - 200 - application/json;+charset=utf-8 147.0383ms
2022-05-16 01:52:58.013 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UserFunctions/AddUpdatePaymentCreditentials application/json 157
2022-05-16 01:52:58.026 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 01:52:58.034 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 01:52:58.037 +04:00 [INF] Executing endpoint 'API.Controllers.UserFunctions.AddUpdatePaymentCreditentials (API)'
2022-05-16 01:52:58.038 +04:00 [INF] Route matched with {action = "AddUpdatePaymentCreditentials", controller = "UserFunctions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddUpdatePaymentCreditentials(Infrastructure.Entities.PaymentCreditentials.Dtos.UpdateAddPaymentDto) on controller API.Controllers.UserFunctions (API).
2022-05-16 01:52:58.045 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CSV], [p].[CardNumber], [p].[DateCreated], [p].[DateUpdated], [p].[ExpireDate], [p].[OwnerName], [p].[PaymentTypeId], [p].[UserId]
FROM [dbo].[PaymentCreditentials] AS [p]
WHERE [p].[UserId] = @__userId_0
2022-05-16 01:52:58.047 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.PaymentCreditentials.Dtos.PaymentCredentialsInfoDto'.
2022-05-16 01:52:58.049 +04:00 [INF] Executed action API.Controllers.UserFunctions.AddUpdatePaymentCreditentials (API) in 8.4246ms
2022-05-16 01:52:58.050 +04:00 [INF] Executed endpoint 'API.Controllers.UserFunctions.AddUpdatePaymentCreditentials (API)'
2022-05-16 01:52:58.051 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UserFunctions/AddUpdatePaymentCreditentials application/json 157 - 200 - application/json;+charset=utf-8 37.7156ms
2022-05-16 03:56:08.869 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 03:56:08.958 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 03:56:09.044 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 03:56:09.045 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 03:56:09.046 +04:00 [INF] Hosting environment: Development
2022-05-16 03:56:09.047 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 03:56:09.875 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 03:56:10.176 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 305.3228ms
2022-05-16 03:56:10.224 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 03:56:10.232 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 8.1631ms
2022-05-16 03:56:10.658 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 03:56:10.866 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.1973ms
2022-05-16 03:56:52.702 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 03:57:00.006 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 03:57:00.319 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 03:57:00.348 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 03:57:00.351 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-16 03:57:00.352 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-16 03:57:00.366 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-16 03:57:00.379 +04:00 [INF] Applying migration '20220515235653_test2'.
2022-05-16 03:57:00.463 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[Transactions] ADD [CardNumber] nvarchar(max) NULL;
2022-05-16 03:57:00.464 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[Transactions] ADD [paymentType] int NULL;
2022-05-16 03:57:00.465 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[UserBalanceEntity] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [balance] float NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_UserBalanceEntity] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserBalanceEntity_User_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[User] ([Id]) ON DELETE CASCADE
);
2022-05-16 03:57:00.467 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-16T03:56:52.7547927+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 03:57:00.467 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-16T03:56:52.7547938+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 03:57:00.468 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-16T03:56:52.7548127+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 03:57:00.469 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-16T03:56:52.7548128+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-16 03:57:00.470 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'vWgp3VVmtVvmlqKF/wAopfv00jeVWHLBy4CAriTHoJ4=', [Salt] = N'wAyNEGnlGf3Of37FPq7ISw==', [Verified] = '2022-05-16T03:56:52.7697392+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-16 03:57:00.480 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'UserId', N'balance') AND [object_id] = OBJECT_ID(N'[dbo].[UserBalanceEntity]'))
    SET IDENTITY_INSERT [dbo].[UserBalanceEntity] ON;
INSERT INTO [dbo].[UserBalanceEntity] ([Id], [DateCreated], [DateUpdated], [UserId], [balance])
VALUES (1, '2022-05-16T03:56:52.7716236+04:00', NULL, 1, 1.0E0);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'UserId', N'balance') AND [object_id] = OBJECT_ID(N'[dbo].[UserBalanceEntity]'))
    SET IDENTITY_INSERT [dbo].[UserBalanceEntity] OFF;
2022-05-16 03:57:00.482 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserBalanceEntity_UserId] ON [dbo].[UserBalanceEntity] ([UserId]);
2022-05-16 03:57:00.482 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220515235653_test2', N'6.0.3');
2022-05-16 03:58:00.644 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 03:58:00.761 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 03:58:00.878 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 03:58:00.879 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 03:58:00.880 +04:00 [INF] Hosting environment: Development
2022-05-16 03:58:00.881 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 03:58:01.632 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 03:58:01.938 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 311.7951ms
2022-05-16 03:58:01.956 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 03:58:01.960 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.3301ms
2022-05-16 03:58:02.254 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 03:58:02.403 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 148.1292ms
2022-05-16 03:58:19.455 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/UserFunctions/GetUserBalance - -
2022-05-16 03:58:19.762 +04:00 [INF] Executing endpoint 'API.Controllers.UserFunctions.GetUserBalance (API)'
2022-05-16 03:58:19.781 +04:00 [INF] Route matched with {action = "GetUserBalance", controller = "UserFunctions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserBalance() on controller API.Controllers.UserFunctions (API).
2022-05-16 03:58:19.784 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-05-16 03:58:19.786 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 03:58:19.794 +04:00 [INF] Executed action API.Controllers.UserFunctions.GetUserBalance (API) in 6.1265ms
2022-05-16 03:58:19.797 +04:00 [INF] Executed endpoint 'API.Controllers.UserFunctions.GetUserBalance (API)'
2022-05-16 03:58:19.799 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/UserFunctions/GetUserBalance - - - 401 - application/json;+charset=utf-8 344.2513ms
2022-05-16 03:58:26.072 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-16 03:58:26.083 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 03:58:26.097 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-16 03:58:26.954 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 03:58:27.761 +04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[MailSent], [t].[Password], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-16 03:58:28.117 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 03:58:28.255 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 03:58:28.306 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-16 03:58:28.312 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2212.2364ms
2022-05-16 03:58:28.314 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 03:58:28.318 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2245.1790ms
2022-05-16 03:58:41.735 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/UserFunctions/GetUserBalance - -
2022-05-16 03:58:41.840 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 03:58:41.851 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 03:58:41.854 +04:00 [INF] Executing endpoint 'API.Controllers.UserFunctions.GetUserBalance (API)'
2022-05-16 03:58:41.855 +04:00 [INF] Route matched with {action = "GetUserBalance", controller = "UserFunctions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserBalance() on controller API.Controllers.UserFunctions (API).
2022-05-16 03:58:41.868 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DateCreated], [u].[DateUpdated], [u].[UserId], [u].[balance]
FROM [dbo].[UserBalanceEntity] AS [u]
WHERE [u].[UserId] = @__userId_0
2022-05-16 03:58:41.883 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.UserBalance.Dtos.GetUserBalanceDto'.
2022-05-16 03:58:41.886 +04:00 [INF] Executed action API.Controllers.UserFunctions.GetUserBalance (API) in 28.4208ms
2022-05-16 03:58:41.887 +04:00 [INF] Executed endpoint 'API.Controllers.UserFunctions.GetUserBalance (API)'
2022-05-16 03:58:41.889 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/UserFunctions/GetUserBalance - - - 200 - application/json;+charset=utf-8 153.9912ms
2022-05-16 03:59:22.445 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Publisher/AddPublisher application/json 30
2022-05-16 03:59:22.456 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 03:59:22.462 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 03:59:22.465 +04:00 [INF] Executing endpoint 'API.Controllers.PublisherController.AddPublisher (API)'
2022-05-16 03:59:22.468 +04:00 [INF] Route matched with {action = "AddPublisher", controller = "Publisher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPublisher(Infrastructure.Entities.Publisher.Dto.AddPublisherDto) on controller API.Controllers.PublisherController (API).
2022-05-16 03:59:22.479 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_PublisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Publisher] AS [p]
        WHERE [p].[PublisherName] = @__model_PublisherName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 03:59:22.642 +04:00 [INF] Executed action API.Controllers.PublisherController.AddPublisher (API) in 172.4532ms
2022-05-16 03:59:22.644 +04:00 [INF] Executed endpoint 'API.Controllers.PublisherController.AddPublisher (API)'
2022-05-16 03:59:22.896 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Publisher/AddPublisher application/json 30 - 400 - application/json 450.6397ms
2022-05-16 03:59:45.379 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Videogame/AddGame multipart/form-data;+boundary=----WebKitFormBoundaryXws9iv2vjLmDtVWz 123808
2022-05-16 03:59:45.382 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 03:59:45.388 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 03:59:45.396 +04:00 [INF] Executing endpoint 'API.Controllers.VideogameController.AddGame (API)'
2022-05-16 03:59:45.402 +04:00 [INF] Route matched with {action = "AddGame", controller = "Videogame"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.VideogameController (API).
2022-05-16 03:59:45.446 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 03:59:45.531 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 2000), @p3='?' (Size = 4000), @p4='?' (DbType = Double), @p5='?' (DbType = Double), @p6='?' (DbType = Int32), @p7='?' (Size = 100), @p8='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Videogame] ([DateCreated], [DateUpdated], [Description], [DownloadFileUrl], [OldPrice], [Price], [PublicsherId], [ThumbnailUrl], [VideogameName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [dbo].[Videogame]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 03:59:45.539 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 03:59:45.540 +04:00 [INF] Executed action API.Controllers.VideogameController.AddGame (API) in 136.1523ms
2022-05-16 03:59:45.542 +04:00 [INF] Executed endpoint 'API.Controllers.VideogameController.AddGame (API)'
2022-05-16 03:59:45.544 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Videogame/AddGame multipart/form-data;+boundary=----WebKitFormBoundaryXws9iv2vjLmDtVWz 123808 - 200 - application/json;+charset=utf-8 164.9392ms
2022-05-16 03:59:45.954 +04:00 [INF] Book found! Starting to process ..
2022-05-16 03:59:46.026 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 03:59:46.044 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM [dbo].[Videogame] AS [v]
WHERE [v].[Id] = @__model_VideogameId_0
2022-05-16 03:59:46.059 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [dbo].[Videogame] SET [ThumbnailUrl] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-05-16 03:59:58.253 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Videogame/BuyGame/2 - 0
2022-05-16 03:59:58.257 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 03:59:58.260 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 03:59:58.263 +04:00 [INF] Executing endpoint 'API.Controllers.VideogameController.BuyGame (API)'
2022-05-16 03:59:58.267 +04:00 [INF] Route matched with {action = "BuyGame", controller = "Videogame"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyGame(Int32) on controller API.Controllers.VideogameController (API).
2022-05-16 03:59:58.272 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-16 03:59:58.274 +04:00 [INF] Executed action API.Controllers.VideogameController.BuyGame (API) in 4.6159ms
2022-05-16 03:59:58.275 +04:00 [INF] Executed endpoint 'API.Controllers.VideogameController.BuyGame (API)'
2022-05-16 03:59:58.276 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Videogame/BuyGame/2 - 0 - 400 - text/plain;+charset=utf-8 23.2849ms
2022-05-16 04:00:22.848 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Videogame/BuyGame/2 - 0
2022-05-16 04:00:22.855 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:00:22.858 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 04:00:22.863 +04:00 [INF] Executing endpoint 'API.Controllers.VideogameController.BuyGame (API)'
2022-05-16 04:00:22.864 +04:00 [INF] Route matched with {action = "BuyGame", controller = "Videogame"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyGame(Int32) on controller API.Controllers.VideogameController (API).
2022-05-16 04:00:22.872 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-16 04:00:22.873 +04:00 [INF] Executed action API.Controllers.VideogameController.BuyGame (API) in 5.6152ms
2022-05-16 04:00:22.875 +04:00 [INF] Executed endpoint 'API.Controllers.VideogameController.BuyGame (API)'
2022-05-16 04:00:22.876 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Videogame/BuyGame/2 - 0 - 400 - text/plain;+charset=utf-8 28.4492ms
2022-05-16 04:00:44.411 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 04:00:44.504 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 04:00:44.593 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 04:00:44.594 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 04:00:44.595 +04:00 [INF] Hosting environment: Development
2022-05-16 04:00:44.596 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 04:00:45.621 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 04:00:45.833 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 215.5307ms
2022-05-16 04:00:45.851 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 04:00:45.854 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.3431ms
2022-05-16 04:00:46.131 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 04:00:46.260 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 129.3441ms
2022-05-16 04:00:51.713 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-16 04:00:51.992 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 04:00:52.018 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-16 04:00:52.860 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:00:53.630 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[MailSent], [t].[Password], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-16 04:00:53.978 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 04:00:54.124 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 04:00:54.179 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-16 04:00:54.192 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2168.0311ms
2022-05-16 04:00:54.194 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 04:00:54.199 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2486.4089ms
2022-05-16 04:01:14.900 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Videogame/BuyGame/2 - 0
2022-05-16 04:01:15.022 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:01:15.031 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 04:01:15.035 +04:00 [INF] Executing endpoint 'API.Controllers.VideogameController.BuyGame (API)'
2022-05-16 04:01:15.039 +04:00 [INF] Route matched with {action = "BuyGame", controller = "Videogame"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyGame(Int32) on controller API.Controllers.VideogameController (API).
2022-05-16 04:01:18.261 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM [dbo].[Videogame] AS [v]
WHERE [v].[Id] = @__gameId_0
2022-05-16 04:01:18.293 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DateCreated], [u].[DateUpdated], [u].[UserId], [u].[balance]
FROM [dbo].[UserBalanceEntity] AS [u]
WHERE [u].[UserId] = @__userId_0
2022-05-16 04:01:59.512 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 04:01:59.624 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 04:01:59.732 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 04:01:59.741 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 04:01:59.743 +04:00 [INF] Hosting environment: Development
2022-05-16 04:01:59.745 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 04:02:00.901 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 04:02:01.227 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 332.9980ms
2022-05-16 04:02:01.247 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 04:02:01.254 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 6.8295ms
2022-05-16 04:02:01.664 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 04:02:01.873 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.7260ms
2022-05-16 04:02:05.208 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-16 04:02:05.513 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 04:02:05.541 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-16 04:02:06.466 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:02:07.342 +04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[MailSent], [t].[Password], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-16 04:02:07.707 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 04:02:07.852 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 04:02:07.908 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-16 04:02:07.920 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2373.0526ms
2022-05-16 04:02:07.922 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 04:02:07.927 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2719.2780ms
2022-05-16 04:02:24.805 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Videogame/BuyGame/1 - 0
2022-05-16 04:02:24.913 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:02:24.921 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 04:02:24.924 +04:00 [INF] Executing endpoint 'API.Controllers.VideogameController.BuyGame (API)'
2022-05-16 04:02:24.929 +04:00 [INF] Route matched with {action = "BuyGame", controller = "Videogame"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyGame(Int32) on controller API.Controllers.VideogameController (API).
2022-05-16 04:02:27.460 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM [dbo].[Videogame] AS [v]
WHERE [v].[Id] = @__gameId_0
2022-05-16 04:02:27.493 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DateCreated], [u].[DateUpdated], [u].[UserId], [u].[balance]
FROM [dbo].[UserBalanceEntity] AS [u]
WHERE [u].[UserId] = @__userId_0
2022-05-16 04:02:27.511 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CSV], [p].[CardNumber], [p].[DateCreated], [p].[DateUpdated], [p].[ExpireDate], [p].[OwnerName], [p].[PaymentTypeId], [p].[UserId]
FROM [dbo].[PaymentCreditentials] AS [p]
WHERE [p].[UserId] = @__userId_0
2022-05-16 04:02:27.517 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DateCreated], [u].[DateUpdated], [u].[UserId], [u].[balance]
FROM [dbo].[UserBalanceEntity] AS [u]
WHERE [u].[UserId] = @__userId_0
2022-05-16 04:04:48.371 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 04:04:48.472 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 04:04:48.585 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 04:04:48.586 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 04:04:48.587 +04:00 [INF] Hosting environment: Development
2022-05-16 04:04:48.588 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 04:04:49.135 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 04:04:49.356 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 225.4326ms
2022-05-16 04:04:49.371 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 04:04:49.373 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.2544ms
2022-05-16 04:04:49.697 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 04:04:49.970 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 272.7301ms
2022-05-16 04:04:53.620 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-16 04:04:53.893 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 04:04:53.919 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-16 04:04:54.781 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:04:55.601 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[MailSent], [t].[Password], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-16 04:04:55.943 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-16 04:04:56.081 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 04:04:56.134 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-16 04:04:56.147 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2220.7545ms
2022-05-16 04:04:56.149 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-16 04:04:56.154 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2533.4036ms
2022-05-16 04:05:17.993 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Videogame/BuyGame/2 - 0
2022-05-16 04:05:18.107 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:05:18.116 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 04:05:18.120 +04:00 [INF] Executing endpoint 'API.Controllers.VideogameController.BuyGame (API)'
2022-05-16 04:05:18.125 +04:00 [INF] Route matched with {action = "BuyGame", controller = "Videogame"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyGame(Int32) on controller API.Controllers.VideogameController (API).
2022-05-16 04:05:20.550 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM [dbo].[Videogame] AS [v]
WHERE [v].[Id] = @__gameId_0
2022-05-16 04:05:20.586 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DateCreated], [u].[DateUpdated], [u].[UserId], [u].[balance]
FROM [dbo].[UserBalanceEntity] AS [u]
WHERE [u].[UserId] = @__userId_0
2022-05-16 04:05:20.656 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[OwnedGames] ([DateCreated], [DateUpdated], [UserId], [VideogameId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [dbo].[OwnedGames]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 04:05:20.665 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Double), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Transactions] ([CardNumber], [DateCreated], [DateUpdated], [TransactionAmount], [UserId], [VideogameId], [paymentType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [dbo].[Transactions]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-16 04:05:20.671 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-16 04:05:20.673 +04:00 [INF] Executed action API.Controllers.VideogameController.BuyGame (API) in 2545.3304ms
2022-05-16 04:05:20.675 +04:00 [INF] Executed endpoint 'API.Controllers.VideogameController.BuyGame (API)'
2022-05-16 04:05:20.676 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Videogame/BuyGame/2 - 0 - 200 - application/json;+charset=utf-8 2682.5022ms
2022-05-16 04:05:33.508 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/GetUserOwnedGames?userId=1 - 0
2022-05-16 04:05:33.519 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:05:33.526 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 04:05:33.530 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetUserOwnedGames (API)'
2022-05-16 04:05:33.535 +04:00 [INF] Route matched with {action = "GetUserOwnedGames", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserOwnedGames(Infrastructure.Paging.QueryParams, Int32) on controller API.Controllers.AdminController (API).
2022-05-16 04:05:33.565 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[OwnedGames] AS [o]
WHERE [o].[UserId] = @__userId_0
2022-05-16 04:05:33.587 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 04:05:33.589 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 04:05:33.614 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[UserId], [t].[VideogameId], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM (
    SELECT [o].[Id], [o].[DateCreated], [o].[DateUpdated], [o].[UserId], [o].[VideogameId]
    FROM [dbo].[OwnedGames] AS [o]
    WHERE [o].[UserId] = @__userId_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [dbo].[Videogame] AS [v] ON [t].[VideogameId] = [v].[Id]
2022-05-16 04:05:33.666 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.GameNamesDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-16 04:05:33.674 +04:00 [INF] Executed action API.Controllers.AdminController.GetUserOwnedGames (API) in 137.1292ms
2022-05-16 04:05:33.675 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetUserOwnedGames (API)'
2022-05-16 04:05:33.677 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/GetUserOwnedGames?userId=1 - 0 - 200 - application/json;+charset=utf-8 169.2274ms
2022-05-16 04:07:49.115 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetUserBalance?userId=1 - -
2022-05-16 04:07:49.122 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:07:49.126 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 04:07:49.129 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetUserBalance (API)'
2022-05-16 04:07:49.134 +04:00 [INF] Route matched with {action = "GetUserBalance", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserBalance(Int32) on controller API.Controllers.AdminController (API).
2022-05-16 04:07:49.168 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DateCreated], [u].[DateUpdated], [u].[UserId], [u].[balance]
FROM [dbo].[UserBalanceEntity] AS [u]
WHERE [u].[UserId] = @__userId_0
2022-05-16 04:07:49.172 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.UserBalance.Dtos.GetUserBalanceDto'.
2022-05-16 04:07:49.175 +04:00 [INF] Executed action API.Controllers.AdminController.GetUserBalance (API) in 39.1168ms
2022-05-16 04:07:49.177 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetUserBalance (API)'
2022-05-16 04:07:49.178 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetUserBalance?userId=1 - - - 200 - application/json;+charset=utf-8 64.5770ms
2022-05-16 04:08:05.603 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/UserFunctions/GetUserTransactionsInfo - -
2022-05-16 04:08:05.605 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-16 04:08:05.608 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-16 04:08:05.611 +04:00 [INF] Executing endpoint 'API.Controllers.UserFunctions.GetUserTransactionsInfo (API)'
2022-05-16 04:08:05.615 +04:00 [INF] Route matched with {action = "GetUserTransactionsInfo", controller = "UserFunctions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserTransactionsInfo(Infrastructure.Paging.QueryParams) on controller API.Controllers.UserFunctions (API).
2022-05-16 04:08:05.625 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[Transactions] AS [t]
WHERE [t].[UserId] = @__userId_0
2022-05-16 04:08:05.632 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 04:08:05.633 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-16 04:08:05.648 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[CardNumber], [t0].[DateCreated], [t0].[DateUpdated], [t0].[TransactionAmount], [t0].[UserId], [t0].[VideogameId], [t0].[paymentType], [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[MailSent], [u].[Password], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[DownloadFileUrl], [v].[OldPrice], [v].[Price], [v].[PublicsherId], [v].[ThumbnailUrl], [v].[VideogameName]
FROM (
    SELECT [t].[Id], [t].[CardNumber], [t].[DateCreated], [t].[DateUpdated], [t].[TransactionAmount], [t].[UserId], [t].[VideogameId], [t].[paymentType]
    FROM [dbo].[Transactions] AS [t]
    WHERE [t].[UserId] = @__userId_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t0]
INNER JOIN [dbo].[User] AS [u] ON [t0].[UserId] = [u].[Id]
LEFT JOIN [dbo].[Videogame] AS [v] ON [t0].[VideogameId] = [v].[Id]
2022-05-16 04:08:05.652 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Transactions.Dtos.UserTransactionsInfoDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-16 04:08:05.657 +04:00 [INF] Executed action API.Controllers.UserFunctions.GetUserTransactionsInfo (API) in 39.9126ms
2022-05-16 04:08:05.658 +04:00 [INF] Executed endpoint 'API.Controllers.UserFunctions.GetUserTransactionsInfo (API)'
2022-05-16 04:08:05.659 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/UserFunctions/GetUserTransactionsInfo - - - 200 - application/json;+charset=utf-8 55.9433ms
2022-05-16 04:11:51.862 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-16 04:11:51.965 +04:00 [INF] ThumbnailBackgroundWorker is now running in the background.
2022-05-16 04:11:52.050 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-16 04:11:52.051 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-16 04:11:52.051 +04:00 [INF] Hosting environment: Development
2022-05-16 04:11:52.052 +04:00 [INF] Content root path: C:\Users\omari\source\nexus-game-store\API\
2022-05-16 04:11:52.923 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-16 04:11:53.197 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 276.4254ms
2022-05-16 04:11:53.228 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-16 04:11:53.351 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 123.1934ms
2022-05-16 04:11:53.679 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-16 04:11:53.825 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 145.6181ms
