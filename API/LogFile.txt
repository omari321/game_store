2022-04-30 06:29:27.028 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 06:30:45.018 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 06:30:45.771 +04:00 [INF] Executed DbCommand (355ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-04-30 06:30:45.833 +04:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-04-30 06:30:45.847 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 06:30:45.937 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-04-30 06:30:45.939 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 06:30:45.958 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 06:30:45.963 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 06:30:45.976 +04:00 [INF] Applying migration '20220430022927_first'.
2022-04-30 06:30:46.023 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-04-30 06:30:46.024 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-04-30 06:30:46.025 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-04-30 06:30:46.027 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-04-30 06:30:46.029 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-04-30 06:30:46.029 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-04-30 06:30:46.030 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-04-30 06:30:46.057 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-04-30 06:30:46.057 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-04-30 06:30:46.058 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430022927_first', N'6.0.3');
2022-04-30 06:57:15.174 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 06:57:15.197 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 06:57:15.199 +04:00 [INF] Hosting environment: Development
2022-04-30 06:57:15.199 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 06:57:16.007 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 06:57:16.237 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 235.4487ms
2022-04-30 06:57:16.289 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 06:57:16.292 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6663ms
2022-04-30 06:57:16.569 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 06:57:16.620 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 50.7442ms
2022-04-30 07:41:46.585 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 07:41:46.611 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 07:41:46.612 +04:00 [INF] Hosting environment: Development
2022-04-30 07:41:46.613 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 07:41:48.093 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 07:41:48.394 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 310.4554ms
2022-04-30 07:41:48.458 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 07:41:48.462 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.6895ms
2022-04-30 07:41:48.798 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 07:41:48.877 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 79.4935ms
2022-04-30 08:11:48.586 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:11:48.610 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:11:48.611 +04:00 [INF] Hosting environment: Development
2022-04-30 08:11:48.612 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:11:50.278 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:11:50.539 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 263.8414ms
2022-04-30 08:11:50.595 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:11:50.599 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.8729ms
2022-04-30 08:11:50.857 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:11:50.968 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 110.3533ms
2022-04-30 08:12:02.900 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:12:02.909 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:12:02.938 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:12:03.551 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-04-30 08:12:03.560 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 615.4371ms
2022-04-30 08:12:03.562 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:12:03.564 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 400 - application/problem+json;+charset=utf-8 664.6334ms
2022-04-30 08:12:23.068 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 211
2022-04-30 08:12:23.070 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:12:23.071 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:12:23.099 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-04-30 08:12:23.101 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 27.9704ms
2022-04-30 08:12:23.102 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:12:23.103 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 211 - 400 - application/problem+json;+charset=utf-8 35.4032ms
2022-04-30 08:13:01.214 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:13:01.242 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:13:01.243 +04:00 [INF] Hosting environment: Development
2022-04-30 08:13:01.244 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:13:02.330 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:13:02.679 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 354.7061ms
2022-04-30 08:13:02.753 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:13:02.758 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.4133ms
2022-04-30 08:13:03.157 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:13:03.288 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 131.4932ms
2022-04-30 08:13:14.065 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:13:14.075 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:13:14.103 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:13:15.208 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:13:16.392 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 08:13:16.445 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 08:13:16.458 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 08:13:16.706 +04:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:13:16.841 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6e944538-37ba-46c6-80e6-6da52c59419a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6e944538-37ba-46c6-80e6-6da52c59419a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:13:17.056 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 2946.0808ms
2022-04-30 08:13:17.058 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:13:17.429 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 500 - application/json 3363.9598ms
2022-04-30 08:13:37.136 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:14:35.051 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:14:35.075 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:14:35.076 +04:00 [INF] Hosting environment: Development
2022-04-30 08:14:35.078 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:14:36.536 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:14:36.852 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 322.3144ms
2022-04-30 08:14:36.921 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:14:36.924 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.5605ms
2022-04-30 08:14:37.272 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:14:37.410 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 138.6410ms
2022-04-30 08:14:41.818 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:14:47.637 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:14:47.685 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:16:03.767 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:16:04.506 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 08:16:04.555 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 08:16:04.568 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 08:16:04.803 +04:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:16:04.844 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:01f65d8b-6c37-47b3-80a7-a88a19532100
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:01f65d8b-6c37-47b3-80a7-a88a19532100
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:16:05.091 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 77399.9943ms
2022-04-30 08:16:05.094 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:16:05.305 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 500 - application/json 83486.5872ms
2022-04-30 08:16:17.414 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:16:24.584 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:16:24.585 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:16:29.636 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:16:29.681 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 08:16:34.655 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 08:16:43.561 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 08:17:03.181 +04:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:17:03.191 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:01f65d8b-6c37-47b3-80a7-a88a19532100
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_User_City_CityId". The conflict occurred in database "GamesStore", table "dbo.City", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:01f65d8b-6c37-47b3-80a7-a88a19532100
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:17:08.321 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 43734.3098ms
2022-04-30 08:17:08.323 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:18:49.622 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:18:59.102 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:18:59.434 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 08:18:59.463 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 08:18:59.466 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 08:18:59.467 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 08:18:59.487 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 08:18:59.502 +04:00 [INF] Applying migration '20220430041849_test2'.
2022-04-30 08:18:59.584 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-04-30T08:18:49.6647056+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 08:18:59.595 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-04-30T08:18:49.6647059+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 08:18:59.608 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-04-30T08:18:49.6646800+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 08:18:59.619 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-04-30T08:18:49.6646810+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 08:18:59.620 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430041849_test2', N'6.0.3');
2022-04-30 08:19:07.176 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:19:07.201 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:19:07.202 +04:00 [INF] Hosting environment: Development
2022-04-30 08:19:07.203 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:19:08.666 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:19:09.137 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 479.2538ms
2022-04-30 08:19:09.204 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:19:09.207 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.1457ms
2022-04-30 08:19:09.550 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:19:09.661 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 110.8322ms
2022-04-30 08:19:20.486 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 08:19:20.494 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:19:20.520 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:19:23.732 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:19:24.406 +04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 08:19:24.456 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 08:19:24.472 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 08:19:24.689 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:19:24.741 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2022-04-30 08:19:24.748 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 4222.4375ms
2022-04-30 08:19:24.750 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 08:19:24.755 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 200 - application/json;+charset=utf-8 4269.3868ms
2022-04-30 08:19:31.964 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:19:31.967 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:19:31.971 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:19:32.058 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:19:32.160 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:19:32.265 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 291.7337ms
2022-04-30 08:19:32.267 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:19:32.457 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 500 - application/json 492.4845ms
2022-04-30 08:20:02.967 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:20:02.973 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:20:02.976 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:20:07.981 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:20:08.034 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:20:11.803 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 8824.6002ms
2022-04-30 08:20:11.804 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:20:16.721 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 500 - application/json 13754.5310ms
2022-04-30 08:20:18.883 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:20:18.885 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:20:18.886 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:20:24.635 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:20:24.673 +04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:22:04.845 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 08:22:04.874 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 08:22:04.876 +04:00 [INF] Hosting environment: Development
2022-04-30 08:22:04.878 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 08:22:05.886 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 08:22:06.370 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 492.3426ms
2022-04-30 08:22:06.439 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 08:22:06.443 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.2405ms
2022-04-30 08:22:06.756 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 08:22:06.860 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 104.4192ms
2022-04-30 08:22:09.844 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:22:09.852 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:22:09.878 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:22:13.303 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:22:14.128 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:22:14.794 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 08:22:14.961 +04:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:22:14.999 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1cc98574-3b7b-49b3-921e-15d8e50e2a3f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1cc98574-3b7b-49b3-921e-15d8e50e2a3f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:22:15.185 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 5301.2475ms
2022-04-30 08:22:15.188 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:22:15.356 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 500 - application/json 5512.0216ms
2022-04-30 08:22:25.323 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 08:22:25.326 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 08:22:25.328 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 08:22:29.592 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 08:22:29.635 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 08:22:47.817 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 08:23:00.733 +04:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 08:23:00.738 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1cc98574-3b7b-49b3-921e-15d8e50e2a3f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1cc98574-3b7b-49b3-921e-15d8e50e2a3f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 08:23:02.152 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 36822.6486ms
2022-04-30 08:23:02.153 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:25:09.360 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:25:09.383 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:25:09.384 +04:00 [INF] Hosting environment: Development
2022-04-30 18:25:09.385 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:25:10.790 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:25:11.123 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 336.0019ms
2022-04-30 18:25:11.217 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:25:11.222 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.3479ms
2022-04-30 18:25:11.557 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:25:11.694 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 137.0990ms
2022-04-30 18:44:50.152 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:44:58.393 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:44:59.065 +04:00 [INF] Executed DbCommand (218ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-04-30 18:44:59.128 +04:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-04-30 18:44:59.144 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:44:59.239 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-04-30 18:44:59.240 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:44:59.260 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 18:44:59.264 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 18:44:59.278 +04:00 [INF] Applying migration '20220430022927_first'.
2022-04-30 18:44:59.319 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-04-30 18:44:59.320 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-04-30 18:44:59.321 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-04-30 18:44:59.324 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-04-30 18:44:59.325 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-04-30 18:44:59.326 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-04-30 18:44:59.326 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-04-30 18:44:59.327 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-04-30 18:44:59.327 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-04-30 18:44:59.329 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430022927_first', N'6.0.3');
2022-04-30 18:44:59.333 +04:00 [INF] Applying migration '20220430041849_test2'.
2022-04-30 18:44:59.371 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-04-30T08:18:49.6647056+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:45:00.034 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-04-30T08:18:49.6647059+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:45:00.044 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-04-30T08:18:49.6646800+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:45:00.051 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-04-30T08:18:49.6646810+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:45:00.052 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430041849_test2', N'6.0.3');
2022-04-30 18:45:00.052 +04:00 [INF] Applying migration '20220430144450_test3'.
2022-04-30 18:45:00.069 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-04-30T18:44:50.1957250+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:45:00.069 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-04-30T18:44:50.1957261+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-04-30 18:45:00.070 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-04-30T18:44:50.1957410+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:45:00.071 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-04-30T18:44:50.1957411+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-04-30 18:45:00.081 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] ON;
INSERT INTO [dbo].[User] ([Id], [Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (1, N'admin', 1, '0001-01-01T00:00:00.0000000', NULL, N'O_pirtskhalaishvili@cu.edu.ge', N'admin', N'admin', N'string', NULL, 1, N'FEtCF+aMMa8neXYJfTb4Cg==', N'551001100', 'string', NULL, NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] OFF;
2022-04-30 18:45:02.820 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430144450_test3', N'6.0.3');
2022-04-30 18:45:11.157 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:45:11.183 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:45:11.185 +04:00 [INF] Hosting environment: Development
2022-04-30 18:45:11.187 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:45:12.858 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:45:13.212 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 357.7186ms
2022-04-30 18:45:13.304 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:45:13.308 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.9351ms
2022-04-30 18:45:13.829 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:45:14.052 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 222.7855ms
2022-04-30 18:45:19.360 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:45:19.383 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:45:19.439 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:45:25.722 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:45:26.565 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:45:26.779 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 7327.3191ms
2022-04-30 18:45:26.782 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:45:26.995 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 400 - application/json 7635.3781ms
2022-04-30 18:45:53.464 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:45:53.470 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:45:53.472 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:46:01.906 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:46:03.593 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:48:08.426 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:48:17.212 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:48:17.907 +04:00 [INF] Executed DbCommand (321ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-04-30 18:48:17.971 +04:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-04-30 18:48:17.988 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:48:18.085 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-04-30 18:48:18.087 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:48:18.107 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 18:48:18.112 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 18:48:18.128 +04:00 [INF] Applying migration '20220430022927_first'.
2022-04-30 18:48:18.182 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-04-30 18:48:18.184 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-04-30 18:48:18.186 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-04-30 18:48:18.188 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-04-30 18:48:18.191 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-04-30 18:48:18.192 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-04-30 18:48:18.193 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-04-30 18:48:18.431 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-04-30 18:48:18.432 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-04-30 18:48:18.433 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430022927_first', N'6.0.3');
2022-04-30 18:48:18.438 +04:00 [INF] Applying migration '20220430041849_test2'.
2022-04-30 18:48:18.479 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-04-30T08:18:49.6647056+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:48:18.486 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-04-30T08:18:49.6647059+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:48:18.497 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-04-30T08:18:49.6646800+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:48:18.505 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-04-30T08:18:49.6646810+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:48:18.506 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430041849_test2', N'6.0.3');
2022-04-30 18:48:18.506 +04:00 [INF] Applying migration '20220430144808_test3'.
2022-04-30 18:48:18.523 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-04-30T18:48:08.4704512+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:48:18.524 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-04-30T18:48:08.4704522+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-04-30 18:48:18.525 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-04-30T18:48:08.4704717+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:48:21.750 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-04-30T18:48:08.4704718+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-04-30 18:48:21.752 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'hdPer0IORC0Ae8EIphI54UuZk8OduKuA5qPNKMyOYb8=', [Salt] = N'+ut1WSHMY5mhcZktovyrTQ=='
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-04-30 18:48:21.752 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430144808_test3', N'6.0.3');
2022-04-30 18:49:32.390 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:49:32.421 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:49:32.423 +04:00 [INF] Hosting environment: Development
2022-04-30 18:49:32.424 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:49:34.512 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:49:34.815 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 308.6075ms
2022-04-30 18:49:34.891 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:49:34.895 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.8757ms
2022-04-30 18:49:35.205 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:49:35.357 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 151.6005ms
2022-04-30 18:49:37.906 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:49:37.913 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:49:37.940 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:49:41.997 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:49:42.807 +04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:49:42.926 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 4979.4222ms
2022-04-30 18:49:42.928 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:49:43.113 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 400 - application/json 5207.4335ms
2022-04-30 18:49:47.035 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:49:47.038 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:49:47.039 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:49:53.411 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:49:54.923 +04:00 [INF] Executed DbCommand (74ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:51:07.816 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:51:15.502 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:51:16.185 +04:00 [INF] Executed DbCommand (282ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-04-30 18:51:16.274 +04:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-04-30 18:51:16.292 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:51:16.404 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-04-30 18:51:16.406 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-04-30 18:51:16.433 +04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-04-30 18:51:16.438 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-04-30 18:51:16.456 +04:00 [INF] Applying migration '20220430145108_first'.
2022-04-30 18:51:16.531 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-04-30 18:51:16.533 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-04-30 18:51:16.534 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-04-30 18:51:16.537 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-04-30 18:51:16.540 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-04-30 18:51:16.561 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-04-30T18:51:07.8563624+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:51:16.570 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-04-30T18:51:07.8563626+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-04-30 18:51:17.035 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-04-30T18:51:07.8563476+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:51:17.043 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-04-30T18:51:07.8563483+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-04-30 18:51:17.054 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] ON;
INSERT INTO [dbo].[User] ([Id], [Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (1, N'admin', 1, '0001-01-01T00:00:00.0000000', NULL, N'O_pirtskhalaishvili@cu.edu.ge', N'admin', N'admin', N'o28AksuvLP62ja4y2bY5YuEgZHuQbaOSaUw1ItmzOSs=', NULL, 1, N'7BqUpjgiKwCP1ZVAAlV/Sg==', N'551001100', 'string', NULL, NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] OFF;
2022-04-30 18:51:17.056 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-04-30 18:51:17.057 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-04-30 18:51:17.058 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-04-30 18:51:17.060 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-04-30 18:51:17.060 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220430145108_first', N'6.0.3');
2022-04-30 18:51:39.621 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:51:39.645 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:51:39.648 +04:00 [INF] Hosting environment: Development
2022-04-30 18:51:39.649 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:51:41.841 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:51:42.168 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 333.4826ms
2022-04-30 18:51:42.238 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:51:42.242 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.4771ms
2022-04-30 18:51:42.650 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:51:42.774 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 123.5593ms
2022-04-30 18:51:47.392 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:51:47.401 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:51:47.427 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:51:50.032 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:51:50.841 +04:00 [INF] Executed DbCommand (58ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:51:51.154 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:51:51.316 +04:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:51:51.362 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:139ddffb-eac2-4607-8c29-7180b6f98740
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:139ddffb-eac2-4607-8c29-7180b6f98740
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 18:51:51.550 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 4114.692ms
2022-04-30 18:51:51.553 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:51:51.726 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 500 - application/json 4334.0376ms
2022-04-30 18:51:58.633 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:51:58.635 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:51:58.637 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:52:07.900 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:52:07.905 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:52:12.077 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:52:19.477 +04:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:52:19.483 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:139ddffb-eac2-4607-8c29-7180b6f98740
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'CreatedByIp', table 'GamesStore.dbo.RefreshToken'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:139ddffb-eac2-4607-8c29-7180b6f98740
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-30 18:52:21.913 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 23274.6876ms
2022-04-30 18:52:21.915 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:55:31.901 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:55:31.926 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:55:31.927 +04:00 [INF] Hosting environment: Development
2022-04-30 18:55:31.928 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:55:33.831 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:55:34.199 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 373.9357ms
2022-04-30 18:55:34.281 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:55:34.287 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 5.8741ms
2022-04-30 18:55:34.759 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:55:34.921 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.4416ms
2022-04-30 18:55:38.041 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:55:38.052 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:55:38.083 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:56:31.438 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 18:56:31.460 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:56:31.461 +04:00 [INF] Hosting environment: Development
2022-04-30 18:56:31.462 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 18:56:33.363 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 18:56:33.793 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 18:56:33.802 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 445.3380ms
2022-04-30 18:56:33.808 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 14.4088ms
2022-04-30 18:56:34.428 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 18:56:34.557 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 128.9162ms
2022-04-30 18:56:39.169 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:56:39.178 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:56:39.205 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:56:46.042 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:56:46.810 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:56:47.110 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:56:47.278 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:56:47.330 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 18:56:47.345 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 8134.5445ms
2022-04-30 18:56:47.348 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:56:47.353 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 8183.8333ms
2022-04-30 18:58:31.612 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0
2022-04-30 18:58:31.651 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 18:58:31.655 +04:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller API.Controllers.AuthController (API).
2022-04-30 18:58:31.776 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:58:31.800 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r0].[Id], [r0].[Created], [r0].[CreatedByIp], [r0].[Expires], [r0].[ReasonRevoked], [r0].[ReplacedByToken], [r0].[Revoked], [r0].[RevokedByIp], [r0].[Token], [r0].[UserEntityId], [r0].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE EXISTS (
        SELECT 1
        FROM [RefreshToken] AS [r]
        WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))
) AS [t]
LEFT JOIN [RefreshToken] AS [r0] ON [t].[Id] = [r0].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:58:31.812 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:58:31.832 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [RefreshToken] SET [ReasonRevoked] = @p0, [ReplacedByToken] = @p1, [Revoked] = @p2, [RevokedByIp] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-04-30 18:58:31.840 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:58:31.863 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 18:58:31.865 +04:00 [INF] Executed action API.Controllers.AuthController.RefreshToken (API) in 207.7734ms
2022-04-30 18:58:31.866 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 18:58:31.867 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0 - 200 - application/json;+charset=utf-8 254.9125ms
2022-04-30 18:58:52.240 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:58:52.247 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:58:52.251 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:58:52.257 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:58:52.258 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:58:52.260 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 3.9641ms
2022-04-30 18:58:52.261 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:58:52.262 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 22.6221ms
2022-04-30 18:59:09.343 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:59:09.344 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:09.347 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:09.349 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:59:09.350 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:59:09.352 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 2.5125ms
2022-04-30 18:59:09.353 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:09.354 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 11.2322ms
2022-04-30 18:59:10.678 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:59:10.679 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:10.680 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:10.682 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:59:10.683 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:59:10.687 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 5.4887ms
2022-04-30 18:59:10.688 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:10.689 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 11.6642ms
2022-04-30 18:59:24.311 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 18:59:24.312 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:59:24.313 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:27.087 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 18:59:27.094 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 18:59:27.117 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 18:59:27.125 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 18:59:27.129 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 18:59:27.130 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2814.38ms
2022-04-30 18:59:27.131 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 18:59:27.132 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2821.3641ms
2022-04-30 18:59:38.940 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:59:38.942 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:38.944 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:38.946 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:59:38.947 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:59:38.949 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 2.3993ms
2022-04-30 18:59:38.950 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:38.951 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 11.4715ms
2022-04-30 18:59:54.960 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 18:59:54.961 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:54.962 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 18:59:54.964 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 18:59:54.965 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 18:59:54.967 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 2.8433ms
2022-04-30 18:59:54.968 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 18:59:54.969 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 401 - application/json;+charset=utf-8 9.2044ms
2022-04-30 19:00:13.915 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/GetById/1 - -
2022-04-30 19:00:13.917 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetById (API)'
2022-04-30 19:00:13.921 +04:00 [INF] Route matched with {action = "GetById", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 19:00:13.924 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 19:00:13.925 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 19:00:13.926 +04:00 [INF] Executed action API.Controllers.AuthController.GetById (API) in 2.4292ms
2022-04-30 19:00:13.927 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetById (API)'
2022-04-30 19:00:13.928 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/GetById/1 - - - 401 - application/json;+charset=utf-8 13.3559ms
2022-04-30 19:00:18.081 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth - -
2022-04-30 19:00:18.083 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetAll (API)'
2022-04-30 19:00:18.086 +04:00 [INF] Route matched with {action = "GetAll", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller API.Controllers.AuthController (API).
2022-04-30 19:00:18.088 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 19:00:18.089 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 19:00:18.094 +04:00 [INF] Executed action API.Controllers.AuthController.GetAll (API) in 6.0792ms
2022-04-30 19:00:18.096 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetAll (API)'
2022-04-30 19:00:18.097 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth - - - 401 - application/json;+charset=utf-8 15.9687ms
2022-04-30 19:00:24.050 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0
2022-04-30 19:00:24.051 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 19:00:24.052 +04:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller API.Controllers.AuthController (API).
2022-04-30 19:00:24.055 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:00:24.067 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r0].[Id], [r0].[Created], [r0].[CreatedByIp], [r0].[Expires], [r0].[ReasonRevoked], [r0].[ReplacedByToken], [r0].[Revoked], [r0].[RevokedByIp], [r0].[Token], [r0].[UserEntityId], [r0].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE EXISTS (
        SELECT 1
        FROM [RefreshToken] AS [r]
        WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))
) AS [t]
LEFT JOIN [RefreshToken] AS [r0] ON [t].[Id] = [r0].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 19:00:24.094 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 19:00:24.100 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [RefreshToken] SET [ReasonRevoked] = @p0, [ReplacedByToken] = @p1, [Revoked] = @p2, [RevokedByIp] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-04-30 19:00:24.106 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 19:00:24.110 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 19:00:24.112 +04:00 [INF] Executed action API.Controllers.AuthController.RefreshToken (API) in 58.0245ms
2022-04-30 19:00:24.113 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 19:00:24.114 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0 - 200 - application/json;+charset=utf-8 64.7792ms
2022-04-30 19:05:00.513 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 19:05:00.550 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 19:05:00.552 +04:00 [INF] Hosting environment: Development
2022-04-30 19:05:00.554 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 19:05:02.310 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 19:05:02.647 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 344.6877ms
2022-04-30 19:05:02.749 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 19:05:02.753 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.9688ms
2022-04-30 19:05:03.172 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 19:05:03.311 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 138.8985ms
2022-04-30 19:05:06.775 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 19:05:06.950 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 19:05:06.976 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 19:05:07.938 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:08.721 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 19:05:09.043 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 19:05:09.187 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 19:05:09.240 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 19:05:09.255 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2271.5703ms
2022-04-30 19:05:09.257 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 19:05:09.261 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2485.9410ms
2022-04-30 19:05:25.461 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth - -
2022-04-30 19:05:25.561 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:25.572 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:05:25.575 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetAll (API)'
2022-04-30 19:05:25.578 +04:00 [INF] Route matched with {action = "GetAll", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller API.Controllers.AuthController (API).
2022-04-30 19:05:25.593 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 19:05:25.600 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.User.UserEntity, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-04-30 19:05:25.609 +04:00 [INF] Executed action API.Controllers.AuthController.GetAll (API) in 27.6888ms
2022-04-30 19:05:25.611 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetAll (API)'
2022-04-30 19:05:25.612 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth - - - 200 - application/json;+charset=utf-8 150.2414ms
2022-04-30 19:05:31.068 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/GetById/1 - -
2022-04-30 19:05:31.081 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:31.086 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:05:31.090 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetById (API)'
2022-04-30 19:05:31.095 +04:00 [INF] Route matched with {action = "GetById", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 19:05:31.105 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__id_0
2022-04-30 19:05:31.109 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.UserEntity'.
2022-04-30 19:05:31.111 +04:00 [INF] Executed action API.Controllers.AuthController.GetById (API) in 14.0404ms
2022-04-30 19:05:31.112 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetById (API)'
2022-04-30 19:05:31.113 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/GetById/1 - - - 200 - application/json;+charset=utf-8 44.6534ms
2022-04-30 19:05:40.695 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 19:05:40.697 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:40.701 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:05:40.704 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 19:05:40.708 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 19:05:45.073 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__id_0
2022-04-30 19:05:45.077 +04:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2022-04-30 19:05:45.078 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 4365.9433ms
2022-04-30 19:05:45.079 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 19:05:45.081 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 204 0 - 4386.1046ms
2022-04-30 19:05:58.354 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0
2022-04-30 19:05:58.356 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:05:58.360 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:05:58.362 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 19:05:58.366 +04:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken() on controller API.Controllers.AuthController (API).
2022-04-30 19:05:58.391 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r0].[Id], [r0].[Created], [r0].[CreatedByIp], [r0].[Expires], [r0].[ReasonRevoked], [r0].[ReplacedByToken], [r0].[Revoked], [r0].[RevokedByIp], [r0].[Token], [r0].[UserEntityId], [r0].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE EXISTS (
        SELECT 1
        FROM [RefreshToken] AS [r]
        WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))
) AS [t]
LEFT JOIN [RefreshToken] AS [r0] ON [t].[Id] = [r0].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 19:05:58.400 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 19:05:58.417 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [RefreshToken] SET [ReasonRevoked] = @p0, [ReplacedByToken] = @p1, [Revoked] = @p2, [RevokedByIp] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-04-30 19:05:58.424 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 19:05:58.428 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 19:05:58.430 +04:00 [INF] Executed action API.Controllers.AuthController.RefreshToken (API) in 59.7398ms
2022-04-30 19:05:58.431 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.RefreshToken (API)'
2022-04-30 19:05:58.432 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/refresh-token - 0 - 200 - application/json;+charset=utf-8 78.1312ms
2022-04-30 19:06:01.279 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - -
2022-04-30 19:06:01.281 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 19:06:01.285 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 19:06:01.293 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 19:06:01.294 +04:00 [INF] Route matched with {action = "GetRefreshTokens", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRefreshTokens(Int32) on controller API.Controllers.AuthController (API).
2022-04-30 19:06:05.599 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__id_0
2022-04-30 19:06:05.603 +04:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2022-04-30 19:06:05.604 +04:00 [INF] Executed action API.Controllers.AuthController.GetRefreshTokens (API) in 4307.6084ms
2022-04-30 19:06:05.605 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.GetRefreshTokens (API)'
2022-04-30 19:06:05.606 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/1/refresh-tokens - - - 204 0 - 4327.4387ms
2022-04-30 19:09:18.855 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 19:09:18.885 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 19:09:18.886 +04:00 [INF] Hosting environment: Development
2022-04-30 19:09:18.888 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 19:09:20.779 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 19:09:21.077 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 303.6305ms
2022-04-30 19:09:21.335 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 19:09:21.344 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 9.1047ms
2022-04-30 19:09:21.557 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 19:09:21.742 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 184.3694ms
2022-04-30 22:03:12.216 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:03:12.237 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:03:12.238 +04:00 [INF] Hosting environment: Development
2022-04-30 22:03:12.239 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:03:13.345 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:03:13.738 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 396.9773ms
2022-04-30 22:03:13.806 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:03:13.811 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.7055ms
2022-04-30 22:03:14.057 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:03:14.164 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 107.0563ms
2022-04-30 22:16:49.047 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:16:49.070 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:16:49.072 +04:00 [INF] Hosting environment: Development
2022-04-30 22:16:49.072 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:16:50.374 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:16:50.649 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 278.4431ms
2022-04-30 22:16:50.764 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:16:50.773 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 9.4283ms
2022-04-30 22:16:51.124 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:16:51.300 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.5167ms
2022-04-30 22:20:43.213 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:20:43.246 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:20:43.247 +04:00 [INF] Hosting environment: Development
2022-04-30 22:20:43.248 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:20:45.185 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:20:45.456 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 274.6658ms
2022-04-30 22:20:45.532 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:20:45.541 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 9.2852ms
2022-04-30 22:20:45.969 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:20:46.097 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 127.5404ms
2022-04-30 22:20:53.714 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-04-30 22:20:54.243 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 22:20:54.269 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 22:20:55.301 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 22:20:56.572 +04:00 [INF] Executed DbCommand (55ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 22:20:56.620 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 22:20:56.703 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 22:20:56.870 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 22:20:57.168 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-04-30 22:20:57.175 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 2900.4245ms
2022-04-30 22:20:57.177 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 22:20:57.181 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 200 - text/plain;+charset=utf-8 3467.6178ms
2022-04-30 22:39:21.522 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:39:21.544 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:39:21.545 +04:00 [INF] Hosting environment: Development
2022-04-30 22:39:21.546 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:39:23.620 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:39:23.901 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 284.1643ms
2022-04-30 22:39:23.983 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:39:23.990 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 7.5551ms
2022-04-30 22:39:24.433 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:39:24.561 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 128.3097ms
2022-04-30 22:51:07.631 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 22:51:07.652 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 22:51:07.654 +04:00 [INF] Hosting environment: Development
2022-04-30 22:51:07.655 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 22:51:08.768 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 22:51:09.048 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 284.6444ms
2022-04-30 22:51:09.105 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 22:51:09.108 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.8826ms
2022-04-30 22:51:09.428 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 22:51:09.523 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 95.9165ms
2022-04-30 22:51:27.910 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 207
2022-04-30 22:51:28.085 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 22:51:28.111 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-04-30 22:51:29.028 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 22:51:29.718 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString), @__model_Email_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE ([u].[UserName] = @__model_Username_0) AND ([u].[Email] = @__model_Email_1)
2022-04-30 22:51:29.766 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-04-30 22:51:29.840 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-04-30 22:51:29.998 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 22:51:30.161 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2022-04-30 22:51:30.168 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 2050.6805ms
2022-04-30 22:51:30.170 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-04-30 22:51:30.175 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 207 - 200 - text/plain;+charset=utf-8 2264.6860ms
2022-04-30 23:08:40.193 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 23:08:40.213 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 23:08:40.214 +04:00 [INF] Hosting environment: Development
2022-04-30 23:08:40.214 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 23:08:41.792 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 23:08:42.040 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 253.1982ms
2022-04-30 23:08:42.117 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 23:08:42.123 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 5.4841ms
2022-04-30 23:08:42.579 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 23:08:42.742 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.9994ms
2022-04-30 23:09:15.894 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 23:09:15.918 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 23:09:15.919 +04:00 [INF] Hosting environment: Development
2022-04-30 23:09:15.920 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 23:09:18.371 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 23:09:18.784 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 418.9849ms
2022-04-30 23:09:18.856 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 23:09:18.859 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.5243ms
2022-04-30 23:09:19.369 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 23:09:19.552 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 182.3444ms
2022-04-30 23:09:25.853 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-04-30 23:09:26.024 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:09:26.040 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-04-30 23:09:26.043 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-04-30 23:09:26.045 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-30 23:09:26.051 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 5.6541ms
2022-04-30 23:09:26.056 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:09:26.058 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 401 - application/json;+charset=utf-8 204.9277ms
2022-04-30 23:09:38.169 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 23:09:38.180 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 23:09:38.192 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 23:09:39.196 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:09:40.032 +04:00 [INF] Executed DbCommand (55ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 23:09:40.728 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 23:09:40.868 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 23:09:40.919 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 23:09:40.929 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2734.9654ms
2022-04-30 23:09:40.931 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 23:09:40.935 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2765.3708ms
2022-04-30 23:09:54.625 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-04-30 23:09:54.731 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:09:54.742 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 23:09:54.746 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:09:54.747 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-04-30 23:10:49.756 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] IS NOT NULL
2022-04-30 23:10:59.641 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-04-30 23:10:59.649 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 64897.5676ms
2022-04-30 23:10:59.650 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:10:59.651 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 200 0 - 65026.8860ms
2022-04-30 23:22:16.448 +04:00 [INF] Now listening on: http://localhost:5208
2022-04-30 23:22:16.482 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 23:22:16.483 +04:00 [INF] Hosting environment: Development
2022-04-30 23:22:16.484 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-04-30 23:22:19.282 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-04-30 23:22:19.558 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 282.7651ms
2022-04-30 23:22:19.629 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-04-30 23:22:19.635 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 5.7604ms
2022-04-30 23:22:19.981 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-04-30 23:22:20.165 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 183.6205ms
2022-04-30 23:22:29.598 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-04-30 23:22:29.769 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 23:22:29.797 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-04-30 23:22:30.763 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:22:31.554 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-04-30 23:22:31.873 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-04-30 23:22:32.016 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-04-30 23:22:32.069 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-04-30 23:22:32.084 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2280.6498ms
2022-04-30 23:22:32.086 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-04-30 23:22:32.090 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2492.1485ms
2022-04-30 23:22:43.801 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-04-30 23:22:43.912 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:22:43.921 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 23:22:43.925 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:22:43.935 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-04-30 23:22:49.845 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] IS NOT NULL
2022-04-30 23:22:49.883 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-04-30 23:22:49.884 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 5946.6686ms
2022-04-30 23:22:49.886 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:22:49.887 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 200 0 - 6086.0854ms
2022-04-30 23:23:04.576 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-04-30 23:23:04.588 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-04-30 23:23:04.597 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-04-30 23:23:04.605 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:23:04.607 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-04-30 23:23:15.950 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] IS NOT NULL
2022-04-30 23:23:55.685 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-04-30 23:23:55.688 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 51079.0215ms
2022-04-30 23:23:55.692 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-04-30 23:23:55.694 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 200 0 - 51117.2477ms
2022-04-30 23:26:09.372 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Authenticate/verify-email/F29F7537D891F1E0827F9068A8CB8061C7BD0AA2C07F56801BF942BD6086FD7B64096CA8177BA044C2728090D1556DD0D7739000FE6CCA188AFB48F9D3822FF8 - -
2022-04-30 23:26:09.378 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Authenticate/verify-email/F29F7537D891F1E0827F9068A8CB8061C7BD0AA2C07F56801BF942BD6086FD7B64096CA8177BA044C2728090D1556DD0D7739000FE6CCA188AFB48F9D3822FF8 - - - 404 0 - 6.1269ms
2022-05-01 00:02:38.114 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 00:02:38.142 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 00:02:38.143 +04:00 [INF] Hosting environment: Development
2022-05-01 00:02:38.143 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 00:02:40.857 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:02:41.244 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 391.9054ms
2022-05-01 00:02:41.409 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:02:41.417 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 7.6312ms
2022-05-01 00:02:42.080 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:02:42.257 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.9676ms
2022-05-01 00:02:49.133 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-05-01 00:02:49.323 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-05-01 00:02:49.345 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-05-01 00:02:49.349 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-05-01 00:02:49.352 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-01 00:02:49.365 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 9.1645ms
2022-05-01 00:02:49.368 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-05-01 00:02:49.371 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 401 - application/json;+charset=utf-8 238.0148ms
2022-05-01 00:02:53.028 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 00:02:53.041 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 00:02:53.057 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 00:02:54.102 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 00:02:54.950 +04:00 [INF] Executed DbCommand (59ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 00:02:55.283 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-01 00:02:55.429 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-01 00:02:55.482 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-01 00:02:55.493 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2433.4252ms
2022-05-01 00:02:55.495 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 00:02:55.499 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2471.1104ms
2022-05-01 00:03:03.530 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Auth/rame - -
2022-05-01 00:03:03.640 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 00:03:03.655 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-01 00:03:03.662 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.rame (API)'
2022-05-01 00:03:03.663 +04:00 [INF] Route matched with {action = "rame", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] rame() on controller API.Controllers.AuthController (API).
2022-05-01 00:03:09.769 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] IS NOT NULL
2022-05-01 00:03:09.812 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-05-01 00:03:09.820 +04:00 [INF] Executed action API.Controllers.AuthController.rame (API) in 6152.9192ms
2022-05-01 00:03:09.821 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.rame (API)'
2022-05-01 00:03:09.822 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Auth/rame - - - 200 0 - 6292.5017ms
2022-05-01 00:10:48.734 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 00:10:49.048 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-01 00:10:49.080 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-01 00:10:49.083 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-01 00:10:49.083 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-01 00:10:49.104 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-01 00:10:49.118 +04:00 [INF] No migrations were applied. The database is already up to date.
2022-05-01 00:18:52.865 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 00:18:53.175 +04:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-01 00:18:53.206 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-01 00:18:53.210 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-01 00:18:53.210 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-01 00:18:53.232 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-01 00:18:53.245 +04:00 [INF] No migrations were applied. The database is already up to date.
2022-05-01 00:55:26.194 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 00:55:26.213 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 00:55:26.214 +04:00 [INF] Hosting environment: Development
2022-05-01 00:55:26.215 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 00:55:26.607 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:55:26.827 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 225.9279ms
2022-05-01 00:55:26.891 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:55:26.893 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.3248ms
2022-05-01 00:55:27.159 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:55:27.270 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.7674ms
2022-05-01 00:56:31.467 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:56:31.475 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 8.4838ms
2022-05-01 00:56:31.506 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:56:31.508 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.1067ms
2022-05-01 00:56:31.841 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:56:31.843 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/favicon-32x32.png - -
2022-05-01 00:56:31.846 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 4.9849ms
2022-05-01 00:56:31.856 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-05-01 00:56:31.857 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/favicon-32x32.png - - - 200 628 image/png 14.2472ms
2022-05-01 00:57:19.426 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 00:57:19.455 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 00:57:19.457 +04:00 [INF] Hosting environment: Development
2022-05-01 00:57:19.457 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 00:57:21.092 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:57:21.379 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 294.3392ms
2022-05-01 00:57:21.447 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:57:21.451 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.0894ms
2022-05-01 00:57:21.736 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:57:21.864 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 127.3488ms
2022-05-01 00:59:04.304 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 00:59:04.329 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 00:59:04.330 +04:00 [INF] Hosting environment: Development
2022-05-01 00:59:04.331 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 00:59:05.951 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 00:59:06.233 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 286.7677ms
2022-05-01 00:59:06.290 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 00:59:06.292 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.5362ms
2022-05-01 00:59:06.633 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 00:59:06.748 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 115.1709ms
2022-05-01 01:01:03.704 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 01:01:03.728 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 01:01:03.730 +04:00 [INF] Hosting environment: Development
2022-05-01 01:01:03.731 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 01:01:05.708 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 01:01:06.115 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 420.2897ms
2022-05-01 01:01:06.204 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 01:01:06.207 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.0942ms
2022-05-01 01:01:06.571 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 01:01:06.695 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 123.5393ms
2022-05-01 01:15:28.012 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 01:15:28.039 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 01:15:28.040 +04:00 [INF] Hosting environment: Development
2022-05-01 01:15:28.041 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 01:15:33.348 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 01:15:33.630 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 287.1212ms
2022-05-01 01:15:33.688 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 01:15:33.692 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.9379ms
2022-05-01 01:15:33.978 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 01:15:34.090 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 112.3647ms
2022-05-01 14:58:23.890 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 14:58:23.912 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 14:58:23.913 +04:00 [INF] Hosting environment: Development
2022-05-01 14:58:23.914 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 14:58:25.350 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 14:58:25.699 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 353.5103ms
2022-05-01 14:58:25.752 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 14:58:25.756 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.3568ms
2022-05-01 14:58:26.007 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 14:58:26.101 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 94.8334ms
2022-05-01 14:59:17.465 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 14:59:17.487 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 14:59:17.488 +04:00 [INF] Hosting environment: Development
2022-05-01 14:59:17.489 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 14:59:19.472 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 14:59:19.709 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 239.7966ms
2022-05-01 14:59:19.784 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 14:59:19.788 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.7399ms
2022-05-01 14:59:20.126 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 14:59:20.222 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 95.8095ms
2022-05-01 15:43:04.688 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 15:43:05.826 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 15:43:21.125 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 15:43:21.126 +04:00 [INF] Hosting environment: Development
2022-05-01 15:43:21.127 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 15:43:21.326 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 15502.2868ms
2022-05-01 15:43:21.378 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 15:43:21.380 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.2761ms
2022-05-01 15:43:21.641 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 15:43:21.732 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.9179ms
2022-05-01 15:44:10.520 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 15:44:10.928 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 15:44:10.959 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 15:44:11.885 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 15:44:12.949 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 15:44:13.600 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-01 15:44:13.735 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-01 15:44:13.786 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-01 15:44:13.800 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2836.1124ms
2022-05-01 15:44:13.802 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 15:44:13.806 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 3286.5645ms
2022-05-01 19:23:49.482 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 19:23:49.505 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 19:23:49.506 +04:00 [INF] Hosting environment: Development
2022-05-01 19:23:49.507 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 19:23:50.436 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 19:23:50.772 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 341.2215ms
2022-05-01 19:23:50.829 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 19:23:50.832 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.4055ms
2022-05-01 19:23:51.162 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 19:23:51.284 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 122.2328ms
2022-05-01 23:16:24.221 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 23:16:24.244 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 23:16:24.244 +04:00 [INF] Hosting environment: Development
2022-05-01 23:16:24.245 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 23:16:26.542 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 23:16:26.782 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 246.0807ms
2022-05-01 23:16:26.838 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 23:16:26.840 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.5459ms
2022-05-01 23:16:27.108 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 23:16:27.236 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 127.3354ms
2022-05-01 23:16:30.391 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 23:16:30.560 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:16:30.585 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 23:16:31.658 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:16:32.453 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 23:16:32.700 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2106.2019ms
2022-05-01 23:16:32.706 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:16:33.218 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 400 - application/json 2826.5767ms
2022-05-01 23:21:10.554 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 23:21:10.579 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 23:21:10.580 +04:00 [INF] Hosting environment: Development
2022-05-01 23:21:10.580 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 23:21:12.027 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 23:21:12.284 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 260.5004ms
2022-05-01 23:21:12.337 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 23:21:12.341 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.6628ms
2022-05-01 23:21:12.641 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 23:21:12.767 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 126.7504ms
2022-05-01 23:21:20.600 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 23:21:20.817 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:21:20.845 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 23:21:21.746 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:21:22.510 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 23:21:22.732 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 1880.8605ms
2022-05-01 23:21:22.734 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:21:22.982 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 400 - application/json 2382.2827ms
2022-05-01 23:22:15.368 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 23:22:15.389 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 23:22:15.391 +04:00 [INF] Hosting environment: Development
2022-05-01 23:22:15.392 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 23:22:16.853 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 23:22:17.087 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 236.8308ms
2022-05-01 23:22:17.140 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 23:22:17.143 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.3963ms
2022-05-01 23:22:17.393 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 23:22:17.510 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 117.0193ms
2022-05-01 23:22:23.757 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 23:22:23.921 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:22:23.948 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 23:22:25.292 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:22:26.068 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 23:22:26.387 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-01 23:22:26.550 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-01 23:22:26.611 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-01 23:22:26.623 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2668.3485ms
2022-05-01 23:22:26.625 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:22:26.633 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2875.2762ms
2022-05-01 23:22:49.335 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string2&newRole=1 - 0
2022-05-01 23:22:49.448 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:22:49.457 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-01 23:22:49.467 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-01 23:22:49.472 +04:00 [INF] Route matched with {action = "ChangeUserRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeUserRole(Infrastructure.Entities.User.Dto.RoleChangeDto) on controller API.Controllers.AdminController (API).
2022-05-01 23:22:49.478 +04:00 [INF] Executed action API.Controllers.AdminController.ChangeUserRole (API) in 2.4749ms
2022-05-01 23:22:49.480 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-01 23:22:49.657 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string2&newRole=1 - 0 - 500 - application/json 322.2387ms
2022-05-01 23:26:38.122 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-01 23:26:38.145 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-01 23:26:38.146 +04:00 [INF] Hosting environment: Development
2022-05-01 23:26:38.147 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-01 23:26:39.193 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-01 23:26:39.439 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 251.5757ms
2022-05-01 23:26:39.508 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-01 23:26:39.512 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.5433ms
2022-05-01 23:26:39.774 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-01 23:26:39.970 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 196.0435ms
2022-05-01 23:26:44.492 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-01 23:26:44.669 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:26:44.697 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-01 23:26:45.663 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:26:46.432 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-01 23:26:46.742 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-01 23:26:46.881 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-01 23:26:46.929 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-01 23:26:46.940 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2237.3851ms
2022-05-01 23:26:46.942 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-01 23:26:46.948 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2455.2800ms
2022-05-01 23:27:05.327 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string2&newRole=1 - 0
2022-05-01 23:27:05.436 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-01 23:27:05.446 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-01 23:27:05.453 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-01 23:27:05.460 +04:00 [INF] Route matched with {action = "ChangeUserRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeUserRole(Infrastructure.Entities.User.Dto.RoleChangeDto) on controller API.Controllers.AdminController (API).
2022-05-01 23:27:05.481 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[UserName] = @__model_UserName_0
2022-05-01 23:27:05.493 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [dbo].[User] SET [Role] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-05-01 23:27:05.504 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Boolean'.
2022-05-01 23:27:05.506 +04:00 [INF] Executed action API.Controllers.AdminController.ChangeUserRole (API) in 43.2393ms
2022-05-01 23:27:05.507 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-01 23:27:05.509 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string2&newRole=1 - 0 - 200 - application/json;+charset=utf-8 181.3862ms
2022-05-02 00:08:21.978 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-02 00:08:22.248 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-02 00:08:22.251 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-02 00:08:22.252 +04:00 [INF] Hosting environment: Development
2022-05-02 00:08:22.253 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-02 00:08:23.271 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-02 00:08:23.515 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 248.7083ms
2022-05-02 00:08:23.570 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-02 00:08:23.573 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6636ms
2022-05-02 00:08:23.837 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-02 00:08:23.951 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 113.8521ms
2022-05-02 00:08:55.608 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-02 00:08:55.864 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-02 00:08:55.868 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-02 00:08:55.869 +04:00 [INF] Hosting environment: Development
2022-05-02 00:08:55.869 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-02 00:08:57.229 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-02 00:08:57.506 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 279.9599ms
2022-05-02 00:08:57.575 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-02 00:08:57.578 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.7533ms
2022-05-02 00:08:57.830 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-02 00:08:57.993 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.1475ms
2022-05-02 13:40:05.746 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-02 13:40:06.331 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-02 13:40:06.336 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-02 13:40:06.337 +04:00 [INF] Hosting environment: Development
2022-05-02 13:40:06.337 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-02 13:40:07.192 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-02 13:40:07.716 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 528.2398ms
2022-05-02 13:40:07.787 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-02 13:40:07.790 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6655ms
2022-05-02 13:40:07.940 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-02 13:40:08.048 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 108.6514ms
2022-05-02 13:44:26.123 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-02 13:44:26.326 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-02 13:44:26.330 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-02 13:44:26.331 +04:00 [INF] Hosting environment: Development
2022-05-02 13:44:26.332 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-02 13:44:27.478 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-02 13:44:27.699 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 224.2406ms
2022-05-02 13:44:27.750 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-02 13:44:27.753 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.4396ms
2022-05-02 13:44:28.031 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-02 13:44:28.136 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 105.1391ms
2022-05-02 13:44:52.195 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-02 13:44:52.424 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-02 13:44:52.428 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-02 13:44:52.429 +04:00 [INF] Hosting environment: Development
2022-05-02 13:44:52.430 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-02 13:44:53.985 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-02 13:44:54.243 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 261.8333ms
2022-05-02 13:44:54.314 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-02 13:44:54.319 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.4065ms
2022-05-02 13:44:54.725 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-02 13:44:54.870 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 144.9199ms
2022-05-03 14:43:26.044 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-03 14:43:26.565 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-03 14:43:26.568 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-03 14:43:26.569 +04:00 [INF] Hosting environment: Development
2022-05-03 14:43:26.570 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-03 14:43:27.391 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger - -
2022-05-03 14:43:27.645 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger - - - 301 0 - 259.9190ms
2022-05-03 14:43:27.695 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-03 14:43:28.047 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui.css - -
2022-05-03 14:43:28.050 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 354.6408ms
2022-05-03 14:43:28.068 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-05-03 14:43:28.069 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui.css - - - 200 143632 text/css 22.2789ms
2022-05-03 14:43:28.102 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui-bundle.js - -
2022-05-03 14:43:28.102 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui-standalone-preset.js - -
2022-05-03 14:43:28.105 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-03 14:43:28.134 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 29.3830ms
2022-05-03 14:43:28.174 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-05-03 14:43:28.179 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 76.1891ms
2022-05-03 14:43:28.191 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-05-03 14:43:28.193 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 90.2547ms
2022-05-03 14:43:28.442 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-03 14:43:28.561 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.6392ms
2022-05-03 14:43:32.303 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-05-03 14:43:32.738 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-03 14:43:32.764 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-05-03 14:43:32.889 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-03 14:43:32.897 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 127.2014ms
2022-05-03 14:43:32.900 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-03 14:43:32.903 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 200 - application/json;+charset=utf-8 599.5893ms
2022-05-04 02:31:58.069 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 02:31:58.578 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 02:31:58.584 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 02:31:58.585 +04:00 [INF] Hosting environment: Development
2022-05-04 02:31:58.587 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 02:31:59.798 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger - -
2022-05-04 02:32:00.021 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger - - - 301 0 - 227.3799ms
2022-05-04 02:32:00.068 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 02:32:00.343 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui-bundle.js - -
2022-05-04 02:32:00.344 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 276.7048ms
2022-05-04 02:32:00.344 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui-standalone-preset.js - -
2022-05-04 02:32:00.349 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui.css - -
2022-05-04 02:32:00.416 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-05-04 02:32:00.416 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-05-04 02:32:00.420 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 76.8300ms
2022-05-04 02:32:00.422 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui.css - - - 200 143632 text/css 73.0729ms
2022-05-04 02:32:00.428 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-05-04 02:32:00.429 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 85.8782ms
2022-05-04 02:32:00.442 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 02:32:00.444 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.2123ms
2022-05-04 02:32:00.939 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 02:32:01.068 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 129.2335ms
2022-05-04 02:32:13.637 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-05-04 02:32:14.078 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 02:32:14.109 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-05-04 02:32:14.236 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-04 02:32:14.244 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 128.4532ms
2022-05-04 02:32:14.248 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 02:32:14.249 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 200 - application/json;+charset=utf-8 612.5991ms
2022-05-04 02:32:21.756 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-05-04 02:32:21.769 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 02:32:21.770 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-05-04 02:32:21.773 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-04 02:32:21.778 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 5.4833ms
2022-05-04 02:32:21.779 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 02:32:21.780 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 200 - application/json;+charset=utf-8 23.9330ms
2022-05-04 02:33:35.771 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 02:33:36.140 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 02:33:36.163 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 02:33:36.168 +04:00 [INF] Hosting environment: Development
2022-05-04 02:33:36.169 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 02:33:38.528 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 02:33:38.775 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 252.9217ms
2022-05-04 02:33:38.834 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 02:33:38.836 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.3820ms
2022-05-04 02:33:39.188 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 02:33:39.308 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 120.7400ms
2022-05-04 02:33:43.946 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-05-04 02:33:44.149 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 02:33:44.178 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-05-04 02:34:43.184 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 02:34:43.486 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 02:34:43.491 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 02:34:43.491 +04:00 [INF] Hosting environment: Development
2022-05-04 02:34:43.492 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 02:34:45.948 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 02:34:46.195 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 253.2551ms
2022-05-04 02:34:46.247 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 02:34:46.249 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6632ms
2022-05-04 02:34:46.486 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 02:34:46.602 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 116.8620ms
2022-05-04 02:36:13.349 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 02:36:13.581 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 02:36:13.585 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 02:36:13.586 +04:00 [INF] Hosting environment: Development
2022-05-04 02:36:13.587 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 02:36:15.339 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 02:36:15.603 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 269.6369ms
2022-05-04 02:36:15.659 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 02:36:15.663 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.4472ms
2022-05-04 02:36:15.966 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 02:36:16.077 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.2216ms
2022-05-04 02:36:23.660 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198
2022-05-04 02:36:23.831 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 02:36:23.858 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-05-04 02:36:23.980 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-05-04 02:36:23.988 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 124.3934ms
2022-05-04 02:36:23.993 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 02:36:23.995 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 198 - 400 - application/problem+json;+charset=utf-8 335.5922ms
2022-05-04 05:24:07.631 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 05:24:07.874 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 05:24:07.878 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 05:24:07.879 +04:00 [INF] Hosting environment: Development
2022-05-04 05:24:07.880 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 05:24:08.884 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 05:24:09.195 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 318.6973ms
2022-05-04 05:24:09.260 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 05:24:09.263 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.3579ms
2022-05-04 05:24:09.427 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 05:24:09.622 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 194.8792ms
2022-05-04 05:24:39.901 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 05:24:40.157 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 05:24:40.161 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 05:24:40.162 +04:00 [INF] Hosting environment: Development
2022-05-04 05:24:40.163 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 05:24:41.457 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 05:24:41.704 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 253.8843ms
2022-05-04 05:24:41.757 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 05:24:41.759 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6731ms
2022-05-04 05:24:41.997 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 05:24:42.137 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 140.2619ms
2022-05-04 05:25:16.501 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 05:25:16.896 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 05:25:16.922 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 05:25:17.854 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 05:25:18.964 +04:00 [INF] Executed DbCommand (57ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 05:25:19.653 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 05:25:19.833 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (DbType = Int32), @p5='?' (DbType = Int32), @p4='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [RefreshToken] SET [UserEntityId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;

UPDATE [RefreshToken] SET [UserEntityId] = @p2
WHERE [Id] = @p3;
SELECT @@ROWCOUNT;

UPDATE [RefreshToken] SET [UserEntityId] = @p4
WHERE [Id] = @p5;
SELECT @@ROWCOUNT;

INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 05:25:19.883 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 05:25:19.895 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2967.3121ms
2022-05-04 05:25:19.897 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 05:25:19.902 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 3402.0361ms
2022-05-04 05:26:02.645 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 203
2022-05-04 05:26:02.786 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 05:26:02.796 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 05:26:02.799 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 05:26:02.803 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-05-04 05:26:06.918 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Username_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[UserName] = @__model_Username_0
2022-05-04 05:26:06.927 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Email] = @__model_Email_0
2022-05-04 05:26:06.950 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
2022-05-04 05:26:06.960 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[VerificationToken] = @__token_0
2022-05-04 05:26:07.003 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 128), @p6='?' (Size = 128), @p7='?' (Size = 64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (Size = 128) (DbType = AnsiString), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[User] ([Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
SELECT [Id]
FROM [dbo].[User]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 05:26:07.011 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-04 05:26:07.013 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 4207.3879ms
2022-05-04 05:26:07.014 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 05:26:07.016 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 203 - 200 - application/json;+charset=utf-8 4371.1224ms
2022-05-04 05:26:21.898 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 200
2022-05-04 05:26:21.909 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 05:26:21.915 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 05:26:21.918 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 05:26:21.920 +04:00 [INF] Route matched with {action = "Registrer", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Registrer(Infrastructure.Entities.User.Dto.RegistrerDto) on controller API.Controllers.AuthController (API).
2022-05-04 05:26:21.926 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-05-04 05:26:21.929 +04:00 [INF] Executed action API.Controllers.AuthController.Registrer (API) in 6.8074ms
2022-05-04 05:26:21.930 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Registrer (API)'
2022-05-04 05:26:21.931 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Registrer application/json 200 - 400 - application/problem+json;+charset=utf-8 33.1222ms
2022-05-04 05:26:33.507 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string3&newRole=Admin - 0
2022-05-04 05:26:33.509 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 05:26:33.513 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 05:26:33.516 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-04 05:26:33.521 +04:00 [INF] Route matched with {action = "ChangeUserRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeUserRole(Infrastructure.Entities.User.Dto.RoleChangeDto) on controller API.Controllers.AdminController (API).
2022-05-04 05:26:33.527 +04:00 [INF] Executed action API.Controllers.AdminController.ChangeUserRole (API) in 3.3101ms
2022-05-04 05:26:33.529 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.ChangeUserRole (API)'
2022-05-04 05:26:33.749 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/ChangeUserRole?UserName=string3&newRole=Admin - 0 - 500 - application/json 241.4619ms
2022-05-04 05:27:26.008 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 05:27:26.283 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 05:27:26.286 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 05:27:26.287 +04:00 [INF] Hosting environment: Development
2022-05-04 05:27:26.288 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 05:27:27.579 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 05:27:27.853 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 279.4511ms
2022-05-04 05:27:27.914 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 05:27:27.918 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.1985ms
2022-05-04 05:27:28.076 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 05:27:28.241 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 164.2442ms
2022-05-04 05:32:48.709 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 05:34:30.289 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 05:34:30.534 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 05:34:30.538 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 05:34:30.539 +04:00 [INF] Hosting environment: Development
2022-05-04 05:34:30.540 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 05:34:32.639 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 05:34:33.047 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 411.4495ms
2022-05-04 05:34:33.104 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 05:34:33.107 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.5461ms
2022-05-04 05:34:33.566 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 05:34:33.696 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 129.9946ms
2022-05-04 18:52:22.990 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:52:33.542 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:52:33.920 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-04 18:52:33.948 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-04 18:52:33.951 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-04 18:52:33.951 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-04 18:52:33.969 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-04 18:52:33.984 +04:00 [INF] Applying migration '20220504145223_test3'.
2022-05-04 18:52:34.039 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-04T18:52:23.0325356+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-04 18:52:34.040 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-04T18:52:23.0325366+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-04 18:52:34.041 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-04T18:52:23.0325565+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-04 18:52:34.041 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-04T18:52:23.0325566+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-04 18:52:34.043 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'DQwBc/HgDeIlqHBqZ6P+YpxAC+SGp92V10vClw+QcTs=', [Salt] = N'clJB8Xfe6RTVwBytu5wzcg==', [Verified] = '2022-05-04T18:52:23.0470568+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-04 18:52:34.044 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220504145223_test3', N'6.0.3');
2022-05-04 18:52:47.851 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 18:52:48.929 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 18:52:48.933 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 18:52:48.934 +04:00 [INF] Hosting environment: Development
2022-05-04 18:52:48.935 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 18:52:49.552 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 18:52:50.029 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 481.5494ms
2022-05-04 18:52:50.086 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 18:52:50.090 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.4744ms
2022-05-04 18:52:50.425 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 18:52:50.620 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 194.9606ms
2022-05-04 18:53:06.382 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 18:53:06.921 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 18:53:06.953 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 18:53:08.190 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:53:09.563 +04:00 [INF] Executed DbCommand (55ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 18:53:10.259 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 18:53:10.402 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 18:53:10.452 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 18:53:10.464 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 3505.8215ms
2022-05-04 18:53:10.466 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 18:53:10.471 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 4088.5664ms
2022-05-04 18:54:53.648 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 18:54:53.878 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 18:54:53.882 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 18:54:53.883 +04:00 [INF] Hosting environment: Development
2022-05-04 18:54:53.884 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 18:54:55.338 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 18:54:55.721 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 393.7288ms
2022-05-04 18:54:55.884 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 18:54:55.912 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 28.0508ms
2022-05-04 18:54:56.307 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 18:54:56.508 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 201.6957ms
2022-05-04 18:55:13.936 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=Georgia - 0
2022-05-04 18:55:15.087 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:55:15.722 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 18:55:15.820 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-04 18:55:15.843 +04:00 [INF] Route matched with {action = "AddCountry", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCountry(Infrastructure.Entities.Country.Dtos.AddCountryDto) on controller API.Controllers.AdminController (API).
2022-05-04 18:55:15.985 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Country] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 18:55:16.104 +04:00 [INF] Executed action API.Controllers.AdminController.AddCountry (API) in 254.3044ms
2022-05-04 18:55:16.106 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-04 18:55:16.406 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=Georgia - 0 - 400 - application/json 2469.9098ms
2022-05-04 18:55:23.763 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=USA - 0
2022-05-04 18:55:23.806 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:55:23.811 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 18:55:23.815 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-04 18:55:23.816 +04:00 [INF] Route matched with {action = "AddCountry", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCountry(Infrastructure.Entities.Country.Dtos.AddCountryDto) on controller API.Controllers.AdminController (API).
2022-05-04 18:55:23.824 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Country] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 18:55:23.885 +04:00 [INF] Executed action API.Controllers.AdminController.AddCountry (API) in 66.7374ms
2022-05-04 18:55:23.887 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-04 18:55:24.004 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=USA - 0 - 400 - application/json 240.2432ms
2022-05-04 18:55:45.344 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=USA - 0
2022-05-04 18:55:45.357 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:55:45.361 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 18:55:45.364 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-04 18:55:45.365 +04:00 [INF] Route matched with {action = "AddCountry", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCountry(Infrastructure.Entities.Country.Dtos.AddCountryDto) on controller API.Controllers.AdminController (API).
2022-05-04 18:55:54.244 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Country] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 18:56:25.060 +04:00 [INF] Executed action API.Controllers.AdminController.AddCountry (API) in 39692.588ms
2022-05-04 18:56:25.061 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-04 18:56:25.173 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=USA - 0 - 400 - application/json 39829.1402ms
2022-05-04 18:57:46.182 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:57:51.800 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:57:52.104 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-04 18:57:52.132 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-04 18:57:52.136 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-04 18:57:52.136 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-04 18:57:52.158 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-04 18:57:52.173 +04:00 [INF] Applying migration '20220504145746_test4'.
2022-05-04 18:57:52.255 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Publisher] (
    [Id] int NOT NULL IDENTITY,
    [PublisherName] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Publisher] PRIMARY KEY ([Id])
);
2022-05-04 18:57:52.257 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [videogameEntities] (
    [Id] int NOT NULL IDENTITY,
    [VideogameName] nvarchar(128) NOT NULL,
    [Price] float NOT NULL,
    [OldPrice] float NULL,
    [PublicsherId] int NOT NULL,
    [Description] nvarchar(2000) NOT NULL,
    [PlatformId] int NOT NULL,
    [ImageUrl] nvarchar(100) NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_videogameEntities] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_videogameEntities_Publisher_PublicsherId] FOREIGN KEY ([PublicsherId]) REFERENCES [dbo].[Publisher] ([Id]) ON DELETE CASCADE
);
2022-05-04 18:57:52.258 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-04T18:57:46.2243281+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-04 18:57:52.258 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-04T18:57:46.2243298+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-04 18:57:52.258 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-04T18:57:46.2243472+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-04 18:57:52.258 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-04T18:57:46.2243473+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-04 18:57:52.259 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'oG3GeBUroiA568Yk3BAUPPxajHwhomVw+g6nuIWr/wU=', [Salt] = N'iMfhCd++JrwLMr9nCuqeTQ==', [Verified] = '2022-05-04T18:57:46.2399405+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-04 18:57:52.260 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_videogameEntities_PublicsherId] ON [videogameEntities] ([PublicsherId]);
2022-05-04 18:57:52.261 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220504145746_test4', N'6.0.3');
2022-05-04 18:57:57.024 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 18:57:57.267 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 18:57:57.271 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 18:57:57.272 +04:00 [INF] Hosting environment: Development
2022-05-04 18:57:57.273 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 18:57:59.186 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 18:57:59.608 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 426.4253ms
2022-05-04 18:57:59.736 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 18:57:59.755 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 18.0182ms
2022-05-04 18:58:00.114 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 18:58:00.292 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 178.4712ms
2022-05-04 18:58:06.344 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 18:58:06.515 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 18:58:06.541 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 18:58:07.515 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:58:08.283 +04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 18:58:08.586 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 18:58:08.720 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 18:58:08.768 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 18:58:08.780 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2233.1888ms
2022-05-04 18:58:08.782 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 18:58:08.787 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2442.9051ms
2022-05-04 18:58:27.558 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=Georgia - 0
2022-05-04 18:58:27.661 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:58:27.669 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 18:58:27.674 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-04 18:58:27.679 +04:00 [INF] Route matched with {action = "AddCountry", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCountry(Infrastructure.Entities.Country.Dtos.AddCountryDto) on controller API.Controllers.AdminController (API).
2022-05-04 18:58:30.273 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Country] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 18:58:53.698 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 18:58:53.911 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 18:58:53.914 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 18:58:53.915 +04:00 [INF] Hosting environment: Development
2022-05-04 18:58:53.916 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 18:58:54.691 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 18:58:55.149 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 463.9825ms
2022-05-04 18:58:55.205 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 18:58:55.209 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.8262ms
2022-05-04 18:58:55.608 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 18:58:55.726 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 118.7370ms
2022-05-04 18:59:13.734 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 18:59:13.961 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 18:59:13.966 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 18:59:13.967 +04:00 [INF] Hosting environment: Development
2022-05-04 18:59:13.968 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 18:59:15.135 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 18:59:15.525 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 18:59:15.526 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 387.4430ms
2022-05-04 18:59:15.539 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 13.7968ms
2022-05-04 18:59:15.968 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 18:59:16.118 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 150.7128ms
2022-05-04 18:59:28.753 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=Georgia - 0
2022-05-04 18:59:29.912 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:59:30.532 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 18:59:30.621 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-04 18:59:30.643 +04:00 [INF] Route matched with {action = "AddCountry", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCountry(Infrastructure.Entities.Country.Dtos.AddCountryDto) on controller API.Controllers.AdminController (API).
2022-05-04 18:59:33.783 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__model_CountryName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Country] AS [c]
        WHERE [c].[Name] = @__model_CountryName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 18:59:35.961 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Country] ([DateCreated], [DateUpdated], [Name])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Country]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 18:59:36.010 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-04 18:59:36.019 +04:00 [INF] Executed action API.Controllers.AdminController.AddCountry (API) in 5369.9177ms
2022-05-04 18:59:36.020 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddCountry (API)'
2022-05-04 18:59:36.024 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddCountry?CountryName=Georgia - 0 - 200 - application/json;+charset=utf-8 7271.5372ms
2022-05-04 18:59:57.911 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCity?CityName=Tbilisi&CityCountryName=Georgia - 0
2022-05-04 18:59:57.958 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 18:59:57.964 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 18:59:57.968 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCity (API)'
2022-05-04 18:59:57.972 +04:00 [INF] Route matched with {action = "AddCity", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCity(Infrastructure.Entities.City.Dtos.AddCityDto) on controller API.Controllers.AdminController (API).
2022-05-04 18:59:57.994 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_CityName_0='?' (Size = 65)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[City] AS [c]
        WHERE [c].[Name] = @__model_CityName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 18:59:58.003 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_CityCountryName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[DateCreated], [c].[DateUpdated], [c].[Name]
FROM [dbo].[Country] AS [c]
WHERE [c].[Name] = @__model_CityCountryName_0
2022-05-04 18:59:58.038 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 65)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[City] ([CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [dbo].[City]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 18:59:58.044 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-04 18:59:58.046 +04:00 [INF] Executed action API.Controllers.AdminController.AddCity (API) in 70.7097ms
2022-05-04 18:59:58.047 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddCity (API)'
2022-05-04 18:59:58.049 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddCity?CityName=Tbilisi&CityCountryName=Georgia - 0 - 200 - application/json;+charset=utf-8 137.1308ms
2022-05-04 19:00:03.720 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:00:03.734 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:00:03.740 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:00:03.742 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:00:03.746 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:00:03.753 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-04 19:00:03.754 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 6.5371ms
2022-05-04 19:00:03.755 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:00:03.756 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 400 - text/plain;+charset=utf-8 35.7576ms
2022-05-04 19:00:13.682 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCountries - -
2022-05-04 19:00:13.684 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:00:13.695 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:00:13.699 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCountries (API)'
2022-05-04 19:00:13.704 +04:00 [INF] Route matched with {action = "GetCountries", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountries() on controller API.Controllers.AdminController (API).
2022-05-04 19:00:13.706 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-04 19:00:13.707 +04:00 [INF] Executed action API.Controllers.AdminController.GetCountries (API) in 1.3414ms
2022-05-04 19:00:13.708 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCountries (API)'
2022-05-04 19:00:13.709 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCountries - - - 400 - text/plain;+charset=utf-8 27.1563ms
2022-05-04 19:00:53.446 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:00:53.452 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:00:53.457 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:00:53.466 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:00:53.467 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:00:53.468 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-04 19:00:53.469 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 1.3935ms
2022-05-04 19:00:53.470 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:00:53.472 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 400 - text/plain;+charset=utf-8 25.8728ms
2022-05-04 19:01:27.448 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:01:27.455 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:01:27.460 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:01:27.468 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:01:27.469 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:01:27.472 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-04 19:01:27.474 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 1.8487ms
2022-05-04 19:01:27.475 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:01:27.476 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 400 - text/plain;+charset=utf-8 27.9851ms
2022-05-04 19:01:28.206 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:01:28.208 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:01:28.211 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:01:28.224 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:01:28.225 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:01:28.226 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-04 19:01:28.227 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 1.2321ms
2022-05-04 19:01:28.228 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:01:28.229 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 400 - text/plain;+charset=utf-8 23.0949ms
2022-05-04 19:02:09.871 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:02:10.145 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:02:10.148 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:02:10.149 +04:00 [INF] Hosting environment: Development
2022-05-04 19:02:10.150 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:02:10.880 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:02:11.116 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 239.1162ms
2022-05-04 19:02:11.186 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:02:11.189 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.4779ms
2022-05-04 19:02:11.358 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:02:11.566 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.5486ms
2022-05-04 19:02:18.093 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:02:18.249 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:02:18.275 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:02:19.186 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:02:19.927 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:02:20.258 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:02:20.395 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:02:20.445 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:02:20.456 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2175.1699ms
2022-05-04 19:02:20.458 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:02:20.465 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2372.1558ms
2022-05-04 19:02:33.372 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:02:33.472 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:02:33.480 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:02:33.485 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:02:33.488 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:02:33.492 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-04 19:02:33.493 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 3.2909ms
2022-05-04 19:02:33.494 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:02:33.496 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 400 - text/plain;+charset=utf-8 123.7019ms
2022-05-04 19:09:38.507 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:09:38.740 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:09:38.744 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:09:38.745 +04:00 [INF] Hosting environment: Development
2022-05-04 19:09:38.746 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:09:39.834 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:09:40.139 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 312.3559ms
2022-05-04 19:09:40.204 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:09:40.211 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 6.0616ms
2022-05-04 19:09:40.520 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:09:40.657 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 137.0848ms
2022-05-04 19:09:45.077 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:09:45.233 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:09:45.259 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:09:46.165 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:09:46.884 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:09:47.180 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:09:47.314 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:09:47.366 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:09:47.379 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2114.1447ms
2022-05-04 19:09:47.380 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:09:47.385 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2307.5901ms
2022-05-04 19:09:58.801 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:09:58.901 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:09:58.910 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:09:58.914 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:09:58.918 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:09:58.925 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-04 19:09:58.927 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 4.3742ms
2022-05-04 19:09:58.928 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:09:58.931 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 400 - text/plain;+charset=utf-8 130.0129ms
2022-05-04 19:10:12.606 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:10:12.618 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:10:12.625 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:10:12.627 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:10:12.629 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:10:12.632 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-04 19:10:12.644 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 13.3415ms
2022-05-04 19:10:12.645 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:10:12.646 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 400 - text/plain;+charset=utf-8 40.1358ms
2022-05-04 19:11:06.538 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:11:06.758 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:11:06.762 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:11:06.762 +04:00 [INF] Hosting environment: Development
2022-05-04 19:11:06.763 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:11:07.566 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:11:07.822 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 261.0036ms
2022-05-04 19:11:07.875 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:11:07.878 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.0263ms
2022-05-04 19:11:08.108 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:11:08.251 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 142.9956ms
2022-05-04 19:11:16.607 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:11:16.768 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:11:16.794 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:11:17.718 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:11:18.447 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:11:18.750 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:11:18.880 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:11:18.929 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:11:18.940 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2139.2352ms
2022-05-04 19:11:18.941 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:11:18.946 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2338.5342ms
2022-05-04 19:11:29.728 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:11:29.796 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:11:29.800 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:11:29.803 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-05-04 19:11:29.805 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-04 19:11:29.807 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 4.7771ms
2022-05-04 19:11:29.808 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:11:29.809 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 401 - application/json;+charset=utf-8 81.6386ms
2022-05-04 19:11:35.650 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:11:35.673 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:11:35.675 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:11:35.714 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:11:35.721 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:11:35.742 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:11:35.748 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:11:35.753 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:11:35.754 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 77.1919ms
2022-05-04 19:11:35.756 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:11:35.757 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 106.8814ms
2022-05-04 19:11:46.495 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:11:46.559 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:11:46.567 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:11:46.570 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:11:46.571 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:11:48.923 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CountryId], [c].[DateCreated], [c].[DateUpdated], [c].[Name]
FROM [dbo].[City] AS [c]
2022-05-04 19:11:48.958 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-05-04 19:11:48.960 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 2386.6541ms
2022-05-04 19:11:48.961 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:11:48.962 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 200 0 - 2467.1140ms
2022-05-04 19:16:31.046 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:16:31.274 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:16:31.277 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:16:31.278 +04:00 [INF] Hosting environment: Development
2022-05-04 19:16:31.279 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:16:32.162 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:16:32.520 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 362.2836ms
2022-05-04 19:16:32.614 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:16:32.619 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 5.0656ms
2022-05-04 19:16:32.998 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:16:33.196 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 198.0524ms
2022-05-04 19:17:14.396 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:17:14.553 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:17:14.579 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:17:15.527 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:17:16.271 +04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:17:16.582 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:17:16.723 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:17:16.771 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:17:16.782 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2197.2026ms
2022-05-04 19:17:16.784 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:17:16.788 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2392.4144ms
2022-05-04 19:17:36.762 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:17:36.863 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:17:36.872 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:17:36.878 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:17:36.881 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:17:36.895 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CountryId], [c].[DateCreated], [c].[DateUpdated], [c].[Name]
FROM [dbo].[City] AS [c]
2022-05-04 19:17:36.926 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.City.Dtos.GetCityDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-04 19:17:36.929 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 45.919ms
2022-05-04 19:17:36.930 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:17:36.931 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 200 - application/json;+charset=utf-8 169.2354ms
2022-05-04 19:17:40.753 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCountries - -
2022-05-04 19:17:40.765 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:17:40.771 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:17:40.774 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCountries (API)'
2022-05-04 19:17:40.777 +04:00 [INF] Route matched with {action = "GetCountries", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountries() on controller API.Controllers.AdminController (API).
2022-05-04 19:17:40.793 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[DateCreated], [c].[DateUpdated], [c].[Name]
FROM [dbo].[Country] AS [c]
2022-05-04 19:17:40.803 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.Country.Dtos.GetCountryDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-04 19:17:40.806 +04:00 [INF] Executed action API.Controllers.AdminController.GetCountries (API) in 27.3189ms
2022-05-04 19:17:40.807 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCountries (API)'
2022-05-04 19:17:40.808 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCountries - - - 200 - application/json;+charset=utf-8 55.0848ms
2022-05-04 19:22:44.370 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:22:44.591 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:22:44.595 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:22:44.596 +04:00 [INF] Hosting environment: Development
2022-05-04 19:22:44.596 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:22:45.120 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:22:45.359 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 242.2327ms
2022-05-04 19:22:45.410 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:22:45.413 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.8491ms
2022-05-04 19:22:45.663 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:22:45.893 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 229.8047ms
2022-05-04 19:23:37.750 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:23:37.975 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:23:37.978 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:23:37.979 +04:00 [INF] Hosting environment: Development
2022-05-04 19:23:37.980 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:23:39.421 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:23:39.665 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 248.4941ms
2022-05-04 19:23:39.722 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:23:39.725 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.2076ms
2022-05-04 19:23:40.016 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:23:40.168 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 152.1352ms
2022-05-04 19:24:32.319 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:24:32.549 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:24:32.553 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:24:32.554 +04:00 [INF] Hosting environment: Development
2022-05-04 19:24:32.554 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:24:33.290 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:24:33.522 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 235.3433ms
2022-05-04 19:24:33.576 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:24:33.579 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.9442ms
2022-05-04 19:24:33.846 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:24:34.058 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 212.5560ms
2022-05-04 19:24:48.249 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:24:48.404 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:24:48.433 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:24:49.368 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:24:50.104 +04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:24:50.406 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:24:50.542 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:24:50.590 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:24:50.603 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2163.3987ms
2022-05-04 19:24:50.605 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:24:50.609 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2359.5519ms
2022-05-04 19:25:35.346 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=godo%20game%20&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundarypvwxiwaY5P5ksGaO 8698
2022-05-04 19:25:35.411 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:25:35.419 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:25:35.422 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-05-04 19:25:35.425 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-04 19:25:35.427 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 5.649ms
2022-05-04 19:25:35.429 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:25:35.430 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=godo%20game%20&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundarypvwxiwaY5P5ksGaO 8698 - 401 - application/json;+charset=utf-8 84.8702ms
2022-05-04 19:25:50.009 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=godo%20game%20&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryfDvI0Men2Cl7jk4l 8698
2022-05-04 19:25:50.103 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:25:50.112 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:25:50.118 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:25:50.120 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:25:50.248 +04:00 [INF] Executed DbCommand (94ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:25:50.290 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 168.4409ms
2022-05-04 19:25:50.292 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:25:50.429 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=godo%20game%20&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryfDvI0Men2Cl7jk4l 8698 - 400 - application/json 420.3972ms
2022-05-04 19:26:49.541 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:26:49.767 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:26:49.771 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:26:49.772 +04:00 [INF] Hosting environment: Development
2022-05-04 19:26:49.773 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:26:50.739 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:26:51.150 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 423.0304ms
2022-05-04 19:26:51.225 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:26:51.232 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 6.3221ms
2022-05-04 19:26:51.622 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:26:51.786 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 163.6774ms
2022-05-04 19:27:39.886 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:27:40.098 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:27:40.103 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:27:40.104 +04:00 [INF] Hosting environment: Development
2022-05-04 19:27:40.104 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:27:41.906 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:27:42.141 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 239.2328ms
2022-05-04 19:27:42.208 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:27:42.212 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.4855ms
2022-05-04 19:27:42.521 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:27:42.727 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 205.9468ms
2022-05-04 19:27:52.433 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:27:52.595 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:27:52.621 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:27:53.555 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:27:54.301 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:27:54.604 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:27:54.742 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:27:54.790 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:27:54.801 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2173.4716ms
2022-05-04 19:27:54.803 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:27:54.807 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2373.8744ms
2022-05-04 19:28:21.081 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryX3b9hkWp3tnIrFoc 8698
2022-05-04 19:28:21.218 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:28:21.226 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:28:21.229 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:28:21.235 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:28:42.969 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:28:43.201 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:28:43.205 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:28:43.206 +04:00 [INF] Hosting environment: Development
2022-05-04 19:28:43.207 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:28:44.281 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:28:44.635 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 361.2696ms
2022-05-04 19:28:44.708 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:28:44.712 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.4501ms
2022-05-04 19:28:45.041 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:28:45.241 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 199.3239ms
2022-05-04 19:29:06.801 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundarynVAjyVUksiGoi3QJ 8698
2022-05-04 19:29:07.968 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:29:08.596 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:29:08.686 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:29:08.709 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:29:10.001 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:29:15.106 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 6388.994ms
2022-05-04 19:29:15.108 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:29:15.327 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundarynVAjyVUksiGoi3QJ 8698 - 400 - application/json 8525.8873ms
2022-05-04 19:29:53.521 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:29:53.737 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:29:53.742 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:29:53.743 +04:00 [INF] Hosting environment: Development
2022-05-04 19:29:53.744 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:29:54.486 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:29:54.736 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 255.2109ms
2022-05-04 19:29:54.799 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:29:54.802 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.0603ms
2022-05-04 19:29:55.249 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:29:55.407 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 157.9800ms
2022-05-04 19:29:58.858 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:29:59.021 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:29:59.047 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:29:59.977 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:30:00.757 +04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:30:01.064 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:30:01.202 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:30:01.254 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:30:01.266 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2212.9584ms
2022-05-04 19:30:01.268 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:30:01.273 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2414.6333ms
2022-05-04 19:30:27.653 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20agme&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryzpX6135wEIO43Jpq 70132
2022-05-04 19:30:27.757 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:30:27.766 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:30:27.769 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:30:27.775 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:30:30.065 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:30:30.834 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 3057.2336ms
2022-05-04 19:30:30.836 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:30:31.063 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20agme&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryzpX6135wEIO43Jpq 70132 - 500 - application/json 3410.7043ms
2022-05-04 19:30:41.611 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20agme&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryqa5LTq3caGHNQITY 70132
2022-05-04 19:30:41.624 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:30:41.629 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:30:41.632 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:30:41.633 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:30:59.972 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:35:26.578 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:35:26.806 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:35:26.810 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:35:26.811 +04:00 [INF] Hosting environment: Development
2022-05-04 19:35:26.812 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:35:27.661 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:35:27.904 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 248.7778ms
2022-05-04 19:35:27.990 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:35:27.994 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.1854ms
2022-05-04 19:35:28.327 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:35:28.505 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 178.0292ms
2022-05-04 19:35:41.871 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:35:42.033 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:35:42.058 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:35:43.033 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:35:43.775 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:35:44.090 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:35:44.235 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:35:44.309 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:35:44.322 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2257.7122ms
2022-05-04 19:35:44.323 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:35:44.327 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2456.3528ms
2022-05-04 19:36:13.470 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryzAr6DyAdA3BWHA1i 8698
2022-05-04 19:36:13.606 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:36:13.613 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:36:13.617 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:36:13.625 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:36:16.785 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:36:17.765 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 4138.8691ms
2022-05-04 19:36:17.767 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:36:17.990 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryzAr6DyAdA3BWHA1i 8698 - 500 - application/json 4519.4876ms
2022-05-04 19:36:56.804 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:36:57.054 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:36:57.058 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:36:57.059 +04:00 [INF] Hosting environment: Development
2022-05-04 19:36:57.061 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:36:58.159 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:36:58.436 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 281.7983ms
2022-05-04 19:36:58.493 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:36:58.495 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.5037ms
2022-05-04 19:36:58.744 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:36:58.927 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 182.8437ms
2022-05-04 19:37:23.514 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=gdo%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryz9IRJ9jRVzLx7hYM 8698
2022-05-04 19:37:24.695 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:37:25.350 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:37:25.438 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:37:25.464 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:37:28.058 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:37:28.618 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 3147.2274ms
2022-05-04 19:37:28.621 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:37:28.844 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=gdo%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryz9IRJ9jRVzLx7hYM 8698 - 500 - application/json 5330.1684ms
2022-05-04 19:37:35.349 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=gdo%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundarys4oP1O7NgG7AttFG 8698
2022-05-04 19:37:35.397 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:37:35.404 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:37:35.411 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:37:35.412 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:37:38.605 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:41:36.544 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:43:13.037 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:43:13.269 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:43:13.273 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:43:13.274 +04:00 [INF] Hosting environment: Development
2022-05-04 19:43:13.275 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:43:14.055 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:43:14.355 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 303.5047ms
2022-05-04 19:43:14.436 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:43:14.448 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 11.8582ms
2022-05-04 19:43:14.902 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:43:15.103 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 200.4266ms
2022-05-04 19:43:20.845 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:43:21.018 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:43:21.043 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:43:22.021 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:43:22.842 +04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:43:23.188 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:43:23.332 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:43:23.389 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:43:23.401 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2352.1071ms
2022-05-04 19:43:23.403 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:43:23.407 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2562.3364ms
2022-05-04 19:44:16.602 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryAS1spuz6Wfe02sam 8698
2022-05-04 19:44:16.706 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:44:16.715 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:44:16.718 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:44:16.723 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:44:16.757 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:44:16.870 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 144.8424ms
2022-05-04 19:44:16.871 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:44:17.138 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryAS1spuz6Wfe02sam 8698 - 500 - application/json 535.8258ms
2022-05-04 19:44:43.299 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:44:43.529 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:44:43.533 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:44:43.534 +04:00 [INF] Hosting environment: Development
2022-05-04 19:44:43.535 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:44:45.064 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:44:45.310 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 251.4413ms
2022-05-04 19:44:45.377 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:44:45.381 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.4575ms
2022-05-04 19:44:45.657 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:44:45.883 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 225.1507ms
2022-05-04 19:45:01.969 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryaPhcdHLXFhks0s1f 8698
2022-05-04 19:45:03.135 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:45:03.794 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:45:03.885 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:45:03.907 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:45:04.070 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:45:04.273 +04:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 2000), @p3='?' (Size = 100), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Double), @p7='?' (DbType = Int32), @p8='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameEntities] ([DateCreated], [DateUpdated], [Description], [ImageUrl], [OldPrice], [PlatformId], [Price], [PublicsherId], [VideogameName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [videogameEntities]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:45:04.407 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameEntities_Publisher_PublicsherId". The conflict occurred in database "GamesStore", table "dbo.Publisher", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d4122288-2103-491d-a323-433902eb3c1f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameEntities_Publisher_PublicsherId". The conflict occurred in database "GamesStore", table "dbo.Publisher", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d4122288-2103-491d-a323-433902eb3c1f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-04 19:45:04.642 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 728.3939ms
2022-05-04 19:45:04.644 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:45:04.922 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryaPhcdHLXFhks0s1f 8698 - 500 - application/json 2953.0598ms
2022-05-04 19:45:11.201 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryhjiaNh4VomWSD8Bg 8698
2022-05-04 19:45:11.246 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:45:11.253 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:45:11.257 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:45:11.259 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:45:11.269 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:45:15.907 +04:00 [ERR] Failed executing DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 2000), @p3='?' (Size = 100), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Double), @p7='?' (DbType = Int32), @p8='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameEntities] ([DateCreated], [DateUpdated], [Description], [ImageUrl], [OldPrice], [PlatformId], [Price], [PublicsherId], [VideogameName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [videogameEntities]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:45:15.913 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameEntities_Publisher_PublicsherId". The conflict occurred in database "GamesStore", table "dbo.Publisher", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d4122288-2103-491d-a323-433902eb3c1f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameEntities_Publisher_PublicsherId". The conflict occurred in database "GamesStore", table "dbo.Publisher", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d4122288-2103-491d-a323-433902eb3c1f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-04 19:45:17.763 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 6500.0065ms
2022-05-04 19:45:17.764 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:45:26.930 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryhjiaNh4VomWSD8Bg 8698 - 500 - application/json 15729.0120ms
2022-05-04 19:46:01.103 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddPublisher?PublisherName=valve - 0
2022-05-04 19:46:01.117 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:46:01.122 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:46:01.125 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddPublisher (API)'
2022-05-04 19:46:01.131 +04:00 [INF] Route matched with {action = "AddPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPublisher(Infrastructure.Entities.Publisher.Dto.AddPublisherDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:46:01.144 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_PublisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Publisher] AS [p]
        WHERE [p].[PublisherName] = @__model_PublisherName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:46:01.159 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Publisher] ([DateCreated], [DateUpdated], [PublisherName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Publisher]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:46:01.202 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-04 19:46:01.207 +04:00 [INF] Executed action API.Controllers.AdminController.AddPublisher (API) in 73.6719ms
2022-05-04 19:46:01.208 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddPublisher (API)'
2022-05-04 19:46:01.210 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddPublisher?PublisherName=valve - 0 - 200 - application/json;+charset=utf-8 108.3362ms
2022-05-04 19:46:27.387 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryxrme2ADKAoR72a4f 8698
2022-05-04 19:46:27.392 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:46:27.395 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:46:27.399 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:46:27.400 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-04 19:46:27.405 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameEntities] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:46:27.412 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 2000), @p3='?' (Size = 100), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Double), @p7='?' (DbType = Int32), @p8='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameEntities] ([DateCreated], [DateUpdated], [Description], [ImageUrl], [OldPrice], [PlatformId], [Price], [PublicsherId], [VideogameName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [videogameEntities]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:46:27.419 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-04 19:46:27.421 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 18.5725ms
2022-05-04 19:46:27.422 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-04 19:46:27.423 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryxrme2ADKAoR72a4f 8698 - 200 - application/json;+charset=utf-8 35.9569ms
2022-05-04 19:47:04.595 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - -
2022-05-04 19:47:04.598 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:47:04.606 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:47:04.615 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-04 19:47:04.618 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(System.String) on controller API.Controllers.AdminController (API).
2022-05-04 19:47:04.629 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__publisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE [p].[PublisherName] = @__publisherName_0
2022-05-04 19:47:04.720 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__publisher_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM [dbo].[Publisher] AS [p]
LEFT JOIN [videogameEntities] AS [v] ON [p].[Id] = [v].[PublicsherId]
WHERE [p].[Id] = @__publisher_Id_0
ORDER BY [p].[Id]
2022-05-04 19:47:04.744 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.Publisher.Dto.GetGamesByPublisherDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-04 19:47:04.747 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 126.1009ms
2022-05-04 19:47:04.748 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-04 19:47:04.749 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - - - 200 - application/json;+charset=utf-8 153.9370ms
2022-05-04 19:47:22.875 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCountries - -
2022-05-04 19:47:22.877 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:47:22.881 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:47:22.884 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCountries (API)'
2022-05-04 19:47:22.887 +04:00 [INF] Route matched with {action = "GetCountries", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountries() on controller API.Controllers.AdminController (API).
2022-05-04 19:47:22.897 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[DateCreated], [c].[DateUpdated], [c].[Name]
FROM [dbo].[Country] AS [c]
2022-05-04 19:47:22.911 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.Country.Dtos.GetCountryDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-04 19:47:22.914 +04:00 [INF] Executed action API.Controllers.AdminController.GetCountries (API) in 24.712ms
2022-05-04 19:47:22.915 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCountries (API)'
2022-05-04 19:47:22.916 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCountries - - - 200 - application/json;+charset=utf-8 40.9455ms
2022-05-04 19:47:27.061 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - -
2022-05-04 19:47:27.062 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:47:27.066 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:47:27.069 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:47:27.072 +04:00 [INF] Route matched with {action = "GetCities", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller API.Controllers.AdminController (API).
2022-05-04 19:47:27.080 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CountryId], [c].[DateCreated], [c].[DateUpdated], [c].[Name]
FROM [dbo].[City] AS [c]
2022-05-04 19:47:27.098 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.City.Dtos.GetCityDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-04 19:47:27.101 +04:00 [INF] Executed action API.Controllers.AdminController.GetCities (API) in 26.5919ms
2022-05-04 19:47:27.102 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCities (API)'
2022-05-04 19:47:27.104 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCities - - - 200 - application/json;+charset=utf-8 42.8572ms
2022-05-04 19:47:34.665 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetPublisers - -
2022-05-04 19:47:34.667 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:47:34.670 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:47:34.673 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetPublisers (API)'
2022-05-04 19:47:34.676 +04:00 [INF] Route matched with {action = "GetPublisers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPublisers() on controller API.Controllers.AdminController (API).
2022-05-04 19:47:34.682 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
2022-05-04 19:47:34.688 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.Publisher.Dto.GetPublisherDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-04 19:47:34.689 +04:00 [INF] Executed action API.Controllers.AdminController.GetPublisers (API) in 11.438ms
2022-05-04 19:47:34.691 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetPublisers (API)'
2022-05-04 19:47:34.692 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetPublisers - - - 200 - application/json;+charset=utf-8 27.1613ms
2022-05-04 19:52:55.589 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 19:52:55.832 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 19:52:55.836 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 19:52:55.837 +04:00 [INF] Hosting environment: Development
2022-05-04 19:52:55.837 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 19:52:58.042 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 19:52:58.284 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 245.3632ms
2022-05-04 19:52:58.340 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 19:52:58.342 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6320ms
2022-05-04 19:52:58.607 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 19:52:58.806 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 199.2690ms
2022-05-04 19:53:10.459 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 19:53:10.628 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:53:10.655 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 19:53:11.636 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:53:12.439 +04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 19:53:12.778 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 19:53:12.944 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 19:53:12.996 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 19:53:13.012 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2348.9772ms
2022-05-04 19:53:13.016 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 19:53:13.025 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2565.7473ms
2022-05-04 19:53:43.040 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - -
2022-05-04 19:53:43.147 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 19:53:43.155 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 19:53:43.159 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-04 19:53:43.164 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(System.String) on controller API.Controllers.AdminController (API).
2022-05-04 19:53:43.181 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__publisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE [p].[PublisherName] = @__publisherName_0
2022-05-04 19:53:43.213 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__publisher_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM [dbo].[Publisher] AS [p]
LEFT JOIN [videogameEntities] AS [v] ON [p].[Id] = [v].[PublicsherId]
WHERE [p].[Id] = @__publisher_Id_0
ORDER BY [p].[Id]
2022-05-04 19:53:43.253 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.Publisher.Dto.GetGamesByPublisherDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-04 19:53:43.256 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 90.3598ms
2022-05-04 19:53:43.258 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-04 19:53:43.259 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - - - 200 - application/json;+charset=utf-8 219.0904ms
2022-05-04 20:01:41.217 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 20:01:41.477 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 20:01:41.482 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 20:01:41.483 +04:00 [INF] Hosting environment: Development
2022-05-04 20:01:41.483 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 20:01:42.891 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 20:01:43.354 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 475.5051ms
2022-05-04 20:01:43.438 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 20:01:43.451 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 12.4609ms
2022-05-04 20:01:43.944 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 20:01:44.152 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 208.6074ms
2022-05-04 20:01:49.063 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 20:01:49.245 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 20:01:49.275 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 20:01:50.313 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 20:01:51.151 +04:00 [INF] Executed DbCommand (56ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 20:01:51.500 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 20:01:51.645 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 20:01:51.699 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 20:01:51.713 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2430.7324ms
2022-05-04 20:01:51.714 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 20:01:51.718 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2655.6274ms
2022-05-04 20:02:18.756 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - -
2022-05-04 20:02:18.866 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 20:02:18.877 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 20:02:18.881 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-04 20:02:18.885 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(System.String) on controller API.Controllers.AdminController (API).
2022-05-04 20:02:18.904 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__publisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE [p].[PublisherName] = @__publisherName_0
2022-05-04 20:02:18.936 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__publisher_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM [dbo].[Publisher] AS [p]
LEFT JOIN [videogameEntities] AS [v] ON [p].[Id] = [v].[PublicsherId]
WHERE [p].[Id] = @__publisher_Id_0
ORDER BY [p].[Id]
2022-05-04 20:02:18.982 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.Publisher.Dto.GetGamesByPublisherDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-04 20:02:18.985 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 98.2239ms
2022-05-04 20:02:18.987 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-04 20:02:18.989 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - - - 200 - application/json;+charset=utf-8 232.2611ms
2022-05-04 20:12:00.782 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-04 20:12:01.788 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-04 20:12:01.794 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-04 20:12:01.795 +04:00 [INF] Hosting environment: Development
2022-05-04 20:12:01.796 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-04 20:12:03.488 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-04 20:12:03.830 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 346.4955ms
2022-05-04 20:12:03.896 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-04 20:12:03.901 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.9091ms
2022-05-04 20:12:04.342 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-04 20:12:04.579 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 236.3918ms
2022-05-04 20:12:11.366 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-04 20:12:11.543 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 20:12:11.575 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-04 20:12:12.730 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 20:12:13.815 +04:00 [INF] Executed DbCommand (64ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-04 20:12:14.386 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-04 20:12:14.680 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-04 20:12:14.778 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-04 20:12:14.797 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 3214.2737ms
2022-05-04 20:12:14.800 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-04 20:12:14.806 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 3439.5747ms
2022-05-04 20:12:43.638 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - -
2022-05-04 20:12:43.756 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-04 20:12:43.766 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-04 20:12:43.769 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-04 20:12:43.775 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(System.String) on controller API.Controllers.AdminController (API).
2022-05-04 20:12:43.795 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__publisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE [p].[PublisherName] = @__publisherName_0
2022-05-04 20:12:43.822 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__publisher_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[PublisherName], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM (
    SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
    FROM [dbo].[Publisher] AS [p]
    WHERE [p].[Id] = @__publisher_Id_0
) AS [t]
LEFT JOIN [videogameEntities] AS [v] ON [t].[Id] = [v].[PublicsherId]
ORDER BY [t].[Id]
2022-05-04 20:12:43.874 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.Publisher.Dto.GetGamesByPublisherDto'.
2022-05-04 20:12:43.883 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 104.5696ms
2022-05-04 20:12:43.886 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-04 20:12:43.887 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - - - 200 - application/json;+charset=utf-8 252.0434ms
2022-05-05 04:57:31.541 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-05 04:57:31.723 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-05 04:57:31.727 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-05 04:57:31.728 +04:00 [INF] Hosting environment: Development
2022-05-05 04:57:31.728 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-05 04:57:33.178 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-05 04:57:33.433 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 260.0005ms
2022-05-05 04:57:33.493 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-05 04:57:33.496 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6036ms
2022-05-05 04:57:33.786 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-05 04:57:33.926 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 139.3979ms
2022-05-05 04:57:44.033 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-05 04:57:44.188 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 04:57:44.213 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-05 04:57:45.205 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 04:57:46.012 +04:00 [INF] Executed DbCommand (55ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-05 04:57:46.347 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 04:57:46.487 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 04:57:46.539 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-05 04:57:46.549 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2331.4131ms
2022-05-05 04:57:46.553 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 04:57:46.559 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2526.1520ms
2022-05-05 04:58:28.135 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/UpdateGame?VideoGameName=dota&Price=2&Description=goodgame multipart/form-data;+boundary=----WebKitFormBoundaryAdLRhQxzA2ZQpFy1 91977
2022-05-05 04:58:28.241 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 04:58:28.251 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 04:58:28.254 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.UpdateGame (API)'
2022-05-05 04:58:28.259 +04:00 [INF] Route matched with {action = "UpdateGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGame(Infrastructure.Entities.Videogame.Dtos.UpdateGameDto) on controller API.Controllers.AdminController (API).
2022-05-05 04:58:28.307 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM [videogameEntities] AS [v]
WHERE [v].[VideogameName] = @__name_0
2022-05-05 04:58:28.368 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 2000), @p1='?' (Size = 100), @p2='?' (DbType = Double), @p3='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [videogameEntities] SET [Description] = @p0, [ImageUrl] = @p1, [OldPrice] = @p2, [Price] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-05-05 04:58:28.376 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-05 04:58:28.378 +04:00 [INF] Executed action API.Controllers.AdminController.UpdateGame (API) in 116.0297ms
2022-05-05 04:58:28.379 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.UpdateGame (API)'
2022-05-05 04:58:28.381 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/UpdateGame?VideoGameName=dota&Price=2&Description=goodgame multipart/form-data;+boundary=----WebKitFormBoundaryAdLRhQxzA2ZQpFy1 91977 - 200 - application/json;+charset=utf-8 246.1089ms
2022-05-05 04:59:00.070 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/UpdateGame?VideoGameName=dota&Price=2&Description=goodgame multipart/form-data;+boundary=----WebKitFormBoundary1bhenn2UfED24sGe 8698
2022-05-05 04:59:00.086 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 04:59:00.092 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 04:59:00.095 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.UpdateGame (API)'
2022-05-05 04:59:00.096 +04:00 [INF] Route matched with {action = "UpdateGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGame(Infrastructure.Entities.Videogame.Dtos.UpdateGameDto) on controller API.Controllers.AdminController (API).
2022-05-05 04:59:00.113 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM [videogameEntities] AS [v]
WHERE [v].[VideogameName] = @__name_0
2022-05-05 04:59:00.119 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [videogameEntities] SET [ImageUrl] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;
2022-05-05 04:59:00.125 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-05 04:59:00.126 +04:00 [INF] Executed action API.Controllers.AdminController.UpdateGame (API) in 28.615ms
2022-05-05 04:59:00.127 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.UpdateGame (API)'
2022-05-05 04:59:00.128 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/UpdateGame?VideoGameName=dota&Price=2&Description=goodgame multipart/form-data;+boundary=----WebKitFormBoundary1bhenn2UfED24sGe 8698 - 200 - application/json;+charset=utf-8 59.5223ms
2022-05-05 05:05:14.101 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-05 05:05:14.265 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-05 05:05:14.268 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-05 05:05:14.269 +04:00 [INF] Hosting environment: Development
2022-05-05 05:05:14.270 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-05 05:05:16.193 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-05 05:05:16.427 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 237.1907ms
2022-05-05 05:05:16.487 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-05 05:05:16.492 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.8834ms
2022-05-05 05:05:16.791 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-05 05:05:16.997 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 205.8026ms
2022-05-05 05:06:45.889 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:06:55.528 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:06:55.811 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-05 05:06:55.838 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-05 05:06:55.841 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-05 05:06:55.841 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-05 05:06:55.856 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-05 05:06:55.870 +04:00 [INF] Applying migration '20220505010646_test5'.
2022-05-05 05:06:55.948 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [categoryEntities] (
    [Id] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(max) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_categoryEntities] PRIMARY KEY ([Id])
);
2022-05-05 05:06:55.951 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [videogameCategoryEntities] (
    [VideogameId] int NOT NULL,
    [CategoryId] int NOT NULL,
    [GameId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_videogameCategoryEntities] PRIMARY KEY ([VideogameId], [CategoryId]),
    CONSTRAINT [FK_videogameCategoryEntities_categoryEntities_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [categoryEntities] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_videogameCategoryEntities_videogameEntities_GameId] FOREIGN KEY ([GameId]) REFERENCES [videogameEntities] ([Id]) ON DELETE CASCADE
);
2022-05-05 05:06:55.953 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-05T05:06:45.9372447+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-05 05:06:55.954 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-05T05:06:45.9372461+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-05 05:06:55.955 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-05T05:06:45.9372634+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-05 05:06:55.955 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-05T05:06:45.9372636+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-05 05:06:55.957 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'KR7+xsQH7SfmSLgmU0z8EC34GDybfzDVBYED2ordodE=', [Salt] = N'bMYjftkZrs8pSli235gQBA==', [Verified] = '2022-05-05T05:06:45.9538928+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-05 05:06:55.958 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_videogameCategoryEntities_CategoryId] ON [videogameCategoryEntities] ([CategoryId]);
2022-05-05 05:06:55.958 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_videogameCategoryEntities_GameId] ON [videogameCategoryEntities] ([GameId]);
2022-05-05 05:06:55.959 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220505010646_test5', N'6.0.3');
2022-05-05 05:21:21.230 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-05 05:21:21.429 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-05 05:21:21.434 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-05 05:21:21.435 +04:00 [INF] Hosting environment: Development
2022-05-05 05:21:21.436 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-05 05:21:23.119 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-05 05:21:23.415 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 299.0905ms
2022-05-05 05:21:23.514 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-05 05:21:23.527 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 12.9243ms
2022-05-05 05:21:23.896 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-05 05:21:24.040 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 144.5535ms
2022-05-05 05:21:46.880 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetAll - -
2022-05-05 05:21:47.023 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetAllAsync (API)'
2022-05-05 05:21:47.050 +04:00 [INF] Route matched with {action = "GetAll", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAsync(Infrastructure.Paging.QueryParams) on controller API.Controllers.AdminController (API).
2022-05-05 05:21:47.053 +04:00 [INF] Authorization failed for the request at filter 'API.Attributes.AuthorizeAttribute'.
2022-05-05 05:21:47.055 +04:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-05 05:21:47.061 +04:00 [INF] Executed action API.Controllers.AdminController.GetAllAsync (API) in 5.2467ms
2022-05-05 05:21:47.065 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetAllAsync (API)'
2022-05-05 05:21:47.068 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetAll - - - 401 - application/json;+charset=utf-8 187.6866ms
2022-05-05 05:21:52.259 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-05 05:21:52.271 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 05:21:52.275 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-05 05:21:53.252 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:21:54.015 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-05 05:21:54.338 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:21:54.478 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 05:21:54.526 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-05 05:21:54.533 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2252.9445ms
2022-05-05 05:21:54.534 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 05:21:54.537 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2278.9281ms
2022-05-05 05:22:04.327 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetAll - -
2022-05-05 05:22:04.433 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:22:04.441 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:22:04.446 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetAllAsync (API)'
2022-05-05 05:22:04.447 +04:00 [INF] Route matched with {action = "GetAll", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAsync(Infrastructure.Paging.QueryParams) on controller API.Controllers.AdminController (API).
2022-05-05 05:22:04.472 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [videogameEntities] AS [v]
2022-05-05 05:22:04.487 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:22:04.489 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:22:04.498 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM [videogameEntities] AS [v]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-05-05 05:22:04.547 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-05 05:22:04.557 +04:00 [INF] Executed action API.Controllers.AdminController.GetAllAsync (API) in 108.6108ms
2022-05-05 05:22:04.559 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetAllAsync (API)'
2022-05-05 05:22:04.560 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetAll - - - 200 - application/json;+charset=utf-8 232.9025ms
2022-05-05 05:22:13.335 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGames - -
2022-05-05 05:22:13.345 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:22:13.355 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:22:13.359 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.SearchGames (API)'
2022-05-05 05:22:13.363 +04:00 [INF] Route matched with {action = "SearchGames", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchGames(Infrastructure.Entities.Videogame.Dtos.VideoGameParameters) on controller API.Controllers.AdminController (API).
2022-05-05 05:22:13.399 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__videoGameParameters_SearchTerm_0='?' (Size = 128), @__p_1='?' (DbType = Double), @__p_2='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [videogameEntities] AS [v]
WHERE (((@__videoGameParameters_SearchTerm_0 LIKE N'') OR (CHARINDEX(@__videoGameParameters_SearchTerm_0, [v].[VideogameName]) > 0)) AND ([v].[Price] > @__p_1)) AND ([v].[Price] < @__p_2)
2022-05-05 05:22:13.403 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:22:13.404 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:22:13.410 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__videoGameParameters_SearchTerm_0='?' (Size = 128), @__p_1='?' (DbType = Double), @__p_2='?' (DbType = Double), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM [videogameEntities] AS [v]
WHERE (((@__videoGameParameters_SearchTerm_0 LIKE N'') OR (CHARINDEX(@__videoGameParameters_SearchTerm_0, [v].[VideogameName]) > 0)) AND ([v].[Price] > @__p_1)) AND ([v].[Price] < @__p_2)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2022-05-05 05:22:13.416 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-05 05:22:13.417 +04:00 [INF] Executed action API.Controllers.AdminController.SearchGames (API) in 51.3703ms
2022-05-05 05:22:13.418 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.SearchGames (API)'
2022-05-05 05:22:13.419 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGames - - - 200 - application/json;+charset=utf-8 84.2257ms
2022-05-05 05:22:19.039 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGames?CategoryId=1 - -
2022-05-05 05:22:19.041 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:22:19.047 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:22:19.050 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.SearchGames (API)'
2022-05-05 05:22:19.051 +04:00 [INF] Route matched with {action = "SearchGames", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchGames(Infrastructure.Entities.Videogame.Dtos.VideoGameParameters) on controller API.Controllers.AdminController (API).
2022-05-05 05:22:19.070 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__videoGameParameters_SearchTerm_0='?' (Size = 128), @__p_1='?' (DbType = Double), @__p_2='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [videogameEntities] AS [v]
WHERE (((@__videoGameParameters_SearchTerm_0 LIKE N'') OR (CHARINDEX(@__videoGameParameters_SearchTerm_0, [v].[VideogameName]) > 0)) AND ([v].[Price] > @__p_1)) AND ([v].[Price] < @__p_2)
2022-05-05 05:22:19.074 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:22:19.076 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:22:19.092 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__videoGameParameters_SearchTerm_0='?' (Size = 128), @__p_1='?' (DbType = Double), @__p_2='?' (DbType = Double), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32), @__videoGameParameters_CategoryId_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[Description], [t].[ImageUrl], [t].[OldPrice], [t].[PlatformId], [t].[Price], [t].[PublicsherId], [t].[VideogameName], [t0].[VideogameId], [t0].[CategoryId], [t0].[DateCreated], [t0].[DateUpdated], [t0].[GameId]
FROM (
    SELECT [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
    FROM [videogameEntities] AS [v]
    WHERE (((@__videoGameParameters_SearchTerm_0 LIKE N'') OR (CHARINDEX(@__videoGameParameters_SearchTerm_0, [v].[VideogameName]) > 0)) AND ([v].[Price] > @__p_1)) AND ([v].[Price] < @__p_2)
    ORDER BY (SELECT 1)
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [v0].[VideogameId], [v0].[CategoryId], [v0].[DateCreated], [v0].[DateUpdated], [v0].[GameId]
    FROM [videogameCategoryEntities] AS [v0]
    WHERE [v0].[CategoryId] = @__videoGameParameters_CategoryId_3
) AS [t0] ON [t].[Id] = [t0].[GameId]
ORDER BY [t].[Id], [t0].[VideogameId]
2022-05-05 05:22:19.096 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-05 05:22:19.098 +04:00 [INF] Executed action API.Controllers.AdminController.SearchGames (API) in 44.4887ms
2022-05-05 05:22:19.099 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.SearchGames (API)'
2022-05-05 05:22:19.101 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGames?CategoryId=1 - - - 200 - application/json;+charset=utf-8 61.3739ms
2022-05-05 05:22:22.861 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGames?CategoryId=2 - -
2022-05-05 05:22:22.862 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:22:22.865 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:22:22.868 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.SearchGames (API)'
2022-05-05 05:22:22.869 +04:00 [INF] Route matched with {action = "SearchGames", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchGames(Infrastructure.Entities.Videogame.Dtos.VideoGameParameters) on controller API.Controllers.AdminController (API).
2022-05-05 05:22:22.873 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__videoGameParameters_SearchTerm_0='?' (Size = 128), @__p_1='?' (DbType = Double), @__p_2='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [videogameEntities] AS [v]
WHERE (((@__videoGameParameters_SearchTerm_0 LIKE N'') OR (CHARINDEX(@__videoGameParameters_SearchTerm_0, [v].[VideogameName]) > 0)) AND ([v].[Price] > @__p_1)) AND ([v].[Price] < @__p_2)
2022-05-05 05:22:22.880 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__videoGameParameters_SearchTerm_0='?' (Size = 128), @__p_1='?' (DbType = Double), @__p_2='?' (DbType = Double), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32), @__videoGameParameters_CategoryId_3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[Description], [t].[ImageUrl], [t].[OldPrice], [t].[PlatformId], [t].[Price], [t].[PublicsherId], [t].[VideogameName], [t0].[VideogameId], [t0].[CategoryId], [t0].[DateCreated], [t0].[DateUpdated], [t0].[GameId]
FROM (
    SELECT [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
    FROM [videogameEntities] AS [v]
    WHERE (((@__videoGameParameters_SearchTerm_0 LIKE N'') OR (CHARINDEX(@__videoGameParameters_SearchTerm_0, [v].[VideogameName]) > 0)) AND ([v].[Price] > @__p_1)) AND ([v].[Price] < @__p_2)
    ORDER BY (SELECT 1)
    OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [v0].[VideogameId], [v0].[CategoryId], [v0].[DateCreated], [v0].[DateUpdated], [v0].[GameId]
    FROM [videogameCategoryEntities] AS [v0]
    WHERE [v0].[CategoryId] = @__videoGameParameters_CategoryId_3
) AS [t0] ON [t].[Id] = [t0].[GameId]
ORDER BY [t].[Id], [t0].[VideogameId]
2022-05-05 05:22:22.883 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-05 05:22:22.885 +04:00 [INF] Executed action API.Controllers.AdminController.SearchGames (API) in 13.8844ms
2022-05-05 05:22:22.886 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.SearchGames (API)'
2022-05-05 05:22:22.887 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGames?CategoryId=2 - - - 200 - application/json;+charset=utf-8 26.6454ms
2022-05-05 05:34:47.215 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-05 05:34:47.378 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-05 05:34:47.382 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-05 05:34:47.389 +04:00 [INF] Hosting environment: Development
2022-05-05 05:34:47.395 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-05 05:34:49.940 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-05 05:34:50.163 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 226.7810ms
2022-05-05 05:34:50.216 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-05 05:34:50.220 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 4.0280ms
2022-05-05 05:34:50.475 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-05 05:34:50.661 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 186.6047ms
2022-05-05 05:34:55.429 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-05 05:34:55.574 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 05:34:55.600 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-05 05:34:56.648 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:34:57.534 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-05 05:34:57.885 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:34:58.040 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 05:34:58.094 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-05 05:34:58.108 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2501.513ms
2022-05-05 05:34:58.110 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 05:34:58.116 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2686.5639ms
2022-05-05 05:35:11.948 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGames - -
2022-05-05 05:35:12.053 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:35:12.067 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:35:12.070 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.SearchGames (API)'
2022-05-05 05:35:12.079 +04:00 [INF] Route matched with {action = "SearchGames", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchGames(Infrastructure.Entities.Videogame.Dtos.VideoGameParameters) on controller API.Controllers.AdminController (API).
2022-05-05 05:35:12.112 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__videoGameParameters_SearchTerm_0='?' (Size = 128), @__p_1='?' (DbType = Double), @__p_2='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [videogameEntities] AS [v]
WHERE (((@__videoGameParameters_SearchTerm_0 LIKE N'') OR (CHARINDEX(@__videoGameParameters_SearchTerm_0, [v].[VideogameName]) > 0)) AND ([v].[Price] > @__p_1)) AND ([v].[Price] < @__p_2)
2022-05-05 05:35:12.125 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:35:12.127 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:35:12.134 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__videoGameParameters_SearchTerm_0='?' (Size = 128), @__p_1='?' (DbType = Double), @__p_2='?' (DbType = Double), @__p_3='?' (DbType = Int32), @__p_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM [videogameEntities] AS [v]
WHERE (((@__videoGameParameters_SearchTerm_0 LIKE N'') OR (CHARINDEX(@__videoGameParameters_SearchTerm_0, [v].[VideogameName]) > 0)) AND ([v].[Price] > @__p_1)) AND ([v].[Price] < @__p_2)
ORDER BY (SELECT 1)
OFFSET @__p_3 ROWS FETCH NEXT @__p_4 ROWS ONLY
2022-05-05 05:35:12.178 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-05 05:35:12.187 +04:00 [INF] Executed action API.Controllers.AdminController.SearchGames (API) in 106.433ms
2022-05-05 05:35:12.189 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.SearchGames (API)'
2022-05-05 05:35:12.190 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGames - - - 200 - application/json;+charset=utf-8 241.7779ms
2022-05-05 05:35:17.245 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetAll - -
2022-05-05 05:35:17.260 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:35:17.267 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:35:17.270 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetAllAsync (API)'
2022-05-05 05:35:17.273 +04:00 [INF] Route matched with {action = "GetAll", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAsync(Infrastructure.Paging.QueryParams) on controller API.Controllers.AdminController (API).
2022-05-05 05:35:17.290 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [videogameEntities] AS [v]
2022-05-05 05:35:17.293 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:35:17.296 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-05 05:35:17.301 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM [videogameEntities] AS [v]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-05-05 05:35:17.303 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-05 05:35:17.305 +04:00 [INF] Executed action API.Controllers.AdminController.GetAllAsync (API) in 29.8315ms
2022-05-05 05:35:17.306 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetAllAsync (API)'
2022-05-05 05:35:17.307 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetAll - - - 200 - application/json;+charset=utf-8 62.4068ms
2022-05-05 05:35:23.307 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0
2022-05-05 05:35:23.309 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:35:23.315 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:35:23.318 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:35:23.321 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:35:23.343 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameCategoryEntities] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:35:23.391 +04:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameCategoryEntities] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated], [GameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-05-05 05:35:23.539 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_categoryEntities_CategoryId". The conflict occurred in database "GamesStore", table "dbo.categoryEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_categoryEntities_CategoryId". The conflict occurred in database "GamesStore", table "dbo.categoryEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-05 05:35:23.735 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 411.1709ms
2022-05-05 05:35:23.737 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:35:24.056 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0 - 500 - application/json 749.8611ms
2022-05-05 05:35:38.442 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCategory?CategoryName=action - 0
2022-05-05 05:35:38.444 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:35:38.449 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:35:38.452 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCategory (API)'
2022-05-05 05:35:38.456 +04:00 [INF] Route matched with {action = "AddCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCategory(Infrastructure.Entities.Categories.Dtos.CreateCategoryDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:35:38.465 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [categoryEntities] AS [c]
        WHERE [c].[CategoryName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:35:38.479 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [categoryEntities] ([CategoryName], [DateCreated], [DateUpdated])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [categoryEntities]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 05:35:38.485 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-05 05:35:38.487 +04:00 [INF] Executed action API.Controllers.AdminController.AddCategory (API) in 28.7709ms
2022-05-05 05:35:38.488 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddCategory (API)'
2022-05-05 05:35:38.489 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddCategory?CategoryName=action - 0 - 200 - application/json;+charset=utf-8 46.4702ms
2022-05-05 05:35:42.574 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0
2022-05-05 05:35:42.576 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:35:42.579 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:35:42.581 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:35:42.582 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:35:42.587 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameCategoryEntities] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:35:42.593 +04:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameCategoryEntities] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated], [GameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-05-05 05:35:42.598 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-05 05:35:42.757 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 172.6532ms
2022-05-05 05:35:42.760 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:35:42.897 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0 - 500 - application/json 323.6341ms
2022-05-05 05:35:59.998 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0
2022-05-05 05:36:57.293 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:36:57.298 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:36:57.301 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:36:57.303 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:36:57.307 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameCategoryEntities] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:36:57.313 +04:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameCategoryEntities] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated], [GameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-05-05 05:36:57.317 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-05 05:36:57.455 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 150.1428ms
2022-05-05 05:36:57.456 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:36:57.588 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0 - 500 - application/json 57590.0162ms
2022-05-05 05:36:59.408 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0
2022-05-05 05:37:03.871 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:37:03.875 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:37:03.878 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:37:03.878 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:37:03.881 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameCategoryEntities] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:37:03.889 +04:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameCategoryEntities] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated], [GameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-05-05 05:37:03.894 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-05 05:37:04.023 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 143.234ms
2022-05-05 05:37:04.025 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:37:04.154 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0 - 500 - application/json 4746.2729ms
2022-05-05 05:37:08.676 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCategory?CategoryName=action - 0
2022-05-05 05:37:14.609 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:37:14.613 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:37:14.616 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCategory (API)'
2022-05-05 05:37:14.616 +04:00 [INF] Route matched with {action = "AddCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCategory(Infrastructure.Entities.Categories.Dtos.CreateCategoryDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:37:14.624 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [categoryEntities] AS [c]
        WHERE [c].[CategoryName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:37:14.693 +04:00 [INF] Executed action API.Controllers.AdminController.AddCategory (API) in 74.7306ms
2022-05-05 05:37:14.695 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddCategory (API)'
2022-05-05 05:37:14.800 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddCategory?CategoryName=action - 0 - 400 - application/json 6124.2491ms
2022-05-05 05:38:14.716 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0
2022-05-05 05:38:42.747 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:38:42.755 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:38:42.758 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:38:42.759 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:38:58.309 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameCategoryEntities] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:39:09.670 +04:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameCategoryEntities] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated], [GameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-05-05 05:39:09.676 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-05 05:39:09.866 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 27104.6661ms
2022-05-05 05:39:09.868 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:39:10.002 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0 - 500 - application/json 55286.1898ms
2022-05-05 05:39:26.620 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0
2022-05-05 05:39:29.480 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:39:29.485 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:39:29.489 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:39:29.490 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:39:32.069 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameCategoryEntities] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:39:39.519 +04:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameCategoryEntities] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated], [GameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-05-05 05:39:39.527 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-05 05:39:39.839 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 10347.4551ms
2022-05-05 05:39:39.841 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:40:03.482 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0 - 500 - application/json 36861.0036ms
2022-05-05 05:40:07.909 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=3&CategoryId=1 - 0
2022-05-05 05:40:07.911 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:40:07.914 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:40:07.917 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:40:07.918 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:40:12.332 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameCategoryEntities] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:40:16.945 +04:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameCategoryEntities] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated], [GameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-05-05 05:40:16.953 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-05 05:40:17.099 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 9176.5925ms
2022-05-05 05:40:17.100 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:40:17.236 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=3&CategoryId=1 - 0 - 500 - application/json 9326.6144ms
2022-05-05 05:40:29.766 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=3&CategoryId=1 - 0
2022-05-05 05:40:29.769 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:40:29.778 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:40:29.781 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:40:29.782 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:40:29.788 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [videogameCategoryEntities] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:40:33.667 +04:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [videogameCategoryEntities] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated], [GameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-05-05 05:40:33.672 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_videogameCategoryEntities_videogameEntities_GameId". The conflict occurred in database "GamesStore", table "dbo.videogameEntities", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ebf6e62f-36c0-45fc-9bea-a04648adf5b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-05 05:40:33.969 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 4184.5389ms
2022-05-05 05:40:33.971 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:44:31.974 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-05 05:44:32.139 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-05 05:44:32.143 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-05 05:44:32.144 +04:00 [INF] Hosting environment: Development
2022-05-05 05:44:32.144 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-05 05:44:33.854 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-05 05:44:34.090 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 243.8197ms
2022-05-05 05:44:34.157 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-05 05:44:34.160 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.8075ms
2022-05-05 05:44:34.472 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-05 05:44:34.640 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 168.1626ms
2022-05-05 05:44:39.390 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-05 05:44:39.544 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 05:44:39.574 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-05 05:44:40.643 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:44:41.451 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-05 05:44:41.793 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:44:41.934 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 05:44:41.993 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-05 05:44:42.006 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2425.9102ms
2022-05-05 05:44:42.009 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 05:44:42.013 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2622.7487ms
2022-05-05 05:47:04.214 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:47:16.303 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:47:16.599 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-05 05:47:16.627 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-05 05:47:16.631 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-05 05:47:16.631 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-05 05:47:16.645 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-05 05:47:16.660 +04:00 [INF] Applying migration '20220505014704_first'.
2022-05-05 05:47:16.747 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Category] (
    [Id] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(max) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Category] PRIMARY KEY ([Id])
);
2022-05-05 05:47:16.756 +04:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-05-05 05:47:39.566 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:47:40.198 +04:00 [INF] Executed DbCommand (255ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [GamesStore];
2022-05-05 05:47:40.273 +04:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [GamesStore] SET READ_COMMITTED_SNAPSHOT ON;
END;
2022-05-05 05:47:40.288 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-05 05:47:40.375 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2022-05-05 05:47:40.377 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-05 05:47:40.396 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-05 05:47:40.402 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-05 05:47:40.415 +04:00 [INF] Applying migration '20220505014704_first'.
2022-05-05 05:47:40.478 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Category] (
    [Id] int NOT NULL IDENTITY,
    [CategoryName] nvarchar(max) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Category] PRIMARY KEY ([Id])
);
2022-05-05 05:47:40.480 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Country] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Country] PRIMARY KEY ([Id])
);
2022-05-05 05:47:40.481 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[PaymentInfo] (
    [Id] int NOT NULL IDENTITY,
    [OwnerName] nvarchar(64) NOT NULL,
    [CardNumber] nvarchar(32) NOT NULL,
    [CSV] nvarchar(16) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [PaymentTypeId] int NOT NULL,
    [ExpireDate] datetime2 NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_PaymentInfo] PRIMARY KEY ([Id])
);
2022-05-05 05:47:40.483 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Publisher] (
    [Id] int NOT NULL IDENTITY,
    [PublisherName] nvarchar(64) NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Publisher] PRIMARY KEY ([Id])
);
2022-05-05 05:47:40.484 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[City] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(65) NOT NULL,
    [CountryId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_City] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_City_Country_CountryId] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Country] ([Id]) ON DELETE CASCADE
);
2022-05-05 05:47:40.486 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[Videogame] (
    [Id] int NOT NULL IDENTITY,
    [VideogameName] nvarchar(128) NOT NULL,
    [Price] float NOT NULL,
    [OldPrice] float NULL,
    [PublicsherId] int NOT NULL,
    [Description] nvarchar(2000) NOT NULL,
    [PlatformId] int NOT NULL,
    [ImageUrl] nvarchar(100) NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_Videogame] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Videogame_Publisher_PublicsherId] FOREIGN KEY ([PublicsherId]) REFERENCES [dbo].[Publisher] ([Id]) ON DELETE CASCADE
);
2022-05-05 05:47:40.529 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[User] (
    [Id] int NOT NULL IDENTITY,
    [UserName] varchar(128) NOT NULL,
    [Password] nvarchar(64) NOT NULL,
    [Salt] nvarchar(64) NOT NULL,
    [FirstName] nvarchar(128) NOT NULL,
    [LastName] nvarchar(128) NOT NULL,
    [VerificationToken] nvarchar(max) NULL,
    [Verified] datetime2 NULL,
    [Adress] nvarchar(128) NOT NULL,
    [TelephoneNumber] nvarchar(32) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Role] int NOT NULL,
    [CityId] int NOT NULL,
    [PaymentInfoId] int NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_User] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_User_City_CityId] FOREIGN KEY ([CityId]) REFERENCES [dbo].[City] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_User_PaymentInfo_PaymentInfoId] FOREIGN KEY ([PaymentInfoId]) REFERENCES [dbo].[PaymentInfo] ([Id])
);
2022-05-05 05:47:40.530 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [dbo].[VideogameCategory] (
    [VideogameId] int NOT NULL,
    [CategoryId] int NOT NULL,
    [GameId] int NOT NULL,
    [DateCreated] datetime2 NOT NULL,
    [DateUpdated] datetime2 NULL,
    CONSTRAINT [PK_VideogameCategory] PRIMARY KEY ([VideogameId], [CategoryId]),
    CONSTRAINT [FK_VideogameCategory_Category_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [dbo].[Category] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_VideogameCategory_Videogame_GameId] FOREIGN KEY ([GameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE
);
2022-05-05 05:47:40.531 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RefreshToken] (
    [Id] int NOT NULL IDENTITY,
    [Token] nvarchar(max) NOT NULL,
    [role] int NOT NULL,
    [Expires] datetime2 NOT NULL,
    [Created] datetime2 NOT NULL,
    [CreatedByIp] nvarchar(max) NOT NULL,
    [Revoked] datetime2 NULL,
    [RevokedByIp] nvarchar(max) NULL,
    [ReplacedByToken] nvarchar(max) NULL,
    [ReasonRevoked] nvarchar(max) NULL,
    [UserEntityId] int NULL,
    CONSTRAINT [PK_RefreshToken] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RefreshToken_User_UserEntityId] FOREIGN KEY ([UserEntityId]) REFERENCES [dbo].[User] ([Id])
);
2022-05-05 05:47:40.551 +04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (1, '2022-05-05T05:47:04.2624490+04:00', NULL, N'USA');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-05-05 05:47:40.560 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] ON;
INSERT INTO [dbo].[Country] ([Id], [DateCreated], [DateUpdated], [Name])
VALUES (2, '2022-05-05T05:47:04.2624492+04:00', NULL, N'Japan(OwO)');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[Country]'))
    SET IDENTITY_INSERT [dbo].[Country] OFF;
2022-05-05 05:47:40.568 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (1, 1, '2022-05-05T05:47:04.2624285+04:00', NULL, N'Seattle');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-05-05 05:47:41.719 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] ON;
INSERT INTO [dbo].[City] ([Id], [CountryId], [DateCreated], [DateUpdated], [Name])
VALUES (2, 2, '2022-05-05T05:47:04.2624295+04:00', NULL, N'Tokyo');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CountryId', N'DateCreated', N'DateUpdated', N'Name') AND [object_id] = OBJECT_ID(N'[dbo].[City]'))
    SET IDENTITY_INSERT [dbo].[City] OFF;
2022-05-05 05:47:41.730 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] ON;
INSERT INTO [dbo].[User] ([Id], [Adress], [CityId], [DateCreated], [DateUpdated], [Email], [FirstName], [LastName], [Password], [PaymentInfoId], [Role], [Salt], [TelephoneNumber], [UserName], [VerificationToken], [Verified])
VALUES (1, N'admin', 1, '0001-01-01T00:00:00.0000000', NULL, N'O_pirtskhalaishvili@cu.edu.ge', N'admin', N'admin', N'3PtISEJDqaOI1xgzGHYzpkGCbshwLgq7K0Y/0gPObsU=', NULL, 1, N'mT/0MRWlzYAGTlz4Me+mzw==', N'551001100', 'string', NULL, '2022-05-05T05:47:04.2771303+04:00');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Adress', N'CityId', N'DateCreated', N'DateUpdated', N'Email', N'FirstName', N'LastName', N'Password', N'PaymentInfoId', N'Role', N'Salt', N'TelephoneNumber', N'UserName', N'VerificationToken', N'Verified') AND [object_id] = OBJECT_ID(N'[dbo].[User]'))
    SET IDENTITY_INSERT [dbo].[User] OFF;
2022-05-05 05:47:41.740 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_City_CountryId] ON [dbo].[City] ([CountryId]);
2022-05-05 05:47:41.740 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RefreshToken_UserEntityId] ON [RefreshToken] ([UserEntityId]);
2022-05-05 05:47:41.742 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_CityId] ON [dbo].[User] ([CityId]);
2022-05-05 05:47:41.745 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_User_PaymentInfoId] ON [dbo].[User] ([PaymentInfoId]);
2022-05-05 05:47:41.745 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Videogame_PublicsherId] ON [dbo].[Videogame] ([PublicsherId]);
2022-05-05 05:47:41.746 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VideogameCategory_CategoryId] ON [dbo].[VideogameCategory] ([CategoryId]);
2022-05-05 05:47:41.746 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_VideogameCategory_GameId] ON [dbo].[VideogameCategory] ([GameId]);
2022-05-05 05:47:41.747 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220505014704_first', N'6.0.3');
2022-05-05 05:47:47.888 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-05 05:47:48.060 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-05 05:47:48.064 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-05 05:47:48.064 +04:00 [INF] Hosting environment: Development
2022-05-05 05:47:48.065 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-05 05:47:50.155 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-05 05:47:50.413 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 264.1100ms
2022-05-05 05:47:50.478 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-05 05:47:50.481 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.3761ms
2022-05-05 05:47:50.867 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-05 05:47:51.031 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 164.0011ms
2022-05-05 05:47:55.878 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-05 05:47:56.017 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 05:47:56.040 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-05 05:47:57.091 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:47:57.906 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-05 05:47:58.232 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:47:58.398 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 05:47:58.450 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-05 05:47:58.462 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2416.1274ms
2022-05-05 05:47:58.464 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 05:47:58.469 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2590.2449ms
2022-05-05 05:48:19.886 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddCategory?CategoryName=action - 0
2022-05-05 05:48:19.996 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:48:20.005 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:48:20.012 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddCategory (API)'
2022-05-05 05:48:20.017 +04:00 [INF] Route matched with {action = "AddCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCategory(Infrastructure.Entities.Categories.Dtos.CreateCategoryDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:48:20.040 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Category] AS [c]
        WHERE [c].[CategoryName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:48:20.082 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Category] ([CategoryName], [DateCreated], [DateUpdated])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Category]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 05:48:20.091 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-05 05:48:20.093 +04:00 [INF] Executed action API.Controllers.AdminController.AddCategory (API) in 73.6294ms
2022-05-05 05:48:20.094 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddCategory (API)'
2022-05-05 05:48:20.095 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddCategory?CategoryName=action - 0 - 200 - application/json;+charset=utf-8 208.5866ms
2022-05-05 05:48:50.332 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddPublisher?PublisherName=valve - 0
2022-05-05 05:48:50.360 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:48:50.365 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:48:50.368 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddPublisher (API)'
2022-05-05 05:48:50.373 +04:00 [INF] Route matched with {action = "AddPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddPublisher(Infrastructure.Entities.Publisher.Dto.AddPublisherDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:48:50.400 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_PublisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Publisher] AS [p]
        WHERE [p].[PublisherName] = @__model_PublisherName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:48:50.418 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Publisher] ([DateCreated], [DateUpdated], [PublisherName])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [dbo].[Publisher]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 05:48:50.422 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-05 05:48:50.423 +04:00 [INF] Executed action API.Controllers.AdminController.AddPublisher (API) in 48.5436ms
2022-05-05 05:48:50.424 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddPublisher (API)'
2022-05-05 05:48:50.425 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddPublisher?PublisherName=valve - 0 - 200 - application/json;+charset=utf-8 94.2714ms
2022-05-05 05:48:53.769 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryPLDUwhChQEYTCp9X 8698
2022-05-05 05:48:53.772 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:48:53.776 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:48:53.780 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-05 05:48:53.785 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:48:53.818 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:48:53.878 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 2000), @p3='?' (Size = 100), @p4='?' (DbType = Double), @p5='?' (DbType = Int32), @p6='?' (DbType = Double), @p7='?' (DbType = Int32), @p8='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[Videogame] ([DateCreated], [DateUpdated], [Description], [ImageUrl], [OldPrice], [PlatformId], [Price], [PublicsherId], [VideogameName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
SELECT [Id]
FROM [dbo].[Videogame]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 05:48:53.887 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-05 05:48:53.888 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 99.325ms
2022-05-05 05:48:53.889 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-05 05:48:53.891 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryPLDUwhChQEYTCp9X 8698 - 200 - application/json;+charset=utf-8 121.6367ms
2022-05-05 05:49:10.779 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCategories - -
2022-05-05 05:49:10.783 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:49:10.789 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:49:10.792 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCategories (API)'
2022-05-05 05:49:10.797 +04:00 [INF] Route matched with {action = "GetCategories", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategories() on controller API.Controllers.AdminController (API).
2022-05-05 05:49:10.811 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CategoryName], [c].[DateCreated], [c].[DateUpdated]
FROM [dbo].[Category] AS [c]
2022-05-05 05:49:10.826 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Infrastructure.Entities.Categories.Dtos.GetCategoriesDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-05 05:49:10.830 +04:00 [INF] Executed action API.Controllers.AdminController.GetCategories (API) in 30.7201ms
2022-05-05 05:49:10.831 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCategories (API)'
2022-05-05 05:49:10.832 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCategories - - - 200 - application/json;+charset=utf-8 53.5081ms
2022-05-05 05:49:25.480 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0
2022-05-05 05:49:25.483 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:49:25.486 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:49:25.489 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:49:25.495 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 05:49:25.506 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[VideogameCategory] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 05:49:31.288 +04:00 [ERR] Failed executing DbCommand (23ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[VideogameCategory] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated], [GameId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-05-05 05:49:31.321 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Entities.EntityDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_VideogameCategory_Videogame_GameId". The conflict occurred in database "GamesStore", table "dbo.Videogame", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:83ee0cd5-746c-469f-9474-9be09fdf59c6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_VideogameCategory_Videogame_GameId". The conflict occurred in database "GamesStore", table "dbo.Videogame", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__207_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:83ee0cd5-746c-469f-9474-9be09fdf59c6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-05-05 05:49:31.662 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 6163.0372ms
2022-05-05 05:49:31.663 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 05:50:24.556 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0 - 500 - application/json 59075.8893ms
2022-05-05 05:50:42.286 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - -
2022-05-05 05:50:42.288 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 05:50:42.295 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 05:50:42.300 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-05 05:50:42.305 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(System.String) on controller API.Controllers.AdminController (API).
2022-05-05 05:50:42.318 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__publisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE [p].[PublisherName] = @__publisherName_0
2022-05-05 05:50:42.343 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__publisher_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[PublisherName], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM (
    SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
    FROM [dbo].[Publisher] AS [p]
    WHERE [p].[Id] = @__publisher_Id_0
) AS [t]
LEFT JOIN [dbo].[Videogame] AS [v] ON [t].[Id] = [v].[PublicsherId]
ORDER BY [t].[Id]
2022-05-05 05:50:42.355 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.Publisher.Dto.GetGamesByPublisherDto'.
2022-05-05 05:50:42.363 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 54.8555ms
2022-05-05 05:50:42.364 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-05 05:50:42.366 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher?name=valve - - - 200 - application/json;+charset=utf-8 80.4437ms
2022-05-05 22:53:03.416 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-05 22:53:03.773 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-05 22:53:03.777 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-05 22:53:03.777 +04:00 [INF] Hosting environment: Development
2022-05-05 22:53:03.778 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-05 22:53:04.756 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-05 22:53:05.130 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 379.4835ms
2022-05-05 22:53:05.184 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-05 22:53:05.187 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6763ms
2022-05-05 22:53:05.427 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-05 22:53:05.583 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 156.0205ms
2022-05-05 22:53:15.675 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 22:53:25.846 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 22:53:40.581 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 22:53:40.941 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-05 22:53:40.969 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-05 22:53:40.972 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2022-05-05 22:53:40.972 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2022-05-05 22:53:40.987 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2022-05-05 22:53:41.001 +04:00 [INF] Applying migration '20220505185326_test2'.
2022-05-05 22:53:41.064 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[VideogameCategory] DROP CONSTRAINT [FK_VideogameCategory_Videogame_GameId];
2022-05-05 22:53:41.065 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_VideogameCategory_GameId] ON [dbo].[VideogameCategory];
2022-05-05 22:53:41.084 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[dbo].[VideogameCategory]') AND [c].[name] = N'GameId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [dbo].[VideogameCategory] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [dbo].[VideogameCategory] DROP COLUMN [GameId];
2022-05-05 22:53:41.086 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-05T22:53:25.8892800+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-05 22:53:41.086 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[City] SET [DateCreated] = '2022-05-05T22:53:25.8892812+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-05 22:53:41.087 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-05T22:53:25.8892982+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-05 22:53:41.087 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[Country] SET [DateCreated] = '2022-05-05T22:53:25.8892984+04:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2022-05-05 22:53:41.088 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [dbo].[User] SET [Password] = N'VKyRBHt9qXbYVjS8mGcDiYkB/6ALNPiXiOB58jDJdl0=', [Salt] = N'XkeKegH7vYyxrY1ux+u2sQ==', [Verified] = '2022-05-05T22:53:25.9037764+04:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2022-05-05 22:53:41.091 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [dbo].[VideogameCategory] ADD CONSTRAINT [FK_VideogameCategory_Videogame_VideogameId] FOREIGN KEY ([VideogameId]) REFERENCES [dbo].[Videogame] ([Id]) ON DELETE CASCADE;
2022-05-05 22:53:41.091 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20220505185326_test2', N'6.0.3');
2022-05-05 23:06:22.309 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-05 23:06:22.480 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-05 23:06:22.483 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-05 23:06:22.484 +04:00 [INF] Hosting environment: Development
2022-05-05 23:06:22.485 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-05 23:06:23.619 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-05 23:06:23.841 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 224.0939ms
2022-05-05 23:06:23.897 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-05 23:06:23.899 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.3784ms
2022-05-05 23:06:24.230 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-05 23:06:24.399 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 169.0485ms
2022-05-05 23:06:30.897 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-05 23:06:31.262 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 23:06:31.293 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-05 23:06:32.518 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 23:06:34.006 +04:00 [INF] Executed DbCommand (108ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-05 23:06:34.884 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 23:06:35.053 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-05 23:06:35.117 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-05 23:06:35.134 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 3833.1988ms
2022-05-05 23:06:35.137 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-05 23:06:35.144 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 4246.8359ms
2022-05-05 23:06:57.757 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0
2022-05-05 23:06:57.890 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 23:06:57.904 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 23:06:57.911 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 23:06:57.922 +04:00 [INF] Route matched with {action = "AddGameCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGameCategory(Infrastructure.Entities.VideogameCategories.Dto.CreateRemoveDto) on controller API.Controllers.AdminController (API).
2022-05-05 23:06:57.946 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__model_VideogameId_0='?' (DbType = Int32), @__model_CategoryId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[VideogameCategory] AS [v]
        WHERE ([v].[VideogameId] = @__model_VideogameId_0) AND ([v].[CategoryId] = @__model_CategoryId_1)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-05 23:07:00.529 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [dbo].[VideogameCategory] ([CategoryId], [VideogameId], [DateCreated], [DateUpdated])
VALUES (@p0, @p1, @p2, @p3);
2022-05-05 23:07:00.533 +04:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-05-05 23:07:00.535 +04:00 [INF] Executed action API.Controllers.AdminController.AddGameCategory (API) in 2611.189ms
2022-05-05 23:07:00.536 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGameCategory (API)'
2022-05-05 23:07:00.538 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGameCategory?VideogameId=1&CategoryId=1 - 0 - 200 - application/json;+charset=utf-8 2780.4898ms
2022-05-05 23:07:09.715 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetCategoriesByGame/1 - -
2022-05-05 23:07:09.733 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 23:07:09.740 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 23:07:09.743 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetCategoriesByGame (API)'
2022-05-05 23:07:09.747 +04:00 [INF] Route matched with {action = "GetCategoriesByGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesByGame(Int32) on controller API.Controllers.AdminController (API).
2022-05-05 23:07:09.791 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__gameId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[VideogameId], [v].[CategoryId], [v].[DateCreated], [v].[DateUpdated], [c].[Id], [c].[CategoryName], [c].[DateCreated], [c].[DateUpdated]
FROM [dbo].[VideogameCategory] AS [v]
INNER JOIN [dbo].[Category] AS [c] ON [v].[CategoryId] = [c].[Id]
WHERE [v].[VideogameId] = @__gameId_0
2022-05-05 23:07:09.805 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.Categories.Dtos.CategoriesByGame'.
2022-05-05 23:07:09.816 +04:00 [INF] Executed action API.Controllers.AdminController.GetCategoriesByGame (API) in 67.0209ms
2022-05-05 23:07:09.819 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetCategoriesByGame (API)'
2022-05-05 23:07:09.822 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetCategoriesByGame/1 - - - 200 - application/json;+charset=utf-8 106.8497ms
2022-05-05 23:07:16.581 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/1 - -
2022-05-05 23:07:16.583 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-05 23:07:16.587 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-05 23:07:16.593 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-05 23:07:16.597 +04:00 [INF] Route matched with {action = "GetGamesByCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGamesByCategory(Int32) on controller API.Controllers.AdminController (API).
2022-05-05 23:07:16.621 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[VideogameId], [v].[CategoryId], [v].[DateCreated], [v].[DateUpdated], [v0].[Id], [v0].[DateCreated], [v0].[DateUpdated], [v0].[Description], [v0].[ImageUrl], [v0].[OldPrice], [v0].[PlatformId], [v0].[Price], [v0].[PublicsherId], [v0].[VideogameName]
FROM [dbo].[VideogameCategory] AS [v]
INNER JOIN [dbo].[Videogame] AS [v0] ON [v].[VideogameId] = [v0].[Id]
WHERE [v].[CategoryId] = @__categoryId_0
2022-05-05 23:07:16.644 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.Categories.Dtos.GamesByCategoryDto'.
2022-05-05 23:07:16.656 +04:00 [INF] Executed action API.Controllers.AdminController.GetGamesByCategory (API) in 56.0042ms
2022-05-05 23:07:16.657 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-05 23:07:16.659 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/1 - - - 200 - application/json;+charset=utf-8 77.1709ms
2022-05-06 00:27:56.428 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 00:27:56.724 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 00:27:56.729 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 00:27:56.730 +04:00 [INF] Hosting environment: Development
2022-05-06 00:27:56.731 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 00:27:58.203 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 00:27:58.447 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 251.8787ms
2022-05-06 00:27:58.508 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 00:27:58.511 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.9166ms
2022-05-06 00:27:58.691 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 00:27:58.875 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 184.3216ms
2022-05-06 00:28:07.240 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-06 00:28:07.369 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 00:28:07.392 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-06 00:28:08.311 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 00:28:09.035 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-06 00:28:09.331 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 00:28:09.465 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-06 00:28:09.512 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-06 00:28:09.523 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2123.9168ms
2022-05-06 00:28:09.524 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 00:28:09.528 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2288.8269ms
2022-05-06 00:28:40.547 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/valve - -
2022-05-06 00:28:40.652 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 00:28:40.660 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 00:28:40.666 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 00:28:40.670 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(Infrastructure.Paging.QueryParams, System.String) on controller API.Controllers.AdminController (API).
2022-05-06 00:28:40.802 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__publisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE [p].[PublisherName] = @__publisherName_0
2022-05-06 00:28:40.829 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__publisher_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[Publisher] AS [p]
WHERE [p].[Id] = @__publisher_Id_0
2022-05-06 00:28:40.838 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 00:28:40.839 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 00:28:40.854 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__publisher_Id_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[DateCreated], [t0].[DateUpdated], [t0].[PublisherName], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM (
    SELECT TOP(1) [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[PublisherName]
    FROM (
        SELECT [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
        FROM [dbo].[Publisher] AS [p]
        WHERE [p].[Id] = @__publisher_Id_0
        ORDER BY (SELECT 1)
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
    ) AS [t]
) AS [t0]
LEFT JOIN [dbo].[Videogame] AS [v] ON [t0].[Id] = [v].[PublicsherId]
ORDER BY [t0].[Id]
2022-05-06 00:28:40.895 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-06 00:28:40.903 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 231.6275ms
2022-05-06 00:28:40.904 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 00:28:40.906 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/valve - - - 200 - application/json;+charset=utf-8 358.1035ms
2022-05-06 00:55:26.294 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 00:55:26.448 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 00:55:26.452 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 00:55:26.452 +04:00 [INF] Hosting environment: Development
2022-05-06 00:55:26.453 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 00:55:27.493 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 00:55:27.701 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 212.7203ms
2022-05-06 00:55:27.755 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 00:55:27.758 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.5333ms
2022-05-06 00:55:27.918 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 00:55:28.096 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 177.5833ms
2022-05-06 00:55:32.060 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-06 00:55:32.191 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 00:55:32.214 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-06 00:55:33.133 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 00:55:33.860 +04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-06 00:55:34.166 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 00:55:34.296 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-06 00:55:34.347 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-06 00:55:34.358 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2137.8617ms
2022-05-06 00:55:34.359 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 00:55:34.363 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2303.2767ms
2022-05-06 00:55:49.582 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/1 - -
2022-05-06 00:55:49.685 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 00:55:49.693 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 00:55:49.697 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-06 00:55:49.702 +04:00 [INF] Route matched with {action = "GetGamesByCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGamesByCategory(Infrastructure.Paging.QueryParams, Int32) on controller API.Controllers.AdminController (API).
2022-05-06 00:55:49.729 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[VideogameCategory] AS [v]
WHERE [v].[CategoryId] = @__categoryId_0
2022-05-06 00:55:49.762 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[VideogameId], [v].[CategoryId], [v].[DateCreated], [v].[DateUpdated], [v0].[Id], [v0].[DateCreated], [v0].[DateUpdated], [v0].[Description], [v0].[ImageUrl], [v0].[OldPrice], [v0].[PlatformId], [v0].[Price], [v0].[PublicsherId], [v0].[VideogameName]
FROM [dbo].[VideogameCategory] AS [v]
INNER JOIN [dbo].[Videogame] AS [v0] ON [v].[VideogameId] = [v0].[Id]
WHERE [v].[CategoryId] = @__categoryId_0
2022-05-06 00:55:49.972 +04:00 [INF] Executed action API.Controllers.AdminController.GetGamesByCategory (API) in 267.782ms
2022-05-06 00:55:49.975 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-06 00:55:50.202 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/1 - - - 500 - application/json 620.2576ms
2022-05-06 00:59:17.050 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 00:59:17.215 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 00:59:17.218 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 00:59:17.219 +04:00 [INF] Hosting environment: Development
2022-05-06 00:59:17.220 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 00:59:18.478 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 00:59:18.689 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 215.3495ms
2022-05-06 00:59:18.741 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 00:59:18.744 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.0495ms
2022-05-06 00:59:18.884 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 00:59:19.019 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 134.6292ms
2022-05-06 00:59:29.730 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-06 00:59:29.863 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 00:59:29.888 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-06 00:59:30.798 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 00:59:31.525 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-06 00:59:31.825 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 00:59:31.957 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-06 00:59:32.005 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-06 00:59:32.016 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2122.6384ms
2022-05-06 00:59:32.018 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 00:59:32.022 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2292.4437ms
2022-05-06 00:59:52.301 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/action - -
2022-05-06 00:59:52.406 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 00:59:52.416 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 00:59:52.420 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 00:59:52.425 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(Infrastructure.Paging.QueryParams, System.String) on controller API.Controllers.AdminController (API).
2022-05-06 00:59:52.473 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE 0 = 1
2022-05-06 00:59:52.570 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 142.0067ms
2022-05-06 00:59:52.572 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 00:59:52.761 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/action - - - 400 - application/json 459.9455ms
2022-05-06 01:00:09.928 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/action - -
2022-05-06 01:00:09.942 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:00:09.948 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 01:00:09.951 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 01:00:09.952 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(Infrastructure.Paging.QueryParams, System.String) on controller API.Controllers.AdminController (API).
2022-05-06 01:00:09.965 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE 0 = 1
2022-05-06 01:00:10.028 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 74.0365ms
2022-05-06 01:00:10.029 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 01:00:10.136 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/action - - - 400 - application/json 208.2011ms
2022-05-06 01:00:32.242 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/valve - -
2022-05-06 01:00:32.248 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:00:32.251 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 01:00:32.258 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 01:00:32.259 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(Infrastructure.Paging.QueryParams, System.String) on controller API.Controllers.AdminController (API).
2022-05-06 01:00:32.270 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE 0 = 1
2022-05-06 01:00:32.332 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 69.8439ms
2022-05-06 01:00:32.334 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 01:00:32.446 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/valve - - - 400 - application/json 204.0662ms
2022-05-06 01:00:42.408 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/valve?publisherName=valve - -
2022-05-06 01:00:42.411 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:00:42.413 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 01:00:42.416 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 01:00:42.417 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(Infrastructure.Paging.QueryParams, System.String) on controller API.Controllers.AdminController (API).
2022-05-06 01:00:42.426 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__publisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE [p].[PublisherName] = @__publisherName_0
2022-05-06 01:00:42.453 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__publisher_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[Publisher] AS [p]
WHERE [p].[Id] = @__publisher_Id_0
2022-05-06 01:00:42.462 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 01:00:42.465 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 01:00:42.479 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__publisher_Id_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[DateCreated], [t0].[DateUpdated], [t0].[PublisherName], [v].[Id], [v].[DateCreated], [v].[DateUpdated], [v].[Description], [v].[ImageUrl], [v].[OldPrice], [v].[PlatformId], [v].[Price], [v].[PublicsherId], [v].[VideogameName]
FROM (
    SELECT TOP(1) [t].[Id], [t].[DateCreated], [t].[DateUpdated], [t].[PublisherName]
    FROM (
        SELECT [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
        FROM [dbo].[Publisher] AS [p]
        WHERE [p].[Id] = @__publisher_Id_0
        ORDER BY (SELECT 1)
        OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
    ) AS [t]
) AS [t0]
LEFT JOIN [dbo].[Videogame] AS [v] ON [t0].[Id] = [v].[PublicsherId]
ORDER BY [t0].[Id]
2022-05-06 01:00:42.521 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-06 01:00:42.530 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 110.9309ms
2022-05-06 01:00:42.531 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 01:00:42.532 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/valve?publisherName=valve - - - 200 - application/json;+charset=utf-8 123.4550ms
2022-05-06 01:00:57.260 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/1 - -
2022-05-06 01:00:57.262 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:00:57.273 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 01:00:57.281 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-06 01:00:57.286 +04:00 [INF] Route matched with {action = "GetGamesByCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGamesByCategory(Infrastructure.Paging.QueryParams, Int32) on controller API.Controllers.AdminController (API).
2022-05-06 01:00:57.296 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[VideogameCategory] AS [v]
WHERE [v].[CategoryId] = @__categoryId_0
2022-05-06 01:00:57.311 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 01:00:57.313 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 01:00:57.331 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[VideogameId], [t].[CategoryId], [t].[DateCreated], [t].[DateUpdated], [v0].[Id], [v0].[DateCreated], [v0].[DateUpdated], [v0].[Description], [v0].[ImageUrl], [v0].[OldPrice], [v0].[PlatformId], [v0].[Price], [v0].[PublicsherId], [v0].[VideogameName]
FROM (
    SELECT [v].[VideogameId], [v].[CategoryId], [v].[DateCreated], [v].[DateUpdated]
    FROM [dbo].[VideogameCategory] AS [v]
    WHERE [v].[CategoryId] = @__categoryId_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [dbo].[Videogame] AS [v0] ON [t].[VideogameId] = [v0].[Id]
2022-05-06 01:01:00.225 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-06 01:01:00.230 +04:00 [INF] Executed action API.Controllers.AdminController.GetGamesByCategory (API) in 2942.2018ms
2022-05-06 01:01:00.231 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-06 01:01:00.232 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/1 - - - 200 - application/json;+charset=utf-8 2971.5992ms
2022-05-06 01:03:50.911 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 01:03:51.079 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 01:03:51.083 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 01:03:51.085 +04:00 [INF] Hosting environment: Development
2022-05-06 01:03:51.085 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 01:03:52.007 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 01:03:52.304 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 300.1588ms
2022-05-06 01:03:52.382 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 01:03:52.388 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 5.1851ms
2022-05-06 01:03:52.615 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 01:03:52.763 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 148.3929ms
2022-05-06 01:04:00.061 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-06 01:04:00.200 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 01:04:00.226 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-06 01:04:01.143 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:04:01.883 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-06 01:04:02.188 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 01:04:02.331 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-06 01:04:02.382 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-06 01:04:02.393 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2161.0685ms
2022-05-06 01:04:02.395 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 01:04:02.400 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2339.3742ms
2022-05-06 01:04:18.814 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/ra - -
2022-05-06 01:04:18.916 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:04:18.927 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 01:04:18.930 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 01:04:18.935 +04:00 [INF] Route matched with {action = "GetGameByPublisher", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGameByPublisher(Infrastructure.Paging.QueryParams, System.String) on controller API.Controllers.AdminController (API).
2022-05-06 01:04:19.001 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__publisherName_0='?' (Size = 64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[DateCreated], [p].[DateUpdated], [p].[PublisherName]
FROM [dbo].[Publisher] AS [p]
WHERE [p].[PublisherName] = @__publisherName_0
2022-05-06 01:04:19.101 +04:00 [INF] Executed action API.Controllers.AdminController.GetGameByPublisher (API) in 163.1886ms
2022-05-06 01:04:19.103 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGameByPublisher (API)'
2022-05-06 01:04:19.278 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGameByPublisher/ra - - - 400 - application/json 463.7179ms
2022-05-06 01:04:26.136 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/2 - -
2022-05-06 01:04:26.153 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:04:26.160 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 01:04:26.163 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-06 01:04:26.167 +04:00 [INF] Route matched with {action = "GetGamesByCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGamesByCategory(Infrastructure.Paging.QueryParams, Int32) on controller API.Controllers.AdminController (API).
2022-05-06 01:04:26.218 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[VideogameCategory] AS [v]
WHERE [v].[CategoryId] = @__categoryId_0
2022-05-06 01:04:26.235 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 01:04:26.237 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 01:04:26.254 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[VideogameId], [t].[CategoryId], [t].[DateCreated], [t].[DateUpdated], [v0].[Id], [v0].[DateCreated], [v0].[DateUpdated], [v0].[Description], [v0].[ImageUrl], [v0].[OldPrice], [v0].[PlatformId], [v0].[Price], [v0].[PublicsherId], [v0].[VideogameName]
FROM (
    SELECT [v].[VideogameId], [v].[CategoryId], [v].[DateCreated], [v].[DateUpdated]
    FROM [dbo].[VideogameCategory] AS [v]
    WHERE [v].[CategoryId] = @__categoryId_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [dbo].[Videogame] AS [v0] ON [t].[VideogameId] = [v0].[Id]
2022-05-06 01:04:30.021 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-06 01:04:30.029 +04:00 [INF] Executed action API.Controllers.AdminController.GetGamesByCategory (API) in 3860.3067ms
2022-05-06 01:04:30.030 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-06 01:04:30.032 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/2 - - - 200 - application/json;+charset=utf-8 3896.1889ms
2022-05-06 01:05:09.111 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/2 - -
2022-05-06 01:05:09.116 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:05:09.119 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 01:05:09.122 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-06 01:05:09.124 +04:00 [INF] Route matched with {action = "GetGamesByCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGamesByCategory(Infrastructure.Paging.QueryParams, Int32) on controller API.Controllers.AdminController (API).
2022-05-06 01:05:09.135 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[VideogameCategory] AS [v]
WHERE [v].[CategoryId] = @__categoryId_0
2022-05-06 01:05:09.140 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[VideogameId], [t].[CategoryId], [t].[DateCreated], [t].[DateUpdated], [v0].[Id], [v0].[DateCreated], [v0].[DateUpdated], [v0].[Description], [v0].[ImageUrl], [v0].[OldPrice], [v0].[PlatformId], [v0].[Price], [v0].[PublicsherId], [v0].[VideogameName]
FROM (
    SELECT [v].[VideogameId], [v].[CategoryId], [v].[DateCreated], [v].[DateUpdated]
    FROM [dbo].[VideogameCategory] AS [v]
    WHERE [v].[CategoryId] = @__categoryId_0
    ORDER BY (SELECT 1)
    OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
) AS [t]
INNER JOIN [dbo].[Videogame] AS [v0] ON [t].[VideogameId] = [v0].[Id]
2022-05-06 01:05:11.488 +04:00 [INF] Executed action API.Controllers.AdminController.GetGamesByCategory (API) in 2361.5024ms
2022-05-06 01:05:11.489 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.GetGamesByCategory (API)'
2022-05-06 01:05:11.601 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/GetGamesByCategory/2 - - - 400 - application/json 2491.1486ms
2022-05-06 01:05:12.411 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 01:05:12.424 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 12.9053ms
2022-05-06 01:05:12.440 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 01:05:12.441 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 1.4093ms
2022-05-06 01:05:12.570 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 01:05:12.581 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 11.7563ms
2022-05-06 01:05:12.588 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/favicon-32x32.png - -
2022-05-06 01:05:12.595 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-05-06 01:05:12.597 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/favicon-32x32.png - - - 200 628 image/png 8.9788ms
2022-05-06 01:16:12.700 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 01:16:12.861 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 01:16:12.865 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 01:16:12.865 +04:00 [INF] Hosting environment: Development
2022-05-06 01:16:12.866 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 01:16:15.019 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 01:16:15.268 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 258.4936ms
2022-05-06 01:16:15.327 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 01:16:15.330 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.6329ms
2022-05-06 01:16:15.633 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 01:16:15.752 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.5055ms
2022-05-06 01:16:33.433 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-06 01:16:33.579 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 01:16:33.604 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-06 01:16:34.572 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:16:35.322 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-06 01:16:35.642 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 01:16:35.783 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-06 01:16:35.831 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-06 01:16:35.843 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2232.7183ms
2022-05-06 01:16:35.847 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 01:16:35.853 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2420.6873ms
2022-05-06 01:17:53.641 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 01:17:53.883 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 01:17:53.887 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 01:17:53.888 +04:00 [INF] Hosting environment: Development
2022-05-06 01:17:53.889 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 01:17:54.762 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 01:17:54.973 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 216.8424ms
2022-05-06 01:17:55.028 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 01:17:55.031 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.6781ms
2022-05-06 01:17:55.447 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 01:17:55.623 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.4719ms
2022-05-06 01:18:02.887 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-06 01:18:03.038 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 01:18:03.063 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-06 01:18:04.001 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:18:04.760 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-06 01:18:05.065 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 01:18:05.199 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-06 01:18:05.248 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-06 01:18:05.259 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 2190.2631ms
2022-05-06 01:18:05.261 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 01:18:05.265 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 2377.6889ms
2022-05-06 01:18:23.560 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGamesByCategory/1 - -
2022-05-06 01:18:23.667 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:18:23.680 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 01:18:23.684 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.SearchGamesByCategory (API)'
2022-05-06 01:18:23.690 +04:00 [INF] Route matched with {action = "SearchGamesByCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchGamesByCategory(Infrastructure.Entities.Videogame.Dtos.VideoGameParameters, Int32) on controller API.Controllers.AdminController (API).
2022-05-06 01:18:23.708 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Category] AS [c]
        WHERE [c].[Id] = @__categoryId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 01:18:23.730 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[VideogameCategory] AS [v]
WHERE [v].[CategoryId] = @__categoryId_0
2022-05-06 01:18:23.758 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 01:18:23.760 +04:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2022-05-06 01:18:23.777 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__model_SearchTerm_1='?' (Size = 128), @__p_2='?' (DbType = Double), @__p_3='?' (DbType = Double), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[VideogameId], [v].[CategoryId], [v].[DateCreated], [v].[DateUpdated], [v0].[Id], [v0].[DateCreated], [v0].[DateUpdated], [v0].[Description], [v0].[ImageUrl], [v0].[OldPrice], [v0].[PlatformId], [v0].[Price], [v0].[PublicsherId], [v0].[VideogameName]
FROM [dbo].[VideogameCategory] AS [v]
INNER JOIN [dbo].[Videogame] AS [v0] ON [v].[VideogameId] = [v0].[Id]
WHERE ([v].[CategoryId] = @__categoryId_0) AND ((((@__model_SearchTerm_1 LIKE N'') OR (CHARINDEX(@__model_SearchTerm_1, [v0].[VideogameName]) > 0)) AND ([v0].[Price] > @__p_2)) AND ([v0].[Price] < @__p_3))
ORDER BY (SELECT 1)
OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
2022-05-06 01:18:23.818 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-06 01:18:23.835 +04:00 [INF] Executed action API.Controllers.AdminController.SearchGamesByCategory (API) in 142.5099ms
2022-05-06 01:18:23.837 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.SearchGamesByCategory (API)'
2022-05-06 01:18:23.838 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGamesByCategory/1 - - - 200 - application/json;+charset=utf-8 277.8591ms
2022-05-06 01:18:31.350 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGamesByCategory/1?MinPrice=4 - -
2022-05-06 01:18:31.365 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 01:18:31.371 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 01:18:31.374 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.SearchGamesByCategory (API)'
2022-05-06 01:18:31.375 +04:00 [INF] Route matched with {action = "SearchGamesByCategory", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchGamesByCategory(Infrastructure.Entities.Videogame.Dtos.VideoGameParameters, Int32) on controller API.Controllers.AdminController (API).
2022-05-06 01:18:31.407 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Category] AS [c]
        WHERE [c].[Id] = @__categoryId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 01:18:31.413 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [dbo].[VideogameCategory] AS [v]
WHERE [v].[CategoryId] = @__categoryId_0
2022-05-06 01:18:31.420 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryId_0='?' (DbType = Int32), @__model_SearchTerm_1='?' (Size = 128), @__p_2='?' (DbType = Double), @__p_3='?' (DbType = Double), @__p_4='?' (DbType = Int32), @__p_5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[VideogameId], [v].[CategoryId], [v].[DateCreated], [v].[DateUpdated], [v0].[Id], [v0].[DateCreated], [v0].[DateUpdated], [v0].[Description], [v0].[ImageUrl], [v0].[OldPrice], [v0].[PlatformId], [v0].[Price], [v0].[PublicsherId], [v0].[VideogameName]
FROM [dbo].[VideogameCategory] AS [v]
INNER JOIN [dbo].[Videogame] AS [v0] ON [v].[VideogameId] = [v0].[Id]
WHERE ([v].[CategoryId] = @__categoryId_0) AND ((((@__model_SearchTerm_1 LIKE N'') OR (CHARINDEX(@__model_SearchTerm_1, [v0].[VideogameName]) > 0)) AND ([v0].[Price] > @__p_2)) AND ([v0].[Price] < @__p_3))
ORDER BY (SELECT 1)
OFFSET @__p_4 ROWS FETCH NEXT @__p_5 ROWS ONLY
2022-05-06 01:18:31.423 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Paging.PageReturnDto`1[[Infrastructure.Entities.Videogame.Dtos.ReturnGameDto, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-05-06 01:18:31.425 +04:00 [INF] Executed action API.Controllers.AdminController.SearchGamesByCategory (API) in 47.9807ms
2022-05-06 01:18:31.426 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.SearchGamesByCategory (API)'
2022-05-06 01:18:31.428 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/Admin/SearchGamesByCategory/1?MinPrice=4 - - - 200 - application/json;+charset=utf-8 78.1462ms
2022-05-06 02:04:20.580 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 02:43:42.210 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 02:44:35.314 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 02:44:35.495 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 02:44:35.499 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 02:44:35.500 +04:00 [INF] Hosting environment: Development
2022-05-06 02:44:35.501 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 02:44:36.222 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 02:44:36.434 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 216.0739ms
2022-05-06 02:44:36.488 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 02:44:36.492 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.8306ms
2022-05-06 02:44:36.846 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 02:44:37.071 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 224.7102ms
2022-05-06 04:35:17.578 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 04:35:17.908 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 04:35:17.912 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 04:35:17.913 +04:00 [INF] Hosting environment: Development
2022-05-06 04:35:17.914 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 04:35:19.781 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 04:35:20.103 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 328.6437ms
2022-05-06 04:35:20.165 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 04:35:20.168 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 3.7121ms
2022-05-06 04:35:20.518 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 04:35:20.666 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 148.2936ms
2022-05-06 04:35:24.464 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50
2022-05-06 04:35:24.764 +04:00 [INF] Executing endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 04:35:24.792 +04:00 [INF] Route matched with {action = "Authenticate", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(Infrastructure.Entities.User.Dto.LoginDto) on controller API.Controllers.AuthController (API).
2022-05-06 04:35:25.879 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 04:35:27.245 +04:00 [INF] Executed DbCommand (56ms) [Parameters=[@__model_UserName_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Adress], [t].[CityId], [t].[DateCreated], [t].[DateUpdated], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[PaymentInfoId], [t].[Role], [t].[Salt], [t].[TelephoneNumber], [t].[UserName], [t].[VerificationToken], [t].[Verified], [r].[Id], [r].[Created], [r].[CreatedByIp], [r].[Expires], [r].[ReasonRevoked], [r].[ReplacedByToken], [r].[Revoked], [r].[RevokedByIp], [r].[Token], [r].[UserEntityId], [r].[role]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
    FROM [dbo].[User] AS [u]
    WHERE [u].[UserName] = @__model_UserName_0
) AS [t]
LEFT JOIN [RefreshToken] AS [r] ON [t].[Id] = [r].[UserEntityId]
ORDER BY [t].[Id]
2022-05-06 04:35:28.031 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[User] AS [u]
        WHERE EXISTS (
            SELECT 1
            FROM [RefreshToken] AS [r]
            WHERE ([u].[Id] = [r].[UserEntityId]) AND ([r].[Token] = @__token_0))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 04:35:28.190 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Created], [CreatedByIp], [Expires], [ReasonRevoked], [ReplacedByToken], [Revoked], [RevokedByIp], [Token], [UserEntityId], [role])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [RefreshToken]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-05-06 04:35:28.256 +04:00 [INF] Executing OkObjectResult, writing value of type 'Infrastructure.Entities.User.Dto.AuthenticateResponse'.
2022-05-06 04:35:28.272 +04:00 [INF] Executed action API.Controllers.AuthController.Authenticate (API) in 3470.169ms
2022-05-06 04:35:28.275 +04:00 [INF] Executed endpoint 'API.Controllers.AuthController.Authenticate (API)'
2022-05-06 04:35:28.282 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Auth/Authenticate application/json 50 - 200 - application/json;+charset=utf-8 3817.4663ms
2022-05-06 04:36:51.031 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundarysHTMpEf0G3zBwBKc 20241549546
2022-05-06 04:36:51.167 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 04:36:51.178 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 04:36:51.182 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-06 04:36:51.190 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-06 04:36:51.208 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-06 04:36:51.210 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 17.4346ms
2022-05-06 04:36:51.211 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-06 04:36:51.212 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundarysHTMpEf0G3zBwBKc 20241549546 - 400 - text/plain;+charset=utf-8 181.3600ms
2022-05-06 04:36:51.225 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundarysHTMpEf0G3zBwBKc 20241549546
2022-05-06 04:36:51.242 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 04:36:51.247 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 04:36:51.250 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-06 04:36:51.254 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-06 04:36:51.270 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2022-05-06 04:36:51.271 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 13.818ms
2022-05-06 04:36:51.273 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-06 04:36:51.274 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundarysHTMpEf0G3zBwBKc 20241549546 - 400 - text/plain;+charset=utf-8 49.3705ms
2022-05-06 04:37:24.719 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryqzoPCkjPNF5MfI1L 1946646
2022-05-06 04:37:24.721 +04:00 [INF] Entity Framework Core 6.0.3 initialized 'EntityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.3' with options: None
2022-05-06 04:37:24.761 +04:00 [INF] Executed DbCommand (34ms) [Parameters=[@__userContext_userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Adress], [u].[CityId], [u].[DateCreated], [u].[DateUpdated], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PaymentInfoId], [u].[Role], [u].[Salt], [u].[TelephoneNumber], [u].[UserName], [u].[VerificationToken], [u].[Verified]
FROM [dbo].[User] AS [u]
WHERE [u].[Id] = @__userContext_userId_0
2022-05-06 04:37:24.769 +04:00 [INF] Executing endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-06 04:37:24.769 +04:00 [INF] Route matched with {action = "AddGame", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGame(Infrastructure.Entities.Videogame.Dtos.AddGameDto) on controller API.Controllers.AdminController (API).
2022-05-06 04:37:24.858 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__name_0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [dbo].[Videogame] AS [v]
        WHERE [v].[VideogameName] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-05-06 04:37:24.966 +04:00 [INF] Executed action API.Controllers.AdminController.AddGame (API) in 195.0645ms
2022-05-06 04:37:24.968 +04:00 [INF] Executed endpoint 'API.Controllers.AdminController.AddGame (API)'
2022-05-06 04:37:25.286 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/Admin/AddGame?VideogameName=dota2&Price=1&PublicsherId=1&Description=good%20game&PlatformId=pc multipart/form-data;+boundary=----WebKitFormBoundaryqzoPCkjPNF5MfI1L 1946646 - 400 - application/json 567.7692ms
2022-05-06 05:39:54.576 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 05:39:54.745 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 05:39:54.748 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 05:39:54.749 +04:00 [INF] Hosting environment: Development
2022-05-06 05:39:54.750 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 05:39:57.802 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 05:39:58.030 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 231.8435ms
2022-05-06 05:39:58.091 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 05:39:58.094 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.9649ms
2022-05-06 05:39:58.339 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 05:39:58.497 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 157.4344ms
2022-05-06 05:41:22.715 +04:00 [INF] User profile is available. Using 'C:\Users\omari\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-05-06 05:41:22.906 +04:00 [INF] Now listening on: http://localhost:5208
2022-05-06 05:41:22.910 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-05-06 05:41:22.911 +04:00 [INF] Hosting environment: Development
2022-05-06 05:41:22.912 +04:00 [INF] Content root path: C:\Users\omari\source\repos\nexus-game-store\API\
2022-05-06 05:41:26.329 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2022-05-06 05:41:26.570 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 244.4402ms
2022-05-06 05:41:26.629 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2022-05-06 05:41:26.631 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 11937 application/javascript;+charset=utf-8 2.2592ms
2022-05-06 05:41:26.942 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2022-05-06 05:41:27.078 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 136.4050ms
